import{e as b,s as g,r as T,f as u,q as p,m as n,by as y,bu as U,k as i,x as v,n as r,v as D,E as Q}from"./index.c74af1de.js";import{a as _}from"./QBtnDropdown.85d83107.js";import{Q as j}from"./QForm.9d973855.js";import{Q as w}from"./QPage.311a4ff8.js";import{u as m}from"./use-fullscreen.368c58dd.js";import{u as B}from"./notify.hook.477b6e06.js";import{_ as I}from"./FormExperience.eaed12d9.js";import"./QMenu.11f4452f.js";import"./selection.9ec04c91.js";import"./QItem.0aec7174.js";const R=Q("h1",{class:"text-h5"},"Editar experiencia",-1),z=b({__name:"EditExperience",setup(k){const{setExperience:f,updateExperience:c}=m(),{isExperience:S,experience:o,loading:l}=g(m()),s=y(),{error:E}=B(),e=T({});(async()=>{try{if(await f(String(s.params.idDoc)),e.value={...o.value},o.value.dateStart!==void 0&&(e.value.dateStart=o.value.dateStart.toDate().toISOString().split("T")[0]),o.value.dateEnd!==void 0&&(e.value.dateEnd=o.value.dateEnd.toDate().toISOString().split("T")[0]),!S.value)throw new Error(`Identificador no existente: ${s.params.idDoc}`)}catch(d){E(d.message)}})();const x=()=>{e.value={...o.value},o.value.dateStart!==void 0&&(e.value.dateStart=o.value.dateStart.toDate().toISOString().split("T")[0]),o.value.dateEnd!==void 0&&(e.value.dateEnd=o.value.dateEnd.toDate().toISOString().split("T")[0])};return(d,t)=>(u(),p(w,{padding:""},{default:n(()=>[R,e.value.title?(u(),p(j,{key:0,autofocus:"",onReset:x,onSubmit:t[9]||(t[9]=U(a=>r(c)(String(d.$route.params.idDoc),{...r(o),...e.value}),["prevent"]))},{default:n(()=>[i(I,{code:e.value.code,"onUpdate:code":t[0]||(t[0]=a=>e.value.code=a),title:e.value.title,"onUpdate:title":t[1]||(t[1]=a=>e.value.title=a),jobTitle:e.value.jobTitle,"onUpdate:jobTitle":t[2]||(t[2]=a=>e.value.jobTitle=a),dateStart:e.value.dateStart,"onUpdate:dateStart":t[3]||(t[3]=a=>e.value.dateStart=a),dateEnd:e.value.dateEnd,"onUpdate:dateEnd":t[4]||(t[4]=a=>e.value.dateEnd=a),place:e.value.place,"onUpdate:place":t[5]||(t[5]=a=>e.value.place=a),is_certificado_profesionalidad:e.value.is_certificado_profesionalidad,"onUpdate:is_certificado_profesionalidad":t[6]||(t[6]=a=>e.value.is_certificado_profesionalidad=a),province:e.value.province,"onUpdate:province":t[7]||(t[7]=a=>e.value.province=a),comments:e.value.comments,"onUpdate:comments":t[8]||(t[8]=a=>e.value.comments=a)},null,8,["code","title","jobTitle","dateStart","dateEnd","place","is_certificado_profesionalidad","province","comments"]),i(_,{push:"",class:"q-mt-xl"},{default:n(()=>[i(v,{icon:"edit",loading:r(l),disable:r(l),label:"Modificar experiencia",type:"submit",color:"primary"},null,8,["loading","disable"]),i(v,{icon:"restart_alt",label:"Reiniciar",type:"reset",color:"secondary"})]),_:1})]),_:1})):D("",!0)]),_:1}))}});export{z as default};
