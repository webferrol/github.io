import{Q as R}from"./QPage.311a4ff8.js";import{b as w,c as E,a as Q,K as C,g as I,a1 as H,a2 as L,_ as U,f as b,j as D,k as e,m as o,E as n,F as K,I as O,e as F,r as k,q as S,x as h,a0 as W,aH as T,bl as G,v as J,t as _,$ as f,n as q,bs as $,y as X,z as V,bt as Z,A as ee,p as te,B as ae,s as oe}from"./index.c74af1de.js";import{u as M}from"./use-fullscreen.368c58dd.js";import{b as le,a as ne}from"./QTable.7fe34306.js";import{Q as B}from"./QItemLabel.c9451d4c.js";import{a as se,Q as z}from"./QItem.0aec7174.js";import{Q as ie}from"./QList.1944fe6a.js";import{C as re}from"./ClosePopup.ae57d685.js";import{u as de}from"./notify.hook.477b6e06.js";import"./QMenu.11f4452f.js";import"./selection.9ec04c91.js";function ce(t){const l=document.createElement("textarea");l.value=t,l.contentEditable="true",l.style.position="fixed",document.body.appendChild(l),l.focus(),l.select();const s=document.execCommand("copy");return l.remove(),s}function ue(t){return navigator.clipboard!==void 0?navigator.clipboard.writeText(t):new Promise((l,s)=>{const c=ce(t);c?l(!0):s(c)})}const me=w("div",{class:"q-space"});var pe=E({name:"QSpace",setup(){return()=>me}}),x=E({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(t,{slots:l}){const s=I(),c=Q(()=>"q-td"+(t.autoWidth===!0?" q-table--col-auto-width":"")+(t.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(t.props===void 0)return w("td",{class:c.value},C(l.default));const m=s.vnode.key,p=(t.props.colsMap!==void 0?t.props.colsMap[m]:null)||t.props.col;if(p===void 0)return;const{row:r}=t.props;return w("td",{class:c.value+p.__tdClass(r),style:p.__tdStyle(r)},C(l.default))}}}),fe=E({name:"QTr",props:{props:Object,noHover:Boolean},setup(t,{slots:l}){const s=Q(()=>"q-tr"+(t.props===void 0||t.props.header===!0?"":" "+t.props.__trClass)+(t.noHover===!0?" q-tr--no-hover":""));return()=>w("tr",{class:s.value},C(l.default))}});const ve=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],xe=["wave","pulse","pulse-x","pulse-y","fade","blink","none"];var d=E({name:"QSkeleton",props:{...H,tag:{type:String,default:"div"},type:{type:String,validator:t=>ve.includes(t),default:"rect"},animation:{type:String,validator:t=>xe.includes(t),default:"wave"},animationSpeed:{type:[String,Number],default:1500},square:Boolean,bordered:Boolean,size:String,width:String,height:String},setup(t,{slots:l}){const s=I(),c=L(t,s.proxy.$q),m=Q(()=>{const r=t.size!==void 0?[t.size,t.size]:[t.width,t.height];return{"--q-skeleton-speed":`${t.animationSpeed}ms`,width:r[0],height:r[1]}}),p=Q(()=>`q-skeleton q-skeleton--${c.value===!0?"dark":"light"} q-skeleton--type-${t.type}`+(t.animation!=="none"?` q-skeleton--anim q-skeleton--anim-${t.animation}`:"")+(t.square===!0?" q-skeleton--square":"")+(t.bordered===!0?" q-skeleton--bordered":""));return()=>w(t.tag,{class:p.value,style:m.value},C(l.default))}});const _e={},be={class:"q-pa-md"},he={class:"text-left",style:{width:"150px"}},ye={class:"text-right"},ge={class:"text-right"},ke={class:"text-right"},we={class:"text-right"},Qe={class:"text-right"},Ce={class:"text-left"},De={class:"text-right"},qe={class:"text-right"},Ee={class:"text-right"},Se={class:"text-right"},Te={class:"text-right"};function $e(t,l){return b(),D("div",be,[e(le,null,{default:o(()=>[n("thead",null,[n("tr",null,[n("th",he,[e(d,{animation:"blink",type:"text"})]),n("th",ye,[e(d,{animation:"blink",type:"text"})]),n("th",ge,[e(d,{animation:"blink",type:"text"})]),n("th",ke,[e(d,{animation:"blink",type:"text"})]),n("th",we,[e(d,{animation:"blink",type:"text"})]),n("th",Qe,[e(d,{animation:"blink",type:"text"})])])]),n("tbody",null,[(b(),D(K,null,O(5,s=>n("tr",{key:s},[n("td",Ce,[e(d,{animation:"blink",type:"text",width:"85px"})]),n("td",De,[e(d,{animation:"blink",type:"text",width:"50px"})]),n("td",qe,[e(d,{animation:"blink",type:"text",width:"35px"})]),n("td",Ee,[e(d,{animation:"blink",type:"text",width:"65px"})]),n("td",Se,[e(d,{animation:"blink",type:"text",width:"25px"})]),n("td",Te,[e(d,{animation:"blink",type:"text",width:"85px"})])])),64))])]),_:1})])}var Ve=U(_e,[["render",$e]]);const Be={class:"q-pa-md"},ze={key:0},Ie={class:"text-subtitle1"},Fe={class:"text-subtitle2"},Me=_("Para eliminar repita el c\xF3digo que viene a continuaci\xF3n"),Ne={class:"text-weight-medium"},Ye={class:"text-grey-8 q-gutter-xs"},je=F({__name:"ExperiencesTableBackend",props:{experiences:null,loading:{type:Boolean}},setup(t){const{deleteExperience:l}=M(),{error:s,ok:c}=de(),m=k([]),p=k(""),r=k(!1),y=k(""),v=k({}),N=[{name:"options",align:"center",label:"Opciones",field:"option",sortable:!1},{name:"code",align:"left",label:"C\xF3digo",field:"code",sortable:!0},{name:"title",required:!0,label:"T\xEDtulo",align:"left",field:"title",sortable:!0},{name:"jobTitle",align:"center",label:"Cargo",field:"jobTitle",sortable:!0},{name:"dateStart",label:"Comienzo",field:u=>u.dateStart.seconds,sortable:!0},{name:"dateEnd",label:"Finalizaci\xF3n",field:u=>u.dateEnd.seconds,sortable:!0},{name:"place",label:"Lugar",field:"place"},{name:"province",label:"Provincia",field:"province",sortable:!0}],Y=(u,i,a)=>`${a} registros`,j=async u=>{v.value=u,r.value=!0},P=async()=>{try{if(v.value.idDoc!==y.value)throw new Error(`Claves no coincidendes. (${v.value.idDoc}!=${y.value})`);await l(v.value.idDoc),r.value=!1,c("Experiencia eliminada de forma correcta")}catch(u){s(u.message)}finally{y.value=""}},A=async()=>{try{if(v.value.idDoc!==void 0)await ue(v.value.idDoc);else throw new Error("idDoc es undefined")}catch(u){s(u.message)}};return(u,i)=>(b(),D("div",Be,[t.loading?(b(),S(Ve,{key:0})):(b(),S(ne,{key:1,title:"Experiencia laboral",rows:t.experiences,"rows-per-page-options":[0],"pagination-label":Y,columns:N,"row-key":"title",selection:"multiple",selected:m.value,"onUpdate:selected":i[2]||(i[2]=a=>m.value=a),filter:p.value},{top:o(()=>[e(h,{color:"primary",label:"Nueva Experiencia",to:{name:"NewExperience"}}),e(pe),e(T,{borderless:"",dense:"",debounce:"300",outlined:"",color:"primary",modelValue:p.value,"onUpdate:modelValue":i[0]||(i[0]=a=>p.value=a)},{append:o(()=>[e(W,{name:"search"})]),_:1},8,["modelValue"])]),body:o(a=>[e(fe,{props:a},{default:o(()=>[e(x,null,{default:o(()=>[e(G,{modelValue:m.value,"onUpdate:modelValue":i[1]||(i[1]=g=>m.value=g),val:a.row},null,8,["modelValue","val"])]),_:2},1024),e(x,null,{default:o(()=>[e(h,{to:{name:"EditExperience",params:{idDoc:a.row.idDoc}},class:"q-mr-xs",color:"primary",size:"sm",label:"Modificar"},null,8,["to"]),e(h,{onClick:g=>j(a.row),color:"negative",size:"sm",label:"Eliminar"},null,8,["onClick"])]),_:2},1024),e(x,{key:"code",props:a},{default:o(()=>{var g;return[(g=a.row)!=null&&g.is_certificado_profesionalidad?(b(),D("span",ze," \xAE ")):J("",!0),_(f(a.row.code),1)]}),_:2},1032,["props"]),e(x,{key:"title",props:a},{default:o(()=>[_(f(a.row.title),1)]),_:2},1032,["props"]),e(x,{key:"jobTitle",props:a},{default:o(()=>[_(f(a.row.jobTitle),1)]),_:2},1032,["props"]),e(x,{key:"dateStart",props:a},{default:o(()=>[_(f(q($).formatDate(a.row.dateStart.toDate(),"DD-MM-YYYY")),1)]),_:2},1032,["props"]),e(x,{key:"dateEnd",props:a},{default:o(()=>[_(f(q($).formatDate(a.row.dateEnd.toDate(),"DD-MM-YYYY")),1)]),_:2},1032,["props"]),e(x,{key:"place",props:a},{default:o(()=>[_(f(a.row.place),1)]),_:2},1032,["props"]),e(x,{key:"province",props:a},{default:o(()=>[_(f(a.row.province),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","selected","filter"])),e(ae,{modelValue:r.value,"onUpdate:modelValue":i[5]||(i[5]=a=>r.value=a),persistent:""},{default:o(()=>[e(X,{style:{"min-width":"350px"}},{default:o(()=>[e(V,null,{default:o(()=>[n("div",Ie,f(v.value.code),1),n("div",Fe,f(v.value.title),1),n("div",null,[e(ie,{bordered:"",class:"rounded-borders",style:{"max-width":"600px"}},{default:o(()=>[e(B,{header:""},{default:o(()=>[Me]),_:1}),e(se,null,{default:o(()=>[e(z,{top:""},{default:o(()=>[e(B,{lines:"1"},{default:o(()=>{var a;return[n("span",Ne,f((a=v.value)==null?void 0:a.idDoc),1)]}),_:1})]),_:1}),e(z,{top:"",side:""},{default:o(()=>[n("div",Ye,[e(h,{onClick:A,title:"Copiar al portapapeles",class:"gt-xs",size:"12px",flat:"",dense:"",round:"",icon:"content_copy"})])]),_:1})]),_:1})]),_:1})])]),_:1}),e(V,{class:"q-pt-none"},{default:o(()=>[e(T,{dense:"",modelValue:y.value,"onUpdate:modelValue":i[3]||(i[3]=a=>y.value=a),autofocus:"",onKeyup:i[4]||(i[4]=Z(a=>r.value=!1,["enter"]))},null,8,["modelValue"])]),_:1}),e(ee,{align:"right",class:"text-primary"},{default:o(()=>[te(e(h,{flat:"",label:"Cancelar"},null,512),[[re]]),e(h,{flat:"",label:"Aceptar",onClick:P})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),Xe=F({__name:"WorkExperience",setup(t){const l=M(),{setExperiencesFromCloud:s}=l;s();const{experiences:c,loading:m}=oe(l);return(p,r)=>(b(),S(R,{padding:""},{default:o(()=>[e(je,{loading:q(m),experiences:q(c)},null,8,["loading","experiences"])]),_:1}))}});export{Xe as default};
