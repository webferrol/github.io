function Rh(t,e){const n=Object.create(null),r=t.split(",");for(let s=0;s<r.length;s++)n[r[s]]=!0;return e?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const _E="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",EE=Rh(_E);function lv(t){return!!t||t===""}function Oh(t){if(ge(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=rt(r)?SE(r):Oh(r);if(s)for(const i in s)e[i]=s[i]}return e}else{if(rt(t))return t;if(Ve(t))return t}}const IE=/;(?![^(]*\))/g,TE=/:(.+)/;function SE(t){const e={};return t.split(IE).forEach(n=>{if(n){const r=n.split(TE);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Mh(t){let e="";if(rt(t))e=t;else if(ge(t))for(let n=0;n<t.length;n++){const r=Mh(t[n]);r&&(e+=r+" ")}else if(Ve(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const qF=t=>rt(t)?t:t==null?"":ge(t)||Ve(t)&&(t.toString===dv||!Ie(t.toString))?JSON.stringify(t,uv,2):String(t),uv=(t,e)=>e&&e.__v_isRef?uv(t,e.value):zs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s])=>(n[`${r} =>`]=s,n),{})}:cv(e)?{[`Set(${e.size})`]:[...e.values()]}:Ve(e)&&!ge(e)&&!fv(e)?String(e):e,Le={},js=[],un=()=>{},kE=()=>!1,CE=/^on[^a-z]/,Nl=t=>CE.test(t),Ph=t=>t.startsWith("onUpdate:"),ot=Object.assign,Nh=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},xE=Object.prototype.hasOwnProperty,Ce=(t,e)=>xE.call(t,e),ge=Array.isArray,zs=t=>Ll(t)==="[object Map]",cv=t=>Ll(t)==="[object Set]",Ie=t=>typeof t=="function",rt=t=>typeof t=="string",Lh=t=>typeof t=="symbol",Ve=t=>t!==null&&typeof t=="object",hv=t=>Ve(t)&&Ie(t.then)&&Ie(t.catch),dv=Object.prototype.toString,Ll=t=>dv.call(t),AE=t=>Ll(t).slice(8,-1),fv=t=>Ll(t)==="[object Object]",Fh=t=>rt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Na=Rh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Fl=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},DE=/-(\w)/g,xn=Fl(t=>t.replace(DE,(e,n)=>n?n.toUpperCase():"")),RE=/\B([A-Z])/g,ws=Fl(t=>t.replace(RE,"-$1").toLowerCase()),Bl=Fl(t=>t.charAt(0).toUpperCase()+t.slice(1)),Pu=Fl(t=>t?`on${Bl(t)}`:""),lo=(t,e)=>!Object.is(t,e),Nu=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},el=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},gv=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Df;const OE=()=>Df||(Df=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let vn;class mv{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&vn&&(this.parent=vn,this.index=(vn.scopes||(vn.scopes=[])).push(this)-1)}run(e){if(this.active){const n=vn;try{return vn=this,e()}finally{vn=n}}}on(){vn=this}off(){vn=this.parent}stop(e){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.active=!1}}}function pv(t){return new mv(t)}function ME(t,e=vn){e&&e.active&&e.effects.push(t)}const Bh=t=>{const e=new Set(t);return e.w=0,e.n=0,e},vv=t=>(t.w&pr)>0,yv=t=>(t.n&pr)>0,PE=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=pr},NE=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const s=e[r];vv(s)&&!yv(s)?s.delete(t):e[n++]=s,s.w&=~pr,s.n&=~pr}e.length=n}},Ec=new WeakMap;let Ui=0,pr=1;const Ic=30;let sn;const Yr=Symbol(""),Tc=Symbol("");class Uh{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,ME(this,r)}run(){if(!this.active)return this.fn();let e=sn,n=hr;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=sn,sn=this,hr=!0,pr=1<<++Ui,Ui<=Ic?PE(this):Rf(this),this.fn()}finally{Ui<=Ic&&NE(this),pr=1<<--Ui,sn=this.parent,hr=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){sn===this?this.deferStop=!0:this.active&&(Rf(this),this.onStop&&this.onStop(),this.active=!1)}}function Rf(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let hr=!0;const wv=[];function fi(){wv.push(hr),hr=!1}function gi(){const t=wv.pop();hr=t===void 0?!0:t}function Ht(t,e,n){if(hr&&sn){let r=Ec.get(t);r||Ec.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=Bh()),bv(s)}}function bv(t,e){let n=!1;Ui<=Ic?yv(t)||(t.n|=pr,n=!vv(t)):n=!t.has(sn),n&&(t.add(sn),sn.deps.push(t))}function jn(t,e,n,r,s,i){const o=Ec.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&ge(t))o.forEach((l,u)=>{(u==="length"||u>=r)&&a.push(l)});else switch(n!==void 0&&a.push(o.get(n)),e){case"add":ge(t)?Fh(n)&&a.push(o.get("length")):(a.push(o.get(Yr)),zs(t)&&a.push(o.get(Tc)));break;case"delete":ge(t)||(a.push(o.get(Yr)),zs(t)&&a.push(o.get(Tc)));break;case"set":zs(t)&&a.push(o.get(Yr));break}if(a.length===1)a[0]&&Sc(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);Sc(Bh(l))}}function Sc(t,e){const n=ge(t)?t:[...t];for(const r of n)r.computed&&Of(r);for(const r of n)r.computed||Of(r)}function Of(t,e){(t!==sn||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const LE=Rh("__proto__,__v_isRef,__isVue"),_v=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Lh)),FE=Vh(),BE=Vh(!1,!0),UE=Vh(!0),Mf=VE();function VE(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=we(this);for(let i=0,o=this.length;i<o;i++)Ht(r,"get",i+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(we)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){fi();const r=we(this)[e].apply(this,n);return gi(),r}}),t}function Vh(t=!1,e=!1){return function(r,s,i){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&i===(t?e?nI:kv:e?Sv:Tv).get(r))return r;const o=ge(r);if(!t&&o&&Ce(Mf,s))return Reflect.get(Mf,s,i);const a=Reflect.get(r,s,i);return(Lh(s)?_v.has(s):LE(s))||(t||Ht(r,"get",s),e)?a:$e(a)?o&&Fh(s)?a:a.value:Ve(a)?t?Cv(a):Er(a):a}}const qE=Ev(),$E=Ev(!0);function Ev(t=!1){return function(n,r,s,i){let o=n[r];if(Js(o)&&$e(o)&&!$e(s))return!1;if(!t&&(!tl(s)&&!Js(s)&&(o=we(o),s=we(s)),!ge(n)&&$e(o)&&!$e(s)))return o.value=s,!0;const a=ge(n)&&Fh(r)?Number(r)<n.length:Ce(n,r),l=Reflect.set(n,r,s,i);return n===we(i)&&(a?lo(s,o)&&jn(n,"set",r,s):jn(n,"add",r,s)),l}}function jE(t,e){const n=Ce(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&jn(t,"delete",e,void 0),r}function zE(t,e){const n=Reflect.has(t,e);return(!Lh(e)||!_v.has(e))&&Ht(t,"has",e),n}function HE(t){return Ht(t,"iterate",ge(t)?"length":Yr),Reflect.ownKeys(t)}const Iv={get:FE,set:qE,deleteProperty:jE,has:zE,ownKeys:HE},KE={get:UE,set(t,e){return!0},deleteProperty(t,e){return!0}},GE=ot({},Iv,{get:BE,set:$E}),qh=t=>t,Ul=t=>Reflect.getPrototypeOf(t);function la(t,e,n=!1,r=!1){t=t.__v_raw;const s=we(t),i=we(e);n||(e!==i&&Ht(s,"get",e),Ht(s,"get",i));const{has:o}=Ul(s),a=r?qh:n?zh:uo;if(o.call(s,e))return a(t.get(e));if(o.call(s,i))return a(t.get(i));t!==s&&t.get(e)}function ua(t,e=!1){const n=this.__v_raw,r=we(n),s=we(t);return e||(t!==s&&Ht(r,"has",t),Ht(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function ca(t,e=!1){return t=t.__v_raw,!e&&Ht(we(t),"iterate",Yr),Reflect.get(t,"size",t)}function Pf(t){t=we(t);const e=we(this);return Ul(e).has.call(e,t)||(e.add(t),jn(e,"add",t,t)),this}function Nf(t,e){e=we(e);const n=we(this),{has:r,get:s}=Ul(n);let i=r.call(n,t);i||(t=we(t),i=r.call(n,t));const o=s.call(n,t);return n.set(t,e),i?lo(e,o)&&jn(n,"set",t,e):jn(n,"add",t,e),this}function Lf(t){const e=we(this),{has:n,get:r}=Ul(e);let s=n.call(e,t);s||(t=we(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&jn(e,"delete",t,void 0),i}function Ff(){const t=we(this),e=t.size!==0,n=t.clear();return e&&jn(t,"clear",void 0,void 0),n}function ha(t,e){return function(r,s){const i=this,o=i.__v_raw,a=we(o),l=e?qh:t?zh:uo;return!t&&Ht(a,"iterate",Yr),o.forEach((u,c)=>r.call(s,l(u),l(c),i))}}function da(t,e,n){return function(...r){const s=this.__v_raw,i=we(s),o=zs(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...r),c=n?qh:e?zh:uo;return!e&&Ht(i,"iterate",l?Tc:Yr),{next(){const{value:h,done:d}=u.next();return d?{value:h,done:d}:{value:a?[c(h[0]),c(h[1])]:c(h),done:d}},[Symbol.iterator](){return this}}}}function Yn(t){return function(...e){return t==="delete"?!1:this}}function WE(){const t={get(i){return la(this,i)},get size(){return ca(this)},has:ua,add:Pf,set:Nf,delete:Lf,clear:Ff,forEach:ha(!1,!1)},e={get(i){return la(this,i,!1,!0)},get size(){return ca(this)},has:ua,add:Pf,set:Nf,delete:Lf,clear:Ff,forEach:ha(!1,!0)},n={get(i){return la(this,i,!0)},get size(){return ca(this,!0)},has(i){return ua.call(this,i,!0)},add:Yn("add"),set:Yn("set"),delete:Yn("delete"),clear:Yn("clear"),forEach:ha(!0,!1)},r={get(i){return la(this,i,!0,!0)},get size(){return ca(this,!0)},has(i){return ua.call(this,i,!0)},add:Yn("add"),set:Yn("set"),delete:Yn("delete"),clear:Yn("clear"),forEach:ha(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=da(i,!1,!1),n[i]=da(i,!0,!1),e[i]=da(i,!1,!0),r[i]=da(i,!0,!0)}),[t,n,e,r]}const[YE,QE,XE,JE]=WE();function $h(t,e){const n=e?t?JE:XE:t?QE:YE;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Ce(n,s)&&s in r?n:r,s,i)}const ZE={get:$h(!1,!1)},eI={get:$h(!1,!0)},tI={get:$h(!0,!1)},Tv=new WeakMap,Sv=new WeakMap,kv=new WeakMap,nI=new WeakMap;function rI(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function sI(t){return t.__v_skip||!Object.isExtensible(t)?0:rI(AE(t))}function Er(t){return Js(t)?t:jh(t,!1,Iv,ZE,Tv)}function iI(t){return jh(t,!1,GE,eI,Sv)}function Cv(t){return jh(t,!0,KE,tI,kv)}function jh(t,e,n,r,s){if(!Ve(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=sI(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function $n(t){return Js(t)?$n(t.__v_raw):!!(t&&t.__v_isReactive)}function Js(t){return!!(t&&t.__v_isReadonly)}function tl(t){return!!(t&&t.__v_isShallow)}function xv(t){return $n(t)||Js(t)}function we(t){const e=t&&t.__v_raw;return e?we(e):t}function An(t){return el(t,"__v_skip",!0),t}const uo=t=>Ve(t)?Er(t):t,zh=t=>Ve(t)?Cv(t):t;function Av(t){hr&&sn&&(t=we(t),bv(t.dep||(t.dep=Bh())))}function Dv(t,e){t=we(t),t.dep&&Sc(t.dep)}function $e(t){return!!(t&&t.__v_isRef===!0)}function ve(t){return Rv(t,!1)}function oI(t){return Rv(t,!0)}function Rv(t,e){return $e(t)?t:new aI(t,e)}class aI{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:we(e),this._value=n?e:uo(e)}get value(){return Av(this),this._value}set value(e){const n=this.__v_isShallow||tl(e)||Js(e);e=n?e:we(e),lo(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:uo(e),Dv(this))}}function Hs(t){return $e(t)?t.value:t}const lI={get:(t,e,n)=>Hs(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return $e(s)&&!$e(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Ov(t){return $n(t)?t:new Proxy(t,lI)}function uI(t){const e=ge(t)?new Array(t.length):{};for(const n in t)e[n]=Mv(t,n);return e}class cI{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}}function Mv(t,e,n){const r=t[e];return $e(r)?r:new cI(t,e,n)}var Pv;class hI{constructor(e,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[Pv]=!1,this._dirty=!0,this.effect=new Uh(e,()=>{this._dirty||(this._dirty=!0,Dv(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=we(this);return Av(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}Pv="__v_isReadonly";function dI(t,e,n=!1){let r,s;const i=Ie(t);return i?(r=t,s=un):(r=t.get,s=t.set),new hI(r,s,i||!s,n)}function dr(t,e,n,r){let s;try{s=r?t(...r):t()}catch(i){Vl(i,e,n)}return s}function Xt(t,e,n,r){if(Ie(t)){const i=dr(t,e,n,r);return i&&hv(i)&&i.catch(o=>{Vl(o,e,n)}),i}const s=[];for(let i=0;i<t.length;i++)s.push(Xt(t[i],e,n,r));return s}function Vl(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=n;for(;i;){const u=i.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](t,o,a)===!1)return}i=i.parent}const l=e.appContext.config.errorHandler;if(l){dr(l,null,10,[t,o,a]);return}}fI(t,n,s,r)}function fI(t,e,n,r=!0){console.error(t)}let nl=!1,kc=!1;const yt=[];let _n=0;const Ks=[];let Ln=null,Fr=0;const Nv=Promise.resolve();let Hh=null;function wt(t){const e=Hh||Nv;return t?e.then(this?t.bind(this):t):e}function gI(t){let e=_n+1,n=yt.length;for(;e<n;){const r=e+n>>>1;co(yt[r])<t?e=r+1:n=r}return e}function Kh(t){(!yt.length||!yt.includes(t,nl&&t.allowRecurse?_n+1:_n))&&(t.id==null?yt.push(t):yt.splice(gI(t.id),0,t),Lv())}function Lv(){!nl&&!kc&&(kc=!0,Hh=Nv.then(Bv))}function mI(t){const e=yt.indexOf(t);e>_n&&yt.splice(e,1)}function pI(t){ge(t)?Ks.push(...t):(!Ln||!Ln.includes(t,t.allowRecurse?Fr+1:Fr))&&Ks.push(t),Lv()}function Bf(t,e=_n){for(;e<yt.length;e++){const n=yt[e];n&&n.pre&&(yt.splice(e,1),e--,n())}}function Fv(t){if(Ks.length){const e=[...new Set(Ks)];if(Ks.length=0,Ln){Ln.push(...e);return}for(Ln=e,Ln.sort((n,r)=>co(n)-co(r)),Fr=0;Fr<Ln.length;Fr++)Ln[Fr]();Ln=null,Fr=0}}const co=t=>t.id==null?1/0:t.id,vI=(t,e)=>{const n=co(t)-co(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Bv(t){kc=!1,nl=!0,yt.sort(vI);const e=un;try{for(_n=0;_n<yt.length;_n++){const n=yt[_n];n&&n.active!==!1&&dr(n,null,14)}}finally{_n=0,yt.length=0,Fv(),nl=!1,Hh=null,(yt.length||Ks.length)&&Bv()}}function yI(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Le;let s=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in r){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[c]||Le;d&&(s=n.map(f=>f.trim())),h&&(s=n.map(gv))}let a,l=r[a=Pu(e)]||r[a=Pu(xn(e))];!l&&i&&(l=r[a=Pu(ws(e))]),l&&Xt(l,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Xt(u,t,6,s)}}function Uv(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Ie(t)){const l=u=>{const c=Uv(u,e,!0);c&&(a=!0,ot(o,c))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(Ve(t)&&r.set(t,null),null):(ge(i)?i.forEach(l=>o[l]=null):ot(o,i),Ve(t)&&r.set(t,o),o)}function ql(t,e){return!t||!Nl(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ce(t,e[0].toLowerCase()+e.slice(1))||Ce(t,ws(e))||Ce(t,e))}let _t=null,$l=null;function rl(t){const e=_t;return _t=t,$l=t&&t.type.__scopeId||null,e}function $F(t){$l=t}function jF(){$l=null}function wI(t,e=_t,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Qf(-1);const i=rl(e),o=t(...s);return rl(i),r._d&&Qf(1),o};return r._n=!0,r._c=!0,r._d=!0,r}function Lu(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:l,emit:u,render:c,renderCache:h,data:d,setupState:f,ctx:g,inheritAttrs:E}=t;let v,_;const p=rl(t);try{if(n.shapeFlag&4){const D=s||r;v=wn(c.call(D,D,h,i,f,d,g)),_=l}else{const D=e;v=wn(D.length>1?D(i,{attrs:l,slots:a,emit:u}):D(i,null)),_=e.props?l:bI(l)}}catch(D){Qi.length=0,Vl(D,t,1),v=Et(Zt)}let b=v;if(_&&E!==!1){const D=Object.keys(_),{shapeFlag:N}=b;D.length&&N&7&&(o&&D.some(Ph)&&(_=_I(_,o)),b=vr(b,_))}return n.dirs&&(b=vr(b),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&(b.transition=n.transition),v=b,rl(p),v}const bI=t=>{let e;for(const n in t)(n==="class"||n==="style"||Nl(n))&&((e||(e={}))[n]=t[n]);return e},_I=(t,e)=>{const n={};for(const r in t)(!Ph(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function EI(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Uf(r,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let h=0;h<c.length;h++){const d=c[h];if(o[d]!==r[d]&&!ql(u,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Uf(r,o,u):!0:!!o;return!1}function Uf(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!ql(n,i))return!0}return!1}function II({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const TI=t=>t.__isSuspense;function SI(t,e){e&&e.pendingBranch?ge(t)?e.effects.push(...t):e.effects.push(t):pI(t)}function Gi(t,e){if(it){let n=it.provides;const r=it.parent&&it.parent.provides;r===n&&(n=it.provides=Object.create(r)),n[t]=e}}function Jt(t,e,n=!1){const r=it||_t;if(r){const s=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Ie(e)?e.call(r.proxy):e}}const Vf={};function Oe(t,e,n){return Vv(t,e,n)}function Vv(t,e,{immediate:n,deep:r,flush:s,onTrack:i,onTrigger:o}=Le){const a=it;let l,u=!1,c=!1;if($e(t)?(l=()=>t.value,u=tl(t)):$n(t)?(l=()=>t,r=!0):ge(t)?(c=!0,u=t.some(_=>$n(_)||tl(_)),l=()=>t.map(_=>{if($e(_))return _.value;if($n(_))return zr(_);if(Ie(_))return dr(_,a,2)})):Ie(t)?e?l=()=>dr(t,a,2):l=()=>{if(!(a&&a.isUnmounted))return h&&h(),Xt(t,a,3,[d])}:l=un,e&&r){const _=l;l=()=>zr(_())}let h,d=_=>{h=v.onStop=()=>{dr(_,a,4)}};if(mo)return d=un,e?n&&Xt(e,a,3,[l(),c?[]:void 0,d]):l(),un;let f=c?[]:Vf;const g=()=>{if(!!v.active)if(e){const _=v.run();(r||u||(c?_.some((p,b)=>lo(p,f[b])):lo(_,f)))&&(h&&h(),Xt(e,a,3,[_,f===Vf?void 0:f,d]),f=_)}else v.run()};g.allowRecurse=!!e;let E;s==="sync"?E=g:s==="post"?E=()=>Pt(g,a&&a.suspense):(g.pre=!0,a&&(g.id=a.uid),E=()=>Kh(g));const v=new Uh(l,E);return e?n?g():f=v.run():s==="post"?Pt(v.run.bind(v),a&&a.suspense):v.run(),()=>{v.stop(),a&&a.scope&&Nh(a.scope.effects,v)}}function kI(t,e,n){const r=this.proxy,s=rt(t)?t.includes(".")?qv(r,t):()=>r[t]:t.bind(r,r);let i;Ie(e)?i=e:(i=e.handler,n=e);const o=it;Zs(this);const a=Vv(s,i.bind(r),n);return o?Zs(o):Qr(),a}function qv(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function zr(t,e){if(!Ve(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),$e(t))zr(t.value,e);else if(ge(t))for(let n=0;n<t.length;n++)zr(t[n],e);else if(cv(t)||zs(t))t.forEach(n=>{zr(n,e)});else if(fv(t))for(const n in t)zr(t[n],e);return t}function $v(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Bo(()=>{t.isMounted=!0}),en(()=>{t.isUnmounting=!0}),t}const Wt=[Function,Array],CI={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Wt,onEnter:Wt,onAfterEnter:Wt,onEnterCancelled:Wt,onBeforeLeave:Wt,onLeave:Wt,onAfterLeave:Wt,onLeaveCancelled:Wt,onBeforeAppear:Wt,onAppear:Wt,onAfterAppear:Wt,onAppearCancelled:Wt},setup(t,{slots:e}){const n=Ke(),r=$v();let s;return()=>{const i=e.default&&Gh(e.default(),!0);if(!i||!i.length)return;let o=i[0];if(i.length>1){for(const E of i)if(E.type!==Zt){o=E;break}}const a=we(t),{mode:l}=a;if(r.isLeaving)return Fu(o);const u=qf(o);if(!u)return Fu(o);const c=ho(u,a,r,n);fo(u,c);const h=n.subTree,d=h&&qf(h);let f=!1;const{getTransitionKey:g}=u.type;if(g){const E=g();s===void 0?s=E:E!==s&&(s=E,f=!0)}if(d&&d.type!==Zt&&(!Br(u,d)||f)){const E=ho(d,a,r,n);if(fo(d,E),l==="out-in")return r.isLeaving=!0,E.afterLeave=()=>{r.isLeaving=!1,n.update()},Fu(o);l==="in-out"&&u.type!==Zt&&(E.delayLeave=(v,_,p)=>{const b=zv(r,d);b[String(d.key)]=d,v._leaveCb=()=>{_(),v._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=p})}return o}}},jv=CI;function zv(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function ho(t,e,n,r){const{appear:s,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:h,onLeave:d,onAfterLeave:f,onLeaveCancelled:g,onBeforeAppear:E,onAppear:v,onAfterAppear:_,onAppearCancelled:p}=e,b=String(t.key),D=zv(n,t),N=(T,P)=>{T&&Xt(T,r,9,P)},w=(T,P)=>{const R=P[1];N(T,P),ge(T)?T.every(F=>F.length<=1)&&R():T.length<=1&&R()},I={mode:i,persisted:o,beforeEnter(T){let P=a;if(!n.isMounted)if(s)P=E||a;else return;T._leaveCb&&T._leaveCb(!0);const R=D[b];R&&Br(t,R)&&R.el._leaveCb&&R.el._leaveCb(),N(P,[T])},enter(T){let P=l,R=u,F=c;if(!n.isMounted)if(s)P=v||l,R=_||u,F=p||c;else return;let x=!1;const H=T._enterCb=Y=>{x||(x=!0,Y?N(F,[T]):N(R,[T]),I.delayedLeave&&I.delayedLeave(),T._enterCb=void 0)};P?w(P,[T,H]):H()},leave(T,P){const R=String(t.key);if(T._enterCb&&T._enterCb(!0),n.isUnmounting)return P();N(h,[T]);let F=!1;const x=T._leaveCb=H=>{F||(F=!0,P(),H?N(g,[T]):N(f,[T]),T._leaveCb=void 0,D[R]===t&&delete D[R])};D[R]=t,d?w(d,[T,x]):x()},clone(T){return ho(T,e,n,r)}};return I}function Fu(t){if(jl(t))return t=vr(t),t.children=null,t}function qf(t){return jl(t)?t.children?t.children[0]:void 0:t}function fo(t,e){t.shapeFlag&6&&t.component?fo(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Gh(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Vt?(o.patchFlag&128&&s++,r=r.concat(Gh(o.children,e,a))):(e||o.type!==Zt)&&r.push(a!=null?vr(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function Wh(t){return Ie(t)?{setup:t,name:t.name}:t}const Wi=t=>!!t.type.__asyncLoader,jl=t=>t.type.__isKeepAlive;function Hv(t,e){Gv(t,"a",e)}function Kv(t,e){Gv(t,"da",e)}function Gv(t,e,n=it){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(zl(e,r,n),n){let s=n.parent;for(;s&&s.parent;)jl(s.parent.vnode)&&xI(r,e,n,s),s=s.parent}}function xI(t,e,n,r){const s=zl(e,t,r,!0);Hl(()=>{Nh(r[e],s)},n)}function zl(t,e,n=it,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;fi(),Zs(n);const a=Xt(e,n,t,o);return Qr(),gi(),a});return r?s.unshift(i):s.push(i),i}}const Gn=t=>(e,n=it)=>(!mo||t==="sp")&&zl(t,e,n),AI=Gn("bm"),Bo=Gn("m"),Wv=Gn("bu"),Yv=Gn("u"),en=Gn("bum"),Hl=Gn("um"),DI=Gn("sp"),RI=Gn("rtg"),OI=Gn("rtc");function MI(t,e=it){zl("ec",t,e)}function Qv(t,e){const n=_t;if(n===null)return t;const r=Gl(n)||n.proxy,s=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[o,a,l,u=Le]=e[i];Ie(o)&&(o={mounted:o,updated:o}),o.deep&&zr(a),s.push({dir:o,instance:r,value:a,oldValue:void 0,arg:l,modifiers:u})}return t}function Ar(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(fi(),Xt(l,n,8,[t.el,a,t,e]),gi())}}const Xv="components";function PI(t,e){return LI(Xv,t,!0,e)||t}const NI=Symbol();function LI(t,e,n=!0,r=!1){const s=_t||it;if(s){const i=s.type;if(t===Xv){const a=mT(i,!1);if(a&&(a===e||a===xn(e)||a===Bl(xn(e))))return i}const o=$f(s[t]||i[t],e)||$f(s.appContext[t],e);return!o&&r?i:o}}function $f(t,e){return t&&(t[e]||t[xn(e)]||t[Bl(xn(e))])}function zF(t,e,n,r){let s;const i=n&&n[r];if(ge(t)||rt(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(Ve(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];s[a]=e(t[u],u,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}function HF(t,e,n={},r,s){if(_t.isCE||_t.parent&&Wi(_t.parent)&&_t.parent.isCE)return Et("slot",e==="default"?null:{name:e},r&&r());let i=t[e];i&&i._c&&(i._d=!1),Jh();const o=i&&Jv(i(n)),a=Zh(Vt,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function Jv(t){return t.some(e=>ol(e)?!(e.type===Zt||e.type===Vt&&!Jv(e.children)):!0)?t:null}const Cc=t=>t?cy(t)?Gl(t)||t.proxy:Cc(t.parent):null,sl=ot(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Cc(t.parent),$root:t=>Cc(t.root),$emit:t=>t.emit,$options:t=>ey(t),$forceUpdate:t=>t.f||(t.f=()=>Kh(t.update)),$nextTick:t=>t.n||(t.n=wt.bind(t.proxy)),$watch:t=>kI.bind(t)}),FI={get({_:t},e){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(r!==Le&&Ce(r,e))return o[e]=1,r[e];if(s!==Le&&Ce(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&Ce(u,e))return o[e]=3,i[e];if(n!==Le&&Ce(n,e))return o[e]=4,n[e];xc&&(o[e]=0)}}const c=sl[e];let h,d;if(c)return e==="$attrs"&&Ht(t,"get",e),c(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Le&&Ce(n,e))return o[e]=4,n[e];if(d=l.config.globalProperties,Ce(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return s!==Le&&Ce(s,e)?(s[e]=n,!0):r!==Le&&Ce(r,e)?(r[e]=n,!0):Ce(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==Le&&Ce(t,o)||e!==Le&&Ce(e,o)||(a=i[0])&&Ce(a,o)||Ce(r,o)||Ce(sl,o)||Ce(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ce(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let xc=!0;function BI(t){const e=ey(t),n=t.proxy,r=t.ctx;xc=!1,e.beforeCreate&&jf(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:h,mounted:d,beforeUpdate:f,updated:g,activated:E,deactivated:v,beforeDestroy:_,beforeUnmount:p,destroyed:b,unmounted:D,render:N,renderTracked:w,renderTriggered:I,errorCaptured:T,serverPrefetch:P,expose:R,inheritAttrs:F,components:x,directives:H,filters:Y}=e;if(u&&UI(u,r,null,t.appContext.config.unwrapInjectedRef),o)for(const O in o){const X=o[O];Ie(X)&&(r[O]=X.bind(n))}if(s){const O=s.call(n,n);Ve(O)&&(t.data=Er(O))}if(xc=!0,i)for(const O in i){const X=i[O],j=Ie(X)?X.bind(n,n):Ie(X.get)?X.get.bind(n,n):un,_e=!Ie(X)&&Ie(X.set)?X.set.bind(n):un,Fe=C({get:j,set:_e});Object.defineProperty(r,O,{enumerable:!0,configurable:!0,get:()=>Fe.value,set:Be=>Fe.value=Be})}if(a)for(const O in a)Zv(a[O],r,n,O);if(l){const O=Ie(l)?l.call(n):l;Reflect.ownKeys(O).forEach(X=>{Gi(X,O[X])})}c&&jf(c,t,"c");function se(O,X){ge(X)?X.forEach(j=>O(j.bind(n))):X&&O(X.bind(n))}if(se(AI,h),se(Bo,d),se(Wv,f),se(Yv,g),se(Hv,E),se(Kv,v),se(MI,T),se(OI,w),se(RI,I),se(en,p),se(Hl,D),se(DI,P),ge(R))if(R.length){const O=t.exposed||(t.exposed={});R.forEach(X=>{Object.defineProperty(O,X,{get:()=>n[X],set:j=>n[X]=j})})}else t.exposed||(t.exposed={});N&&t.render===un&&(t.render=N),F!=null&&(t.inheritAttrs=F),x&&(t.components=x),H&&(t.directives=H)}function UI(t,e,n=un,r=!1){ge(t)&&(t=Ac(t));for(const s in t){const i=t[s];let o;Ve(i)?"default"in i?o=Jt(i.from||s,i.default,!0):o=Jt(i.from||s):o=Jt(i),$e(o)&&r?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[s]=o}}function jf(t,e,n){Xt(ge(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Zv(t,e,n,r){const s=r.includes(".")?qv(n,r):()=>n[r];if(rt(t)){const i=e[t];Ie(i)&&Oe(s,i)}else if(Ie(t))Oe(s,t.bind(n));else if(Ve(t))if(ge(t))t.forEach(i=>Zv(i,e,n,r));else{const i=Ie(t.handler)?t.handler.bind(n):e[t.handler];Ie(i)&&Oe(s,i,t)}}function ey(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(u=>il(l,u,o,!0)),il(l,e,o)),Ve(e)&&i.set(e,l),l}function il(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&il(t,i,n,!0),s&&s.forEach(o=>il(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=VI[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const VI={data:zf,props:Pr,emits:Pr,methods:Pr,computed:Pr,beforeCreate:kt,created:kt,beforeMount:kt,mounted:kt,beforeUpdate:kt,updated:kt,beforeDestroy:kt,beforeUnmount:kt,destroyed:kt,unmounted:kt,activated:kt,deactivated:kt,errorCaptured:kt,serverPrefetch:kt,components:Pr,directives:Pr,watch:$I,provide:zf,inject:qI};function zf(t,e){return e?t?function(){return ot(Ie(t)?t.call(this,this):t,Ie(e)?e.call(this,this):e)}:e:t}function qI(t,e){return Pr(Ac(t),Ac(e))}function Ac(t){if(ge(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function kt(t,e){return t?[...new Set([].concat(t,e))]:e}function Pr(t,e){return t?ot(ot(Object.create(null),t),e):e}function $I(t,e){if(!t)return e;if(!e)return t;const n=ot(Object.create(null),t);for(const r in e)n[r]=kt(t[r],e[r]);return n}function jI(t,e,n,r=!1){const s={},i={};el(i,Kl,1),t.propsDefaults=Object.create(null),ty(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:iI(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function zI(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=we(s),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let h=0;h<c.length;h++){let d=c[h];if(ql(t.emitsOptions,d))continue;const f=e[d];if(l)if(Ce(i,d))f!==i[d]&&(i[d]=f,u=!0);else{const g=xn(d);s[g]=Dc(l,a,g,f,t,!1)}else f!==i[d]&&(i[d]=f,u=!0)}}}else{ty(t,e,s,i)&&(u=!0);let c;for(const h in a)(!e||!Ce(e,h)&&((c=ws(h))===h||!Ce(e,c)))&&(l?n&&(n[h]!==void 0||n[c]!==void 0)&&(s[h]=Dc(l,a,h,void 0,t,!0)):delete s[h]);if(i!==a)for(const h in i)(!e||!Ce(e,h)&&!0)&&(delete i[h],u=!0)}u&&jn(t,"set","$attrs")}function ty(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Na(l))continue;const u=e[l];let c;s&&Ce(s,c=xn(l))?!i||!i.includes(c)?n[c]=u:(a||(a={}))[c]=u:ql(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=we(n),u=a||Le;for(let c=0;c<i.length;c++){const h=i[c];n[h]=Dc(s,l,h,u[h],t,!Ce(u,h))}}return o}function Dc(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Ce(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&Ie(l)){const{propsDefaults:u}=s;n in u?r=u[n]:(Zs(s),r=u[n]=l.call(null,e),Qr())}else r=l}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===ws(n))&&(r=!0))}return r}function ny(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!Ie(t)){const c=h=>{l=!0;const[d,f]=ny(h,e,!0);ot(o,d),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!i&&!l)return Ve(t)&&r.set(t,js),js;if(ge(i))for(let c=0;c<i.length;c++){const h=xn(i[c]);Hf(h)&&(o[h]=Le)}else if(i)for(const c in i){const h=xn(c);if(Hf(h)){const d=i[c],f=o[h]=ge(d)||Ie(d)?{type:d}:d;if(f){const g=Wf(Boolean,f.type),E=Wf(String,f.type);f[0]=g>-1,f[1]=E<0||g<E,(g>-1||Ce(f,"default"))&&a.push(h)}}}const u=[o,a];return Ve(t)&&r.set(t,u),u}function Hf(t){return t[0]!=="$"}function Kf(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function Gf(t,e){return Kf(t)===Kf(e)}function Wf(t,e){return ge(e)?e.findIndex(n=>Gf(n,t)):Ie(e)&&Gf(e,t)?0:-1}const ry=t=>t[0]==="_"||t==="$stable",Yh=t=>ge(t)?t.map(wn):[wn(t)],HI=(t,e,n)=>{if(e._n)return e;const r=wI((...s)=>Yh(e(...s)),n);return r._c=!1,r},sy=(t,e,n)=>{const r=t._ctx;for(const s in t){if(ry(s))continue;const i=t[s];if(Ie(i))e[s]=HI(s,i,r);else if(i!=null){const o=Yh(i);e[s]=()=>o}}},iy=(t,e)=>{const n=Yh(e);t.slots.default=()=>n},KI=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=we(e),el(e,"_",n)):sy(e,t.slots={})}else t.slots={},e&&iy(t,e);el(t.slots,Kl,1)},GI=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Le;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(ot(s,e),!n&&a===1&&delete s._):(i=!e.$stable,sy(e,s)),o=e}else e&&(iy(t,e),o={default:1});if(i)for(const a in s)!ry(a)&&!(a in o)&&delete s[a]};function oy(){return{app:null,config:{isNativeTag:kE,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let WI=0;function YI(t,e){return function(r,s=null){Ie(r)||(r=Object.assign({},r)),s!=null&&!Ve(s)&&(s=null);const i=oy(),o=new Set;let a=!1;const l=i.app={_uid:WI++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:vT,get config(){return i.config},set config(u){},use(u,...c){return o.has(u)||(u&&Ie(u.install)?(o.add(u),u.install(l,...c)):Ie(u)&&(o.add(u),u(l,...c))),l},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),l},component(u,c){return c?(i.components[u]=c,l):i.components[u]},directive(u,c){return c?(i.directives[u]=c,l):i.directives[u]},mount(u,c,h){if(!a){const d=Et(r,s);return d.appContext=i,c&&e?e(d,u):t(d,u,h),a=!0,l._container=u,u.__vue_app__=l,Gl(d.component)||d.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,c){return i.provides[u]=c,l}};return l}}function Rc(t,e,n,r,s=!1){if(ge(t)){t.forEach((d,f)=>Rc(d,e&&(ge(e)?e[f]:e),n,r,s));return}if(Wi(r)&&!s)return;const i=r.shapeFlag&4?Gl(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:l}=t,u=e&&e.r,c=a.refs===Le?a.refs={}:a.refs,h=a.setupState;if(u!=null&&u!==l&&(rt(u)?(c[u]=null,Ce(h,u)&&(h[u]=null)):$e(u)&&(u.value=null)),Ie(l))dr(l,a,12,[o,c]);else{const d=rt(l),f=$e(l);if(d||f){const g=()=>{if(t.f){const E=d?c[l]:l.value;s?ge(E)&&Nh(E,i):ge(E)?E.includes(i)||E.push(i):d?(c[l]=[i],Ce(h,l)&&(h[l]=c[l])):(l.value=[i],t.k&&(c[t.k]=l.value))}else d?(c[l]=o,Ce(h,l)&&(h[l]=o)):f&&(l.value=o,t.k&&(c[t.k]=o))};o?(g.id=-1,Pt(g,n)):g()}}}const Pt=SI;function QI(t){return XI(t)}function XI(t,e){const n=OE();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:h,nextSibling:d,setScopeId:f=un,cloneNode:g,insertStaticContent:E}=t,v=(m,y,A,V=null,U=null,W=null,Z=!1,G=null,Q=!!y.dynamicChildren)=>{if(m===y)return;m&&!Br(m,y)&&(V=ie(m),Se(m,U,W,!0),m=null),y.patchFlag===-2&&(Q=!1,y.dynamicChildren=null);const{type:$,ref:ce,shapeFlag:oe}=y;switch($){case Xh:_(m,y,A,V);break;case Zt:p(m,y,A,V);break;case La:m==null&&b(y,A,V,Z);break;case Vt:H(m,y,A,V,U,W,Z,G,Q);break;default:oe&1?w(m,y,A,V,U,W,Z,G,Q):oe&6?Y(m,y,A,V,U,W,Z,G,Q):(oe&64||oe&128)&&$.process(m,y,A,V,U,W,Z,G,Q,ee)}ce!=null&&U&&Rc(ce,m&&m.ref,W,y||m,!y)},_=(m,y,A,V)=>{if(m==null)r(y.el=a(y.children),A,V);else{const U=y.el=m.el;y.children!==m.children&&u(U,y.children)}},p=(m,y,A,V)=>{m==null?r(y.el=l(y.children||""),A,V):y.el=m.el},b=(m,y,A,V)=>{[m.el,m.anchor]=E(m.children,y,A,V,m.el,m.anchor)},D=({el:m,anchor:y},A,V)=>{let U;for(;m&&m!==y;)U=d(m),r(m,A,V),m=U;r(y,A,V)},N=({el:m,anchor:y})=>{let A;for(;m&&m!==y;)A=d(m),s(m),m=A;s(y)},w=(m,y,A,V,U,W,Z,G,Q)=>{Z=Z||y.type==="svg",m==null?I(y,A,V,U,W,Z,G,Q):R(m,y,U,W,Z,G,Q)},I=(m,y,A,V,U,W,Z,G)=>{let Q,$;const{type:ce,props:oe,shapeFlag:he,transition:pe,patchFlag:xe,dirs:Pe}=m;if(m.el&&g!==void 0&&xe===-1)Q=m.el=g(m.el);else{if(Q=m.el=o(m.type,W,oe&&oe.is,oe),he&8?c(Q,m.children):he&16&&P(m.children,Q,null,V,U,W&&ce!=="foreignObject",Z,G),Pe&&Ar(m,null,V,"created"),oe){for(const Ue in oe)Ue!=="value"&&!Na(Ue)&&i(Q,Ue,null,oe[Ue],W,m.children,V,U,K);"value"in oe&&i(Q,"value",null,oe.value),($=oe.onVnodeBeforeMount)&&mn($,V,m)}T(Q,m,m.scopeId,Z,V)}Pe&&Ar(m,null,V,"beforeMount");const Ne=(!U||U&&!U.pendingBranch)&&pe&&!pe.persisted;Ne&&pe.beforeEnter(Q),r(Q,y,A),(($=oe&&oe.onVnodeMounted)||Ne||Pe)&&Pt(()=>{$&&mn($,V,m),Ne&&pe.enter(Q),Pe&&Ar(m,null,V,"mounted")},U)},T=(m,y,A,V,U)=>{if(A&&f(m,A),V)for(let W=0;W<V.length;W++)f(m,V[W]);if(U){let W=U.subTree;if(y===W){const Z=U.vnode;T(m,Z,Z.scopeId,Z.slotScopeIds,U.parent)}}},P=(m,y,A,V,U,W,Z,G,Q=0)=>{for(let $=Q;$<m.length;$++){const ce=m[$]=G?tr(m[$]):wn(m[$]);v(null,ce,y,A,V,U,W,Z,G)}},R=(m,y,A,V,U,W,Z)=>{const G=y.el=m.el;let{patchFlag:Q,dynamicChildren:$,dirs:ce}=y;Q|=m.patchFlag&16;const oe=m.props||Le,he=y.props||Le;let pe;A&&Dr(A,!1),(pe=he.onVnodeBeforeUpdate)&&mn(pe,A,y,m),ce&&Ar(y,m,A,"beforeUpdate"),A&&Dr(A,!0);const xe=U&&y.type!=="foreignObject";if($?F(m.dynamicChildren,$,G,A,V,xe,W):Z||j(m,y,G,null,A,V,xe,W,!1),Q>0){if(Q&16)x(G,y,oe,he,A,V,U);else if(Q&2&&oe.class!==he.class&&i(G,"class",null,he.class,U),Q&4&&i(G,"style",oe.style,he.style,U),Q&8){const Pe=y.dynamicProps;for(let Ne=0;Ne<Pe.length;Ne++){const Ue=Pe[Ne],tn=oe[Ue],ks=he[Ue];(ks!==tn||Ue==="value")&&i(G,Ue,tn,ks,U,m.children,A,V,K)}}Q&1&&m.children!==y.children&&c(G,y.children)}else!Z&&$==null&&x(G,y,oe,he,A,V,U);((pe=he.onVnodeUpdated)||ce)&&Pt(()=>{pe&&mn(pe,A,y,m),ce&&Ar(y,m,A,"updated")},V)},F=(m,y,A,V,U,W,Z)=>{for(let G=0;G<y.length;G++){const Q=m[G],$=y[G],ce=Q.el&&(Q.type===Vt||!Br(Q,$)||Q.shapeFlag&70)?h(Q.el):A;v(Q,$,ce,null,V,U,W,Z,!0)}},x=(m,y,A,V,U,W,Z)=>{if(A!==V){for(const G in V){if(Na(G))continue;const Q=V[G],$=A[G];Q!==$&&G!=="value"&&i(m,G,$,Q,Z,y.children,U,W,K)}if(A!==Le)for(const G in A)!Na(G)&&!(G in V)&&i(m,G,A[G],null,Z,y.children,U,W,K);"value"in V&&i(m,"value",A.value,V.value)}},H=(m,y,A,V,U,W,Z,G,Q)=>{const $=y.el=m?m.el:a(""),ce=y.anchor=m?m.anchor:a("");let{patchFlag:oe,dynamicChildren:he,slotScopeIds:pe}=y;pe&&(G=G?G.concat(pe):pe),m==null?(r($,A,V),r(ce,A,V),P(y.children,A,ce,U,W,Z,G,Q)):oe>0&&oe&64&&he&&m.dynamicChildren?(F(m.dynamicChildren,he,A,U,W,Z,G),(y.key!=null||U&&y===U.subTree)&&Qh(m,y,!0)):j(m,y,A,ce,U,W,Z,G,Q)},Y=(m,y,A,V,U,W,Z,G,Q)=>{y.slotScopeIds=G,m==null?y.shapeFlag&512?U.ctx.activate(y,A,V,Z,Q):q(y,A,V,U,W,Z,Q):se(m,y,Q)},q=(m,y,A,V,U,W,Z)=>{const G=m.component=cT(m,V,U);if(jl(m)&&(G.ctx.renderer=ee),hT(G),G.asyncDep){if(U&&U.registerDep(G,O),!m.el){const Q=G.subTree=Et(Zt);p(null,Q,y,A)}return}O(G,m,y,A,U,W,Z)},se=(m,y,A)=>{const V=y.component=m.component;if(EI(m,y,A))if(V.asyncDep&&!V.asyncResolved){X(V,y,A);return}else V.next=y,mI(V.update),V.update();else y.el=m.el,V.vnode=y},O=(m,y,A,V,U,W,Z)=>{const G=()=>{if(m.isMounted){let{next:ce,bu:oe,u:he,parent:pe,vnode:xe}=m,Pe=ce,Ne;Dr(m,!1),ce?(ce.el=xe.el,X(m,ce,Z)):ce=xe,oe&&Nu(oe),(Ne=ce.props&&ce.props.onVnodeBeforeUpdate)&&mn(Ne,pe,ce,xe),Dr(m,!0);const Ue=Lu(m),tn=m.subTree;m.subTree=Ue,v(tn,Ue,h(tn.el),ie(tn),m,U,W),ce.el=Ue.el,Pe===null&&II(m,Ue.el),he&&Pt(he,U),(Ne=ce.props&&ce.props.onVnodeUpdated)&&Pt(()=>mn(Ne,pe,ce,xe),U)}else{let ce;const{el:oe,props:he}=y,{bm:pe,m:xe,parent:Pe}=m,Ne=Wi(y);if(Dr(m,!1),pe&&Nu(pe),!Ne&&(ce=he&&he.onVnodeBeforeMount)&&mn(ce,Pe,y),Dr(m,!0),oe&&ue){const Ue=()=>{m.subTree=Lu(m),ue(oe,m.subTree,m,U,null)};Ne?y.type.__asyncLoader().then(()=>!m.isUnmounted&&Ue()):Ue()}else{const Ue=m.subTree=Lu(m);v(null,Ue,A,V,m,U,W),y.el=Ue.el}if(xe&&Pt(xe,U),!Ne&&(ce=he&&he.onVnodeMounted)){const Ue=y;Pt(()=>mn(ce,Pe,Ue),U)}(y.shapeFlag&256||Pe&&Wi(Pe.vnode)&&Pe.vnode.shapeFlag&256)&&m.a&&Pt(m.a,U),m.isMounted=!0,y=A=V=null}},Q=m.effect=new Uh(G,()=>Kh($),m.scope),$=m.update=()=>Q.run();$.id=m.uid,Dr(m,!0),$()},X=(m,y,A)=>{y.component=m;const V=m.vnode.props;m.vnode=y,m.next=null,zI(m,y.props,V,A),GI(m,y.children,A),fi(),Bf(),gi()},j=(m,y,A,V,U,W,Z,G,Q=!1)=>{const $=m&&m.children,ce=m?m.shapeFlag:0,oe=y.children,{patchFlag:he,shapeFlag:pe}=y;if(he>0){if(he&128){Fe($,oe,A,V,U,W,Z,G,Q);return}else if(he&256){_e($,oe,A,V,U,W,Z,G,Q);return}}pe&8?(ce&16&&K($,U,W),oe!==$&&c(A,oe)):ce&16?pe&16?Fe($,oe,A,V,U,W,Z,G,Q):K($,U,W,!0):(ce&8&&c(A,""),pe&16&&P(oe,A,V,U,W,Z,G,Q))},_e=(m,y,A,V,U,W,Z,G,Q)=>{m=m||js,y=y||js;const $=m.length,ce=y.length,oe=Math.min($,ce);let he;for(he=0;he<oe;he++){const pe=y[he]=Q?tr(y[he]):wn(y[he]);v(m[he],pe,A,null,U,W,Z,G,Q)}$>ce?K(m,U,W,!0,!1,oe):P(y,A,V,U,W,Z,G,Q,oe)},Fe=(m,y,A,V,U,W,Z,G,Q)=>{let $=0;const ce=y.length;let oe=m.length-1,he=ce-1;for(;$<=oe&&$<=he;){const pe=m[$],xe=y[$]=Q?tr(y[$]):wn(y[$]);if(Br(pe,xe))v(pe,xe,A,null,U,W,Z,G,Q);else break;$++}for(;$<=oe&&$<=he;){const pe=m[oe],xe=y[he]=Q?tr(y[he]):wn(y[he]);if(Br(pe,xe))v(pe,xe,A,null,U,W,Z,G,Q);else break;oe--,he--}if($>oe){if($<=he){const pe=he+1,xe=pe<ce?y[pe].el:V;for(;$<=he;)v(null,y[$]=Q?tr(y[$]):wn(y[$]),A,xe,U,W,Z,G,Q),$++}}else if($>he)for(;$<=oe;)Se(m[$],U,W,!0),$++;else{const pe=$,xe=$,Pe=new Map;for($=xe;$<=he;$++){const Ut=y[$]=Q?tr(y[$]):wn(y[$]);Ut.key!=null&&Pe.set(Ut.key,$)}let Ne,Ue=0;const tn=he-xe+1;let ks=!1,Cf=0;const Si=new Array(tn);for($=0;$<tn;$++)Si[$]=0;for($=pe;$<=oe;$++){const Ut=m[$];if(Ue>=tn){Se(Ut,U,W,!0);continue}let gn;if(Ut.key!=null)gn=Pe.get(Ut.key);else for(Ne=xe;Ne<=he;Ne++)if(Si[Ne-xe]===0&&Br(Ut,y[Ne])){gn=Ne;break}gn===void 0?Se(Ut,U,W,!0):(Si[gn-xe]=$+1,gn>=Cf?Cf=gn:ks=!0,v(Ut,y[gn],A,null,U,W,Z,G,Q),Ue++)}const xf=ks?JI(Si):js;for(Ne=xf.length-1,$=tn-1;$>=0;$--){const Ut=xe+$,gn=y[Ut],Af=Ut+1<ce?y[Ut+1].el:V;Si[$]===0?v(null,gn,A,Af,U,W,Z,G,Q):ks&&(Ne<0||$!==xf[Ne]?Be(gn,A,Af,2):Ne--)}}},Be=(m,y,A,V,U=null)=>{const{el:W,type:Z,transition:G,children:Q,shapeFlag:$}=m;if($&6){Be(m.component.subTree,y,A,V);return}if($&128){m.suspense.move(y,A,V);return}if($&64){Z.move(m,y,A,ee);return}if(Z===Vt){r(W,y,A);for(let oe=0;oe<Q.length;oe++)Be(Q[oe],y,A,V);r(m.anchor,y,A);return}if(Z===La){D(m,y,A);return}if(V!==2&&$&1&&G)if(V===0)G.beforeEnter(W),r(W,y,A),Pt(()=>G.enter(W),U);else{const{leave:oe,delayLeave:he,afterLeave:pe}=G,xe=()=>r(W,y,A),Pe=()=>{oe(W,()=>{xe(),pe&&pe()})};he?he(W,xe,Pe):Pe()}else r(W,y,A)},Se=(m,y,A,V=!1,U=!1)=>{const{type:W,props:Z,ref:G,children:Q,dynamicChildren:$,shapeFlag:ce,patchFlag:oe,dirs:he}=m;if(G!=null&&Rc(G,null,A,m,!0),ce&256){y.ctx.deactivate(m);return}const pe=ce&1&&he,xe=!Wi(m);let Pe;if(xe&&(Pe=Z&&Z.onVnodeBeforeUnmount)&&mn(Pe,y,m),ce&6)re(m.component,A,V);else{if(ce&128){m.suspense.unmount(A,V);return}pe&&Ar(m,null,y,"beforeUnmount"),ce&64?m.type.remove(m,y,A,U,ee,V):$&&(W!==Vt||oe>0&&oe&64)?K($,y,A,!1,!0):(W===Vt&&oe&384||!U&&ce&16)&&K(Q,y,A),V&&pt(m)}(xe&&(Pe=Z&&Z.onVnodeUnmounted)||pe)&&Pt(()=>{Pe&&mn(Pe,y,m),pe&&Ar(m,null,y,"unmounted")},A)},pt=m=>{const{type:y,el:A,anchor:V,transition:U}=m;if(y===Vt){L(A,V);return}if(y===La){N(m);return}const W=()=>{s(A),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(m.shapeFlag&1&&U&&!U.persisted){const{leave:Z,delayLeave:G}=U,Q=()=>Z(A,W);G?G(m.el,W,Q):Q()}else W()},L=(m,y)=>{let A;for(;m!==y;)A=d(m),s(m),m=A;s(y)},re=(m,y,A)=>{const{bum:V,scope:U,update:W,subTree:Z,um:G}=m;V&&Nu(V),U.stop(),W&&(W.active=!1,Se(Z,m,y,A)),G&&Pt(G,y),Pt(()=>{m.isUnmounted=!0},y),y&&y.pendingBranch&&!y.isUnmounted&&m.asyncDep&&!m.asyncResolved&&m.suspenseId===y.pendingId&&(y.deps--,y.deps===0&&y.resolve())},K=(m,y,A,V=!1,U=!1,W=0)=>{for(let Z=W;Z<m.length;Z++)Se(m[Z],y,A,V,U)},ie=m=>m.shapeFlag&6?ie(m.component.subTree):m.shapeFlag&128?m.suspense.next():d(m.anchor||m.el),M=(m,y,A)=>{m==null?y._vnode&&Se(y._vnode,null,null,!0):v(y._vnode||null,m,y,null,null,null,A),Bf(),Fv(),y._vnode=m},ee={p:v,um:Se,m:Be,r:pt,mt:q,mc:P,pc:j,pbc:F,n:ie,o:t};let ae,ue;return e&&([ae,ue]=e(ee)),{render:M,hydrate:ae,createApp:YI(M,ae)}}function Dr({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Qh(t,e,n=!1){const r=t.children,s=e.children;if(ge(r)&&ge(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=tr(s[i]),a.el=o.el),n||Qh(o,a))}}function JI(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}const ZI=t=>t.__isTeleport,Yi=t=>t&&(t.disabled||t.disabled===""),Yf=t=>typeof SVGElement!="undefined"&&t instanceof SVGElement,Oc=(t,e)=>{const n=t&&t.to;return rt(n)?e?e(n):null:n},eT={__isTeleport:!0,process(t,e,n,r,s,i,o,a,l,u){const{mc:c,pc:h,pbc:d,o:{insert:f,querySelector:g,createText:E,createComment:v}}=u,_=Yi(e.props);let{shapeFlag:p,children:b,dynamicChildren:D}=e;if(t==null){const N=e.el=E(""),w=e.anchor=E("");f(N,n,r),f(w,n,r);const I=e.target=Oc(e.props,g),T=e.targetAnchor=E("");I&&(f(T,I),o=o||Yf(I));const P=(R,F)=>{p&16&&c(b,R,F,s,i,o,a,l)};_?P(n,w):I&&P(I,T)}else{e.el=t.el;const N=e.anchor=t.anchor,w=e.target=t.target,I=e.targetAnchor=t.targetAnchor,T=Yi(t.props),P=T?n:w,R=T?N:I;if(o=o||Yf(w),D?(d(t.dynamicChildren,D,P,s,i,o,a),Qh(t,e,!0)):l||h(t,e,P,R,s,i,o,a,!1),_)T||fa(e,n,N,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const F=e.target=Oc(e.props,g);F&&fa(e,F,null,u,0)}else T&&fa(e,w,I,u,1)}},remove(t,e,n,r,{um:s,o:{remove:i}},o){const{shapeFlag:a,children:l,anchor:u,targetAnchor:c,target:h,props:d}=t;if(h&&i(c),(o||!Yi(d))&&(i(u),a&16))for(let f=0;f<l.length;f++){const g=l[f];s(g,e,n,!0,!!g.dynamicChildren)}},move:fa,hydrate:tT};function fa(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:c}=t,h=i===2;if(h&&r(o,e,n),(!h||Yi(c))&&l&16)for(let d=0;d<u.length;d++)s(u[d],e,n,2);h&&r(a,e,n)}function tT(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:l}},u){const c=e.target=Oc(e.props,l);if(c){const h=c._lpa||c.firstChild;if(e.shapeFlag&16)if(Yi(e.props))e.anchor=u(o(t),e,a(t),n,r,s,i),e.targetAnchor=h;else{e.anchor=o(t);let d=h;for(;d;)if(d=o(d),d&&d.nodeType===8&&d.data==="teleport anchor"){e.targetAnchor=d,c._lpa=e.targetAnchor&&o(e.targetAnchor);break}u(h,e,c,n,r,s,i)}}return e.anchor&&o(e.anchor)}const nT=eT,Vt=Symbol(void 0),Xh=Symbol(void 0),Zt=Symbol(void 0),La=Symbol(void 0),Qi=[];let an=null;function Jh(t=!1){Qi.push(an=t?null:[])}function rT(){Qi.pop(),an=Qi[Qi.length-1]||null}let go=1;function Qf(t){go+=t}function ay(t){return t.dynamicChildren=go>0?an||js:null,rT(),go>0&&an&&an.push(t),t}function KF(t,e,n,r,s,i){return ay(uy(t,e,n,r,s,i,!0))}function Zh(t,e,n,r,s){return ay(Et(t,e,n,r,s,!0))}function ol(t){return t?t.__v_isVNode===!0:!1}function Br(t,e){return t.type===e.type&&t.key===e.key}const Kl="__vInternal",ly=({key:t})=>t!=null?t:null,Fa=({ref:t,ref_key:e,ref_for:n})=>t!=null?rt(t)||$e(t)||Ie(t)?{i:_t,r:t,k:e,f:!!n}:t:null;function uy(t,e=null,n=null,r=0,s=null,i=t===Vt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ly(e),ref:e&&Fa(e),scopeId:$l,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null};return a?(ed(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=rt(n)?8:16),go>0&&!o&&an&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&an.push(l),l}const Et=sT;function sT(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===NI)&&(t=Zt),ol(t)){const a=vr(t,e,!0);return n&&ed(a,n),go>0&&!i&&an&&(a.shapeFlag&6?an[an.indexOf(t)]=a:an.push(a)),a.patchFlag|=-2,a}if(pT(t)&&(t=t.__vccOpts),e){e=iT(e);let{class:a,style:l}=e;a&&!rt(a)&&(e.class=Mh(a)),Ve(l)&&(xv(l)&&!ge(l)&&(l=ot({},l)),e.style=Oh(l))}const o=rt(t)?1:TI(t)?128:ZI(t)?64:Ve(t)?4:Ie(t)?2:0;return uy(t,e,n,r,s,o,i,!0)}function iT(t){return t?xv(t)||Kl in t?ot({},t):t:null}function vr(t,e,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=t,a=e?aT(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&ly(a),ref:e&&e.ref?n&&s?ge(s)?s.concat(Fa(e)):[s,Fa(e)]:Fa(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Vt?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&vr(t.ssContent),ssFallback:t.ssFallback&&vr(t.ssFallback),el:t.el,anchor:t.anchor}}function oT(t=" ",e=0){return Et(Xh,null,t,e)}function GF(t,e){const n=Et(La,null,t);return n.staticCount=e,n}function WF(t="",e=!1){return e?(Jh(),Zh(Zt,null,t)):Et(Zt,null,t)}function wn(t){return t==null||typeof t=="boolean"?Et(Zt):ge(t)?Et(Vt,null,t.slice()):typeof t=="object"?tr(t):Et(Xh,null,String(t))}function tr(t){return t.el===null||t.memo?t:vr(t)}function ed(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ge(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),ed(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(Kl in e)?e._ctx=_t:s===3&&_t&&(_t.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ie(e)?(e={default:e,_ctx:_t},n=32):(e=String(e),r&64?(n=16,e=[oT(e)]):n=8);t.children=e,t.shapeFlag|=n}function aT(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Mh([e.class,r.class]));else if(s==="style")e.style=Oh([e.style,r.style]);else if(Nl(s)){const i=e[s],o=r[s];o&&i!==o&&!(ge(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function mn(t,e,n,r=null){Xt(t,e,7,[n,r])}const lT=oy();let uT=0;function cT(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||lT,i={uid:uT++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new mv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ny(r,s),emitsOptions:Uv(r,s),emit:null,emitted:null,propsDefaults:Le,inheritAttrs:r.inheritAttrs,ctx:Le,data:Le,props:Le,attrs:Le,slots:Le,refs:Le,setupState:Le,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=yI.bind(null,i),t.ce&&t.ce(i),i}let it=null;const Ke=()=>it||_t,Zs=t=>{it=t,t.scope.on()},Qr=()=>{it&&it.scope.off(),it=null};function cy(t){return t.vnode.shapeFlag&4}let mo=!1;function hT(t,e=!1){mo=e;const{props:n,children:r}=t.vnode,s=cy(t);jI(t,n,s,e),KI(t,r);const i=s?dT(t,e):void 0;return mo=!1,i}function dT(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=An(new Proxy(t.ctx,FI));const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?gT(t):null;Zs(t),fi();const i=dr(r,t,0,[t.props,s]);if(gi(),Qr(),hv(i)){if(i.then(Qr,Qr),e)return i.then(o=>{Xf(t,o,e)}).catch(o=>{Vl(o,t,0)});t.asyncDep=i}else Xf(t,i,e)}else hy(t,e)}function Xf(t,e,n){Ie(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ve(e)&&(t.setupState=Ov(e)),hy(t,n)}let Jf;function hy(t,e,n){const r=t.type;if(!t.render){if(!e&&Jf&&!r.render){const s=r.template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,u=ot(ot({isCustomElement:i,delimiters:a},o),l);r.render=Jf(s,u)}}t.render=r.render||un}Zs(t),fi(),BI(t),gi(),Qr()}function fT(t){return new Proxy(t.attrs,{get(e,n){return Ht(t,"get","$attrs"),e[n]}})}function gT(t){const e=r=>{t.exposed=r||{}};let n;return{get attrs(){return n||(n=fT(t))},slots:t.slots,emit:t.emit,expose:e}}function Gl(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Ov(An(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in sl)return sl[n](t)}}))}function mT(t,e=!0){return Ie(t)?t.displayName||t.name:t.name||e&&t.__name}function pT(t){return Ie(t)&&"__vccOpts"in t}const C=(t,e)=>dI(t,e,mo);function S(t,e,n){const r=arguments.length;return r===2?Ve(e)&&!ge(e)?ol(e)?Et(t,null,[e]):Et(t,e):Et(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ol(n)&&(n=[n]),Et(t,e,n))}const vT="3.2.38",yT="http://www.w3.org/2000/svg",Ur=typeof document!="undefined"?document:null,Zf=Ur&&Ur.createElement("template"),wT={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e?Ur.createElementNS(yT,t):Ur.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Ur.createTextNode(t),createComment:t=>Ur.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ur.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Zf.innerHTML=r?`<svg>${t}</svg>`:t;const a=Zf.content;if(r){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function bT(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function _T(t,e,n){const r=t.style,s=rt(n);if(n&&!s){for(const i in n)Mc(r,i,n[i]);if(e&&!rt(e))for(const i in e)n[i]==null&&Mc(r,i,"")}else{const i=r.display;s?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=i)}}const eg=/\s*!important$/;function Mc(t,e,n){if(ge(n))n.forEach(r=>Mc(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=ET(t,e);eg.test(n)?t.setProperty(ws(r),n.replace(eg,""),"important"):t[r]=n}}const tg=["Webkit","Moz","ms"],Bu={};function ET(t,e){const n=Bu[e];if(n)return n;let r=xn(e);if(r!=="filter"&&r in t)return Bu[e]=r;r=Bl(r);for(let s=0;s<tg.length;s++){const i=tg[s]+r;if(i in t)return Bu[e]=i}return e}const ng="http://www.w3.org/1999/xlink";function IT(t,e,n,r,s){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(ng,e.slice(6,e.length)):t.setAttributeNS(ng,e,n);else{const i=EE(e);n==null||i&&!lv(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function TT(t,e,n,r,s,i,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,s,i),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const l=n==null?"":n;(t.value!==l||t.tagName==="OPTION")&&(t.value=l),n==null&&t.removeAttribute(e);return}let a=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=lv(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}const[dy,ST]=(()=>{let t=Date.now,e=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(t=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(n&&Number(n[1])<=53)}return[t,e]})();let Pc=0;const kT=Promise.resolve(),CT=()=>{Pc=0},xT=()=>Pc||(kT.then(CT),Pc=dy());function AT(t,e,n,r){t.addEventListener(e,n,r)}function DT(t,e,n,r){t.removeEventListener(e,n,r)}function RT(t,e,n,r,s=null){const i=t._vei||(t._vei={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=OT(e);if(r){const u=i[e]=MT(r,s);AT(t,a,u,l)}else o&&(DT(t,a,o,l),i[e]=void 0)}}const rg=/(?:Once|Passive|Capture)$/;function OT(t){let e;if(rg.test(t)){e={};let r;for(;r=t.match(rg);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ws(t.slice(2)),e]}function MT(t,e){const n=r=>{const s=r.timeStamp||dy();(ST||s>=n.attached-1)&&Xt(PT(r,n.value),e,5,[r])};return n.value=t,n.attached=xT(),n}function PT(t,e){if(ge(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const sg=/^on[a-z]/,NT=(t,e,n,r,s=!1,i,o,a,l)=>{e==="class"?bT(t,r,s):e==="style"?_T(t,n,r):Nl(e)?Ph(e)||RT(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):LT(t,e,r,s))?TT(t,e,r,i,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),IT(t,e,r,s))};function LT(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&sg.test(e)&&Ie(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||sg.test(e)&&rt(n)?!1:e in t}const Qn="transition",ki="animation",ei=(t,{slots:e})=>S(jv,gy(t),e);ei.displayName="Transition";const fy={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},FT=ei.props=ot({},jv.props,fy),Rr=(t,e=[])=>{ge(t)?t.forEach(n=>n(...e)):t&&t(...e)},ig=t=>t?ge(t)?t.some(e=>e.length>1):t.length>1:!1;function gy(t){const e={};for(const x in t)x in fy||(e[x]=t[x]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:c=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,g=BT(s),E=g&&g[0],v=g&&g[1],{onBeforeEnter:_,onEnter:p,onEnterCancelled:b,onLeave:D,onLeaveCancelled:N,onBeforeAppear:w=_,onAppear:I=p,onAppearCancelled:T=b}=e,P=(x,H,Y)=>{er(x,H?c:a),er(x,H?u:o),Y&&Y()},R=(x,H)=>{x._isLeaving=!1,er(x,h),er(x,f),er(x,d),H&&H()},F=x=>(H,Y)=>{const q=x?I:p,se=()=>P(H,x,Y);Rr(q,[H,se]),og(()=>{er(H,x?l:i),Nn(H,x?c:a),ig(q)||ag(H,r,E,se)})};return ot(e,{onBeforeEnter(x){Rr(_,[x]),Nn(x,i),Nn(x,o)},onBeforeAppear(x){Rr(w,[x]),Nn(x,l),Nn(x,u)},onEnter:F(!1),onAppear:F(!0),onLeave(x,H){x._isLeaving=!0;const Y=()=>R(x,H);Nn(x,h),py(),Nn(x,d),og(()=>{!x._isLeaving||(er(x,h),Nn(x,f),ig(D)||ag(x,r,v,Y))}),Rr(D,[x,Y])},onEnterCancelled(x){P(x,!1),Rr(b,[x])},onAppearCancelled(x){P(x,!0),Rr(T,[x])},onLeaveCancelled(x){R(x),Rr(N,[x])}})}function BT(t){if(t==null)return null;if(Ve(t))return[Uu(t.enter),Uu(t.leave)];{const e=Uu(t);return[e,e]}}function Uu(t){return gv(t)}function Nn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function er(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function og(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let UT=0;function ag(t,e,n,r){const s=t._endId=++UT,i=()=>{s===t._endId&&r()};if(n)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=my(t,e);if(!o)return r();const u=o+"end";let c=0;const h=()=>{t.removeEventListener(u,d),i()},d=f=>{f.target===t&&++c>=l&&h()};setTimeout(()=>{c<l&&h()},a+1),t.addEventListener(u,d)}function my(t,e){const n=window.getComputedStyle(t),r=g=>(n[g]||"").split(", "),s=r(Qn+"Delay"),i=r(Qn+"Duration"),o=lg(s,i),a=r(ki+"Delay"),l=r(ki+"Duration"),u=lg(a,l);let c=null,h=0,d=0;e===Qn?o>0&&(c=Qn,h=o,d=i.length):e===ki?u>0&&(c=ki,h=u,d=l.length):(h=Math.max(o,u),c=h>0?o>u?Qn:ki:null,d=c?c===Qn?i.length:l.length:0);const f=c===Qn&&/\b(transform|all)(,|$)/.test(n[Qn+"Property"]);return{type:c,timeout:h,propCount:d,hasTransform:f}}function lg(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>ug(n)+ug(t[r])))}function ug(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function py(){return document.body.offsetHeight}const vy=new WeakMap,yy=new WeakMap,VT={name:"TransitionGroup",props:ot({},FT,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Ke(),r=$v();let s,i;return Yv(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!HT(s[0].el,n.vnode.el,o))return;s.forEach($T),s.forEach(jT);const a=s.filter(zT);py(),a.forEach(l=>{const u=l.el,c=u.style;Nn(u,o),c.transform=c.webkitTransform=c.transitionDuration="";const h=u._moveCb=d=>{d&&d.target!==u||(!d||/transform$/.test(d.propertyName))&&(u.removeEventListener("transitionend",h),u._moveCb=null,er(u,o))};u.addEventListener("transitionend",h)})}),()=>{const o=we(t),a=gy(o);let l=o.tag||Vt;s=i,i=e.default?Gh(e.default()):[];for(let u=0;u<i.length;u++){const c=i[u];c.key!=null&&fo(c,ho(c,a,r,n))}if(s)for(let u=0;u<s.length;u++){const c=s[u];fo(c,ho(c,a,r,n)),vy.set(c,c.el.getBoundingClientRect())}return Et(l,null,i)}}},qT=VT;function $T(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function jT(t){yy.set(t,t.el.getBoundingClientRect())}function zT(t){const e=vy.get(t),n=yy.get(t),r=e.left-n.left,s=e.top-n.top;if(r||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${s}px)`,i.transitionDuration="0s",t}}function HT(t,e,n){const r=t.cloneNode();t._vtc&&t._vtc.forEach(o=>{o.split(/\s+/).forEach(a=>a&&r.classList.remove(a))}),n.split(/\s+/).forEach(o=>o&&r.classList.add(o)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:i}=my(r);return s.removeChild(r),i}const KT=["ctrl","shift","alt","meta"],GT={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>KT.some(n=>t[`${n}Key`]&&!e.includes(n))},YF=(t,e)=>(n,...r)=>{for(let s=0;s<e.length;s++){const i=GT[e[s]];if(i&&i(n,e))return}return t(n,...r)},WT={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},QF=(t,e)=>n=>{if(!("key"in n))return;const r=ws(n.key);if(e.some(s=>s===r||WT[s]===r))return t(n)},YT=ot({patchProp:NT},wT);let cg;function QT(){return cg||(cg=QI(YT))}const wy=(...t)=>{const e=QT().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=XT(r);if(!s)return;const i=e._component;!Ie(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function XT(t){return rt(t)?document.querySelector(t):t}function Uo(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0})}function XF(t,e){for(const n in e)Uo(t,n,e[n])}const zn=ve(!1);let Wl;function JT(t,e){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(vivaldi)[\/]([\w.]+)/.exec(t)||/(chrome|crios)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(firefox|fxios)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(t)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[2]||n[4]||"0",versionNumber:n[4]||n[2]||"0",platform:e[0]||""}}function ZT(t){return/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[]}const by="ontouchstart"in window||window.navigator.maxTouchPoints>0;function eS(t){Wl={is:{...t}},delete t.mac,delete t.desktop;const e=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(t,{mobile:!0,ios:!0,platform:e,[e]:!0})}function tS(t){const e=t.toLowerCase(),n=ZT(e),r=JT(e,n),s={};r.browser&&(s[r.browser]=!0,s.version=r.version,s.versionNumber=parseInt(r.versionNumber,10)),r.platform&&(s[r.platform]=!0);const i=s.android||s.ios||s.bb||s.blackberry||s.ipad||s.iphone||s.ipod||s.kindle||s.playbook||s.silk||s["windows phone"];return i===!0||e.indexOf("mobile")>-1?(s.mobile=!0,s.edga||s.edgios?(s.edge=!0,r.browser="edge"):s.crios?(s.chrome=!0,r.browser="chrome"):s.fxios&&(s.firefox=!0,r.browser="firefox")):s.desktop=!0,(s.ipod||s.ipad||s.iphone)&&(s.ios=!0),s["windows phone"]&&(s.winphone=!0,delete s["windows phone"]),(s.chrome||s.opr||s.safari||s.vivaldi||s.mobile===!0&&s.ios!==!0&&i!==!0)&&(s.webkit=!0),s.edg&&(r.browser="edgechromium",s.edgeChromium=!0),(s.safari&&s.blackberry||s.bb)&&(r.browser="blackberry",s.blackberry=!0),s.safari&&s.playbook&&(r.browser="playbook",s.playbook=!0),s.opr&&(r.browser="opera",s.opera=!0),s.safari&&s.android&&(r.browser="android",s.android=!0),s.safari&&s.kindle&&(r.browser="kindle",s.kindle=!0),s.safari&&s.silk&&(r.browser="silk",s.silk=!0),s.vivaldi&&(r.browser="vivaldi",s.vivaldi=!0),s.name=r.browser,s.platform=r.platform,e.indexOf("electron")>-1?s.electron=!0:document.location.href.indexOf("-extension://")>-1?s.bex=!0:(window.Capacitor!==void 0?(s.capacitor=!0,s.nativeMobile=!0,s.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(s.cordova=!0,s.nativeMobile=!0,s.nativeMobileWrapper="cordova"),by===!0&&s.mac===!0&&(s.desktop===!0&&s.safari===!0||s.nativeMobile===!0&&s.android!==!0&&s.ios!==!0&&s.ipad!==!0)&&eS(s)),s}const hg=navigator.userAgent||navigator.vendor||window.opera,nS={has:{touch:!1,webStorage:!1},within:{iframe:!1}},Ze={userAgent:hg,is:tS(hg),has:{touch:by},within:{iframe:window.self!==window.top}},Nc={install(t){const{$q:e}=t;zn.value===!0?(t.onSSRHydrated.push(()=>{zn.value=!1,Object.assign(e.platform,Ze),Wl=void 0}),e.platform=Er(this)):e.platform=this}};{let t;Uo(Ze.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Ze.is.ios===!0&&window.navigator.vendor.toLowerCase().indexOf("apple"),zn.value===!0?Object.assign(Nc,Ze,Wl,nS):Object.assign(Nc,Ze)}var Yl=(t,e)=>{const n=Er(t);for(const r in t)Uo(e,r,()=>n[r],s=>{n[r]=s});return e};const Lt={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(Lt,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function po(){}function JF(t){return t.button===0}function rS(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function sS(t){if(t.path)return t.path;if(t.composedPath)return t.composedPath();const e=[];let n=t.target;for(;n;){if(e.push(n),n.tagName==="HTML")return e.push(document),e.push(window),e;n=n.parentElement}}function ti(t){t.stopPropagation()}function ur(t){t.cancelable!==!1&&t.preventDefault()}function Ft(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function ZF(t,e){if(t===void 0||e===!0&&t.__dragPrevented===!0)return;const n=e===!0?r=>{r.__dragPrevented=!0,r.addEventListener("dragstart",ur,Lt.notPassiveCapture)}:r=>{delete r.__dragPrevented,r.removeEventListener("dragstart",ur,Lt.notPassiveCapture)};t.querySelectorAll("a, img").forEach(n)}function iS(t,e,n){const r=`__q_${e}_evt`;t[r]=t[r]!==void 0?t[r].concat(n):n,n.forEach(s=>{s[0].addEventListener(s[1],t[s[2]],Lt[s[3]])})}function oS(t,e){const n=`__q_${e}_evt`;t[n]!==void 0&&(t[n].forEach(r=>{r[0].removeEventListener(r[1],t[r[2]],Lt[r[3]])}),t[n]=void 0)}function _y(t,e=250,n){let r;function s(){const i=arguments,o=()=>{r=void 0,n!==!0&&t.apply(this,i)};clearTimeout(r),n===!0&&r===void 0&&t.apply(this,i),r=setTimeout(o,e)}return s.cancel=()=>{clearTimeout(r)},s}const Vu=["sm","md","lg","xl"],{passive:dg}=Lt;var aS=Yl({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:po,setDebounce:po,install({$q:t,onSSRHydrated:e}){if(t.screen=this,this.__installed===!0){t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,r=n||window,s=document.scrollingElement||document.documentElement,i=n===void 0||Ze.is.mobile===!0?()=>[Math.max(window.innerWidth,s.clientWidth),Math.max(window.innerHeight,s.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-s.clientWidth,n.height*n.scale+window.innerHeight-s.clientHeight],o=t.config.screen!==void 0&&t.config.screen.bodyClasses===!0;this.__update=h=>{const[d,f]=i();if(f!==this.height&&(this.height=f),d!==this.width)this.width=d;else if(h!==!0)return;let g=this.sizes;this.gt.xs=d>=g.sm,this.gt.sm=d>=g.md,this.gt.md=d>=g.lg,this.gt.lg=d>=g.xl,this.lt.sm=d<g.sm,this.lt.md=d<g.md,this.lt.lg=d<g.lg,this.lt.xl=d<g.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,g=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",g!==this.name&&(o===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${g}`)),this.name=g)};let a,l={},u=16;this.setSizes=h=>{Vu.forEach(d=>{h[d]!==void 0&&(l[d]=h[d])})},this.setDebounce=h=>{u=h};const c=()=>{const h=getComputedStyle(document.body);h.getPropertyValue("--q-size-sm")&&Vu.forEach(d=>{this.sizes[d]=parseInt(h.getPropertyValue(`--q-size-${d}`),10)}),this.setSizes=d=>{Vu.forEach(f=>{d[f]&&(this.sizes[f]=d[f])}),this.__update(!0)},this.setDebounce=d=>{a!==void 0&&r.removeEventListener("resize",a,dg),a=d>0?_y(this.__update,d):this.__update,r.addEventListener("resize",a,dg)},this.setDebounce(u),Object.keys(l).length>0?(this.setSizes(l),l=void 0):this.__update(),o===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};zn.value===!0?e.push(c):c()}});const vt=Yl({isActive:!1,mode:!1},{__media:void 0,set(t){vt.mode=t,t==="auto"?(vt.__media===void 0&&(vt.__media=window.matchMedia("(prefers-color-scheme: dark)"),vt.__updateMedia=()=>{vt.set("auto")},vt.__media.addListener(vt.__updateMedia)),t=vt.__media.matches):vt.__media!==void 0&&(vt.__media.removeListener(vt.__updateMedia),vt.__media=void 0),vt.isActive=t===!0,document.body.classList.remove(`body--${t===!0?"light":"dark"}`),document.body.classList.add(`body--${t===!0?"dark":"light"}`)},toggle(){vt.set(vt.isActive===!1)},install({$q:t,onSSRHydrated:e,ssrContext:n}){const{dark:r}=t.config;if(t.dark=this,this.__installed===!0&&r===void 0)return;this.isActive=r===!0;const s=r!==void 0?r:!1;if(zn.value===!0){const i=a=>{this.__fromSSR=a},o=this.set;this.set=i,i(s),e.push(()=>{this.set=o,this.set(this.__fromSSR)})}else this.set(s)}}),Ey=()=>!0;function lS(t){return typeof t=="string"&&t!==""&&t!=="/"&&t!=="#/"}function uS(t){return t.startsWith("#")===!0&&(t=t.substring(1)),t.startsWith("/")===!1&&(t="/"+t),t.endsWith("/")===!0&&(t=t.substring(0,t.length-1)),"#"+t}function cS(t){if(t.backButtonExit===!1)return()=>!1;if(t.backButtonExit==="*")return Ey;const e=["#/"];return Array.isArray(t.backButtonExit)===!0&&e.push(...t.backButtonExit.filter(lS).map(uS)),()=>e.includes(window.location.hash)}var Lc={__history:[],add:po,remove:po,install({$q:t}){if(this.__installed===!0)return;const{cordova:e,capacitor:n}=Ze.is;if(e!==!0&&n!==!0)return;const r=t.config[e===!0?"cordova":"capacitor"];if(r!==void 0&&r.backButton===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=o=>{o.condition===void 0&&(o.condition=Ey),this.__history.push(o)},this.remove=o=>{const a=this.__history.indexOf(o);a>=0&&this.__history.splice(a,1)};const s=cS(Object.assign({backButtonExit:!0},r)),i=()=>{if(this.__history.length){const o=this.__history[this.__history.length-1];o.condition()===!0&&(this.__history.pop(),o.handler())}else s()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",i,!1)}):window.Capacitor.Plugins.App.addListener("backButton",i)}},Fc={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days"},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,n)=>t+"-"+e+" of "+n,columns:"Columns"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function fg(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length>0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,n)=>n===0?e.toLowerCase():n>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const bn=Yl({__langPack:{}},{getLocale:fg,set(t=Fc,e){const n={...t,rtl:t.rtl===!0,getLocale:fg};{const r=document.documentElement;r.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),r.setAttribute("lang",n.isoName),n.set=bn.set,Object.assign(bn.__langPack,n),bn.props=n,bn.isoName=n.isoName,bn.nativeName=n.nativeName}},install({$q:t,lang:e,ssrContext:n}){t.lang=bn.__langPack,this.__installed===!0?e!==void 0&&this.set(e):this.set(e||Fc)}});function hS(t,e,n=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${t}`,e)}let Iy=!1;function dS(t){Iy=t.isComposing===!0}function Ty(t){return Iy===!0||t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function vo(t,e){return Ty(t)===!0?!1:[].concat(e).includes(t.keyCode)}function fS(t){if(t.ios===!0)return"ios";if(t.android===!0)return"android"}function gS({is:t,has:e,within:n},r){const s=[t.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(t.mobile===!0){const i=fS(t);i!==void 0&&s.push("platform-"+i)}if(t.nativeMobile===!0){const i=t.nativeMobileWrapper;s.push(i),s.push("native-mobile"),t.ios===!0&&(r[i]===void 0||r[i].iosStatusBarPadding!==!1)&&s.push("q-ios-padding")}else t.electron===!0?s.push("electron"):t.bex===!0&&s.push("bex");return n.iframe===!0&&s.push("within-iframe"),s}function mS(){const t=document.body.className;let e=t;Wl!==void 0&&(e=e.replace("desktop","platform-ios mobile")),Ze.has.touch===!0&&(e=e.replace("no-touch","touch")),Ze.within.iframe===!0&&(e+=" within-iframe"),t!==e&&(document.body.className=e)}function pS(t){for(const e in t)hS(e,t[e])}var vS={install(t){if(this.__installed!==!0){if(zn.value===!0)mS();else{const{$q:e}=t;e.config.brand!==void 0&&pS(e.config.brand);const n=gS(Ze,e.config);document.body.classList.add.apply(document.body.classList,n)}Ze.is.ios===!0&&document.body.addEventListener("touchstart",po),window.addEventListener("keydown",dS,!0)}}},yS={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}};const al=Yl({iconMapFn:null,__icons:{}},{set(t,e){const n={...t,rtl:t.rtl===!0};n.set=al.set,Object.assign(al.__icons,n)},install({$q:t,iconSet:e,ssrContext:n}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__icons,Uo(t,"iconMapFn",()=>this.iconMapFn,r=>{this.iconMapFn=r}),this.__installed===!0?e!==void 0&&this.set(e):this.set(e||yS)}}),wS="_q_",eB="_q_l_",tB="_q_pc_",bS="_q_fo_",_S="_q_u_",ll={};let Sy=!1;function ES(){Sy=!0}const IS=typeof Map=="function",TS=typeof Set=="function",SS=typeof ArrayBuffer=="function";function qu(t,e){if(t===e)return!0;if(t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(t.constructor===Array){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(qu(t[r],e[r])!==!0)return!1;return!0}if(IS===!0&&t.constructor===Map){if(t.size!==e.size)return!1;for(r=t.entries().next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=r.next()}for(r=t.entries().next();r.done!==!0;){if(qu(r.value[1],e.get(r.value[0]))!==!0)return!1;r=r.next()}return!0}if(TS===!0&&t.constructor===Set){if(t.size!==e.size)return!1;for(r=t.entries().next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=r.next()}return!0}if(SS===!0&&t.buffer!=null&&t.buffer.constructor===ArrayBuffer){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t).filter(i=>t[i]!==void 0);if(n=s.length,n!==Object.keys(e).filter(i=>e[i]!==void 0).length)return!1;for(r=n;r--!==0;){const i=s[r];if(qu(t[i],e[i])!==!0)return!1}return!0}return t!==t&&e!==e}function on(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}function ky(t){return Object.prototype.toString.call(t)==="[object Date]"}function nB(t){return typeof t=="number"&&isFinite(t)}const gg=[Nc,vS,vt,aS,Lc,bn,al];function Cy(t,e){const n=wy(t);n.config.globalProperties=e.config.globalProperties;const{reload:r,...s}=e._context;return Object.assign(n._context,s),n}function mg(t,e){e.forEach(n=>{n.install(t),n.__installed=!0})}function kS(t,e,n){t.config.globalProperties.$q=n.$q,t.provide(wS,n.$q),mg(n,gg),e.components!==void 0&&Object.values(e.components).forEach(r=>{on(r)===!0&&r.name!==void 0&&t.component(r.name,r)}),e.directives!==void 0&&Object.values(e.directives).forEach(r=>{on(r)===!0&&r.name!==void 0&&t.directive(r.name,r)}),e.plugins!==void 0&&mg(n,Object.values(e.plugins).filter(r=>typeof r.install=="function"&&gg.includes(r)===!1)),zn.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(r=>{r()}),n.$q.onSSRHydrated=()=>{}})}var CS=function(t,e={}){const n={version:"2.7.7"};Sy===!1?(e.config!==void 0&&Object.assign(ll,e.config),n.config={...ll},ES()):n.config=e.config||{},kS(t,e,{parentApp:t,$q:n,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},xS={version:"2.7.7",install:CS,lang:bn,iconSet:al},AS=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n};const DS={};function RS(t,e){const n=PI("router-view");return Jh(),Zh(n)}var OS=AS(DS,[["render",RS]]);var MS=!1;/*!
  * pinia v2.0.22
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let xy;const Ql=t=>xy=t,Ay=Symbol();function Bc(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Xi;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Xi||(Xi={}));function PS(){const t=pv(!0),e=t.run(()=>ve({}));let n=[],r=[];const s=An({install(i){Ql(s),s._a=i,i.provide(Ay,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return!this._a&&!MS?r.push(i):n.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const Dy=()=>{};function pg(t,e,n,r=Dy){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&Ke()&&Hl(s),s}function Cs(t,...e){t.slice().forEach(n=>{n(...e)})}function Uc(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];Bc(s)&&Bc(r)&&t.hasOwnProperty(n)&&!$e(r)&&!$n(r)?t[n]=Uc(s,r):t[n]=r}return t}const NS=Symbol();function LS(t){return!Bc(t)||!t.hasOwnProperty(NS)}const{assign:Fn}=Object;function FS(t){return!!($e(t)&&t.effect)}function BS(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let l;function u(){a||(n.state.value[t]=s?s():{});const c=uI(n.state.value[t]);return Fn(c,i,Object.keys(o||{}).reduce((h,d)=>(h[d]=An(C(()=>{Ql(n);const f=n._s.get(t);return o[d].call(f,f)})),h),{}))}return l=Ry(t,u,e,n,r,!0),l.$reset=function(){const h=s?s():{};this.$patch(d=>{Fn(d,h)})},l}function Ry(t,e,n={},r,s,i){let o;const a=Fn({actions:{}},n),l={deep:!0};let u,c,h=An([]),d=An([]),f;const g=r.state.value[t];!i&&!g&&(r.state.value[t]={}),ve({});let E;function v(I){let T;u=c=!1,typeof I=="function"?(I(r.state.value[t]),T={type:Xi.patchFunction,storeId:t,events:f}):(Uc(r.state.value[t],I),T={type:Xi.patchObject,payload:I,storeId:t,events:f});const P=E=Symbol();wt().then(()=>{E===P&&(u=!0)}),c=!0,Cs(h,T,r.state.value[t])}const _=Dy;function p(){o.stop(),h=[],d=[],r._s.delete(t)}function b(I,T){return function(){Ql(r);const P=Array.from(arguments),R=[],F=[];function x(q){R.push(q)}function H(q){F.push(q)}Cs(d,{args:P,name:I,store:N,after:x,onError:H});let Y;try{Y=T.apply(this&&this.$id===t?this:N,P)}catch(q){throw Cs(F,q),q}return Y instanceof Promise?Y.then(q=>(Cs(R,q),q)).catch(q=>(Cs(F,q),Promise.reject(q))):(Cs(R,Y),Y)}}const D={_p:r,$id:t,$onAction:pg.bind(null,d),$patch:v,$reset:_,$subscribe(I,T={}){const P=pg(h,I,T.detached,()=>R()),R=o.run(()=>Oe(()=>r.state.value[t],F=>{(T.flush==="sync"?c:u)&&I({storeId:t,type:Xi.direct,events:f},F)},Fn({},l,T)));return P},$dispose:p},N=Er(Fn({},D));r._s.set(t,N);const w=r._e.run(()=>(o=pv(),o.run(()=>e())));for(const I in w){const T=w[I];if($e(T)&&!FS(T)||$n(T))i||(g&&LS(T)&&($e(T)?T.value=g[I]:Uc(T,g[I])),r.state.value[t][I]=T);else if(typeof T=="function"){const P=b(I,T);w[I]=P,a.actions[I]=T}}return Fn(N,w),Fn(we(N),w),Object.defineProperty(N,"$state",{get:()=>r.state.value[t],set:I=>{v(T=>{Fn(T,I)})}}),r._p.forEach(I=>{Fn(N,o.run(()=>I({store:N,app:r._a,pinia:r,options:a})))}),g&&i&&n.hydrate&&n.hydrate(N.$state,g),u=!0,c=!0,N}function US(t,e,n){let r,s;const i=typeof e=="function";typeof t=="string"?(r=t,s=i?n:e):(s=t,r=t.id);function o(a,l){const u=Ke();return a=a||u&&Jt(Ay),a&&Ql(a),a=xy,a._s.has(r)||(i?Ry(r,e,s,a):BS(r,s,a)),a._s.get(r)}return o.$id=r,o}function VS(t){{t=we(t);const e={};for(const n in t){const r=t[n];($e(r)||$n(r))&&(e[n]=Mv(t,n))}return e}}var $u=()=>PS();/*!
  * vue-router v4.1.5
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Fs=typeof window!="undefined";function qS(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const De=Object.assign;function ju(t,e){const n={};for(const r in e){const s=e[r];n[r]=hn(s)?s.map(t):t(s)}return n}const Ji=()=>{},hn=Array.isArray,$S=/\/$/,jS=t=>t.replace($S,"");function zu(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=GS(r!=null?r:e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:o}}function zS(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function vg(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function HS(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&ni(e.matched[r],n.matched[s])&&Oy(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ni(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Oy(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!KS(t[n],e[n]))return!1;return!0}function KS(t,e){return hn(t)?yg(t,e):hn(e)?yg(e,t):t===e}function yg(t,e){return hn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function GS(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let s=n.length-1,i,o;for(i=0;i<r.length;i++)if(o=r[i],o!==".")if(o==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}var yo;(function(t){t.pop="pop",t.push="push"})(yo||(yo={}));var Zi;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Zi||(Zi={}));function WS(t){if(!t)if(Fs){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),jS(t)}const YS=/^[^#]+#/;function QS(t,e){return t.replace(YS,"#")+e}function XS(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Xl=()=>({left:window.pageXOffset,top:window.pageYOffset});function JS(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=XS(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function wg(t,e){return(history.state?history.state.position-e:-1)+t}const Vc=new Map;function ZS(t,e){Vc.set(t,e)}function ek(t){const e=Vc.get(t);return Vc.delete(t),e}let tk=()=>location.protocol+"//"+location.host;function My(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),vg(l,"")}return vg(n,t)+r+s}function nk(t,e,n,r){let s=[],i=[],o=null;const a=({state:d})=>{const f=My(t,location),g=n.value,E=e.value;let v=0;if(d){if(n.value=f,e.value=d,o&&o===g){o=null;return}v=E?d.position-E.position:0}else r(f);s.forEach(_=>{_(n.value,g,{delta:v,type:yo.pop,direction:v?v>0?Zi.forward:Zi.back:Zi.unknown})})};function l(){o=n.value}function u(d){s.push(d);const f=()=>{const g=s.indexOf(d);g>-1&&s.splice(g,1)};return i.push(f),f}function c(){const{history:d}=window;!d.state||d.replaceState(De({},d.state,{scroll:Xl()}),"")}function h(){for(const d of i)d();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:h}}function bg(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Xl():null}}function rk(t){const{history:e,location:n}=window,r={value:My(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,c){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:tk()+t+l;try{e[c?"replaceState":"pushState"](u,"",d),s.value=u}catch(f){console.error(f),n[c?"replace":"assign"](d)}}function o(l,u){const c=De({},e.state,bg(s.value.back,l,s.value.forward,!0),u,{position:s.value.position});i(l,c,!0),r.value=l}function a(l,u){const c=De({},s.value,e.state,{forward:l,scroll:Xl()});i(c.current,c,!0);const h=De({},bg(r.value,l,null),{position:c.position+1},u);i(l,h,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function sk(t){t=WS(t);const e=rk(t),n=nk(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=De({location:"",base:t,go:r,createHref:QS.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function ik(t){return typeof t=="string"||t&&typeof t=="object"}function Py(t){return typeof t=="string"||typeof t=="symbol"}const Xn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Ny=Symbol("");var _g;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(_g||(_g={}));function ri(t,e){return De(new Error,{type:t,[Ny]:!0},e)}function Pn(t,e){return t instanceof Error&&Ny in t&&(e==null||!!(t.type&e))}const Eg="[^/]+?",ok={sensitive:!1,strict:!1,start:!0,end:!0},ak=/[.+*?^${}()[\]/\\]/g;function lk(t,e){const n=De({},ok,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const c=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let h=0;h<u.length;h++){const d=u[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(s+="/"),s+=d.value.replace(ak,"\\$&"),f+=40;else if(d.type===1){const{value:g,repeatable:E,optional:v,regexp:_}=d;i.push({name:g,repeatable:E,optional:v});const p=_||Eg;if(p!==Eg){f+=10;try{new RegExp(`(${p})`)}catch(D){throw new Error(`Invalid custom RegExp for param "${g}" (${p}): `+D.message)}}let b=E?`((?:${p})(?:/(?:${p}))*)`:`(${p})`;h||(b=v&&u.length<2?`(?:/${b})`:"/"+b),v&&(b+="?"),s+=b,f+=20,v&&(f+=-8),E&&(f+=-20),p===".*"&&(f+=-50)}c.push(f)}r.push(c)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(u){const c=u.match(o),h={};if(!c)return null;for(let d=1;d<c.length;d++){const f=c[d]||"",g=i[d-1];h[g.name]=f&&g.repeatable?f.split("/"):f}return h}function l(u){let c="",h=!1;for(const d of t){(!h||!c.endsWith("/"))&&(c+="/"),h=!1;for(const f of d)if(f.type===0)c+=f.value;else if(f.type===1){const{value:g,repeatable:E,optional:v}=f,_=g in u?u[g]:"";if(hn(_)&&!E)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const p=hn(_)?_.join("/"):_;if(!p)if(v)d.length<2&&(c.endsWith("/")?c=c.slice(0,-1):h=!0);else throw new Error(`Missing required param "${g}"`);c+=p}}return c||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function uk(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function ck(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=uk(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Ig(r))return 1;if(Ig(s))return-1}return s.length-r.length}function Ig(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const hk={type:0,value:""},dk=/[a-zA-Z0-9_]/;function fk(t){if(!t)return[[]];if(t==="/")return[[hk]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${u}": ${f}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,u="",c="";function h(){!u||(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function d(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(u&&h(),o()):l===":"?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:l==="("?n=2:dk.test(l)?d():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),h(),o(),s}function gk(t,e,n){const r=lk(fk(t.path),n),s=De(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function mk(t,e){const n=[],r=new Map;e=kg({strict:!1,end:!0,sensitive:!1},e);function s(c){return r.get(c)}function i(c,h,d){const f=!d,g=pk(c);g.aliasOf=d&&d.record;const E=kg(e,c),v=[g];if("alias"in c){const b=typeof c.alias=="string"?[c.alias]:c.alias;for(const D of b)v.push(De({},g,{components:d?d.record.components:g.components,path:D,aliasOf:d?d.record:g}))}let _,p;for(const b of v){const{path:D}=b;if(h&&D[0]!=="/"){const N=h.record.path,w=N[N.length-1]==="/"?"":"/";b.path=h.record.path+(D&&w+D)}if(_=gk(b,h,E),d?d.alias.push(_):(p=p||_,p!==_&&p.alias.push(_),f&&c.name&&!Sg(_)&&o(c.name)),g.children){const N=g.children;for(let w=0;w<N.length;w++)i(N[w],_,d&&d.children[w])}d=d||_,l(_)}return p?()=>{o(p)}:Ji}function o(c){if(Py(c)){const h=r.get(c);h&&(r.delete(c),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(c);h>-1&&(n.splice(h,1),c.record.name&&r.delete(c.record.name),c.children.forEach(o),c.alias.forEach(o))}}function a(){return n}function l(c){let h=0;for(;h<n.length&&ck(c,n[h])>=0&&(c.record.path!==n[h].record.path||!Ly(c,n[h]));)h++;n.splice(h,0,c),c.record.name&&!Sg(c)&&r.set(c.record.name,c)}function u(c,h){let d,f={},g,E;if("name"in c&&c.name){if(d=r.get(c.name),!d)throw ri(1,{location:c});E=d.record.name,f=De(Tg(h.params,d.keys.filter(p=>!p.optional).map(p=>p.name)),c.params&&Tg(c.params,d.keys.map(p=>p.name))),g=d.stringify(f)}else if("path"in c)g=c.path,d=n.find(p=>p.re.test(g)),d&&(f=d.parse(g),E=d.record.name);else{if(d=h.name?r.get(h.name):n.find(p=>p.re.test(h.path)),!d)throw ri(1,{location:c,currentLocation:h});E=d.record.name,f=De({},h.params,c.params),g=d.stringify(f)}const v=[];let _=d;for(;_;)v.unshift(_.record),_=_.parent;return{name:E,path:g,params:f,matched:v,meta:yk(v)}}return t.forEach(c=>i(c)),{addRoute:i,resolve:u,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function Tg(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function pk(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:vk(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function vk(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="boolean"?n:n[r];return e}function Sg(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function yk(t){return t.reduce((e,n)=>De(e,n.meta),{})}function kg(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function Ly(t,e){return e.children.some(n=>n===t||Ly(t,n))}const Fy=/#/g,wk=/&/g,bk=/\//g,_k=/=/g,Ek=/\?/g,By=/\+/g,Ik=/%5B/g,Tk=/%5D/g,Uy=/%5E/g,Sk=/%60/g,Vy=/%7B/g,kk=/%7C/g,qy=/%7D/g,Ck=/%20/g;function td(t){return encodeURI(""+t).replace(kk,"|").replace(Ik,"[").replace(Tk,"]")}function xk(t){return td(t).replace(Vy,"{").replace(qy,"}").replace(Uy,"^")}function qc(t){return td(t).replace(By,"%2B").replace(Ck,"+").replace(Fy,"%23").replace(wk,"%26").replace(Sk,"`").replace(Vy,"{").replace(qy,"}").replace(Uy,"^")}function Ak(t){return qc(t).replace(_k,"%3D")}function Dk(t){return td(t).replace(Fy,"%23").replace(Ek,"%3F")}function Rk(t){return t==null?"":Dk(t).replace(bk,"%2F")}function ul(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function Ok(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(By," "),o=i.indexOf("="),a=ul(o<0?i:i.slice(0,o)),l=o<0?null:ul(i.slice(o+1));if(a in e){let u=e[a];hn(u)||(u=e[a]=[u]),u.push(l)}else e[a]=l}return e}function Cg(t){let e="";for(let n in t){const r=t[n];if(n=Ak(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(hn(r)?r.map(i=>i&&qc(i)):[r&&qc(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function Mk(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=hn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const Pk=Symbol(""),xg=Symbol(""),Jl=Symbol(""),nd=Symbol(""),$c=Symbol("");function Ci(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function nr(t,e,n,r,s){const i=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const l=h=>{h===!1?a(ri(4,{from:n,to:e})):h instanceof Error?a(h):ik(h)?a(ri(2,{from:e,to:h})):(i&&r.enterCallbacks[s]===i&&typeof h=="function"&&i.push(h),o())},u=t.call(r&&r.instances[s],e,n,l);let c=Promise.resolve(u);t.length<3&&(c=c.then(l)),c.catch(h=>a(h))})}function Hu(t,e,n,r){const s=[];for(const i of t)for(const o in i.components){let a=i.components[o];if(!(e!=="beforeRouteEnter"&&!i.instances[o]))if(Nk(a)){const u=(a.__vccOpts||a)[e];u&&s.push(nr(u,n,r,i,o))}else{let l=a();s.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const c=qS(u)?u.default:u;i.components[o]=c;const d=(c.__vccOpts||c)[e];return d&&nr(d,n,r,i,o)()}))}}return s}function Nk(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Ag(t){const e=Jt(Jl),n=Jt(nd),r=C(()=>e.resolve(Hs(t.to))),s=C(()=>{const{matched:l}=r.value,{length:u}=l,c=l[u-1],h=n.matched;if(!c||!h.length)return-1;const d=h.findIndex(ni.bind(null,c));if(d>-1)return d;const f=Dg(l[u-2]);return u>1&&Dg(c)===f&&h[h.length-1].path!==f?h.findIndex(ni.bind(null,l[u-2])):d}),i=C(()=>s.value>-1&&Uk(n.params,r.value.params)),o=C(()=>s.value>-1&&s.value===n.matched.length-1&&Oy(n.params,r.value.params));function a(l={}){return Bk(l)?e[Hs(t.replace)?"replace":"push"](Hs(t.to)).catch(Ji):Promise.resolve()}return{route:r,href:C(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const Lk=Wh({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ag,setup(t,{slots:e}){const n=Er(Ag(t)),{options:r}=Jt(Jl),s=C(()=>({[Rg(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Rg(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:S("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),Fk=Lk;function Bk(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Uk(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!hn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Dg(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Rg=(t,e,n)=>t!=null?t:e!=null?e:n,Vk=Wh({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Jt($c),s=C(()=>t.route||r.value),i=Jt(xg,0),o=C(()=>{let u=Hs(i);const{matched:c}=s.value;let h;for(;(h=c[u])&&!h.components;)u++;return u}),a=C(()=>s.value.matched[o.value]);Gi(xg,C(()=>o.value+1)),Gi(Pk,a),Gi($c,s);const l=ve();return Oe(()=>[l.value,a.value,t.name],([u,c,h],[d,f,g])=>{c&&(c.instances[h]=u,f&&f!==c&&u&&u===d&&(c.leaveGuards.size||(c.leaveGuards=f.leaveGuards),c.updateGuards.size||(c.updateGuards=f.updateGuards))),u&&c&&(!f||!ni(c,f)||!d)&&(c.enterCallbacks[h]||[]).forEach(E=>E(u))},{flush:"post"}),()=>{const u=s.value,c=t.name,h=a.value,d=h&&h.components[c];if(!d)return Og(n.default,{Component:d,route:u});const f=h.props[c],g=f?f===!0?u.params:typeof f=="function"?f(u):f:null,v=S(d,De({},g,e,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(h.instances[c]=null)},ref:l}));return Og(n.default,{Component:v,route:u})||v}}});function Og(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const qk=Vk;function $k(t){const e=mk(t.routes,t),n=t.parseQuery||Ok,r=t.stringifyQuery||Cg,s=t.history,i=Ci(),o=Ci(),a=Ci(),l=oI(Xn);let u=Xn;Fs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=ju.bind(null,L=>""+L),h=ju.bind(null,Rk),d=ju.bind(null,ul);function f(L,re){let K,ie;return Py(L)?(K=e.getRecordMatcher(L),ie=re):ie=L,e.addRoute(ie,K)}function g(L){const re=e.getRecordMatcher(L);re&&e.removeRoute(re)}function E(){return e.getRoutes().map(L=>L.record)}function v(L){return!!e.getRecordMatcher(L)}function _(L,re){if(re=De({},re||l.value),typeof L=="string"){const ue=zu(n,L,re.path),m=e.resolve({path:ue.path},re),y=s.createHref(ue.fullPath);return De(ue,m,{params:d(m.params),hash:ul(ue.hash),redirectedFrom:void 0,href:y})}let K;if("path"in L)K=De({},L,{path:zu(n,L.path,re.path).path});else{const ue=De({},L.params);for(const m in ue)ue[m]==null&&delete ue[m];K=De({},L,{params:h(L.params)}),re.params=h(re.params)}const ie=e.resolve(K,re),M=L.hash||"";ie.params=c(d(ie.params));const ee=zS(r,De({},L,{hash:xk(M),path:ie.path})),ae=s.createHref(ee);return De({fullPath:ee,hash:M,query:r===Cg?Mk(L.query):L.query||{}},ie,{redirectedFrom:void 0,href:ae})}function p(L){return typeof L=="string"?zu(n,L,l.value.path):De({},L)}function b(L,re){if(u!==L)return ri(8,{from:re,to:L})}function D(L){return I(L)}function N(L){return D(De(p(L),{replace:!0}))}function w(L){const re=L.matched[L.matched.length-1];if(re&&re.redirect){const{redirect:K}=re;let ie=typeof K=="function"?K(L):K;return typeof ie=="string"&&(ie=ie.includes("?")||ie.includes("#")?ie=p(ie):{path:ie},ie.params={}),De({query:L.query,hash:L.hash,params:"path"in ie?{}:L.params},ie)}}function I(L,re){const K=u=_(L),ie=l.value,M=L.state,ee=L.force,ae=L.replace===!0,ue=w(K);if(ue)return I(De(p(ue),{state:typeof ue=="object"?De({},M,ue.state):M,force:ee,replace:ae}),re||K);const m=K;m.redirectedFrom=re;let y;return!ee&&HS(r,ie,K)&&(y=ri(16,{to:m,from:ie}),_e(ie,ie,!0,!1)),(y?Promise.resolve(y):P(m,ie)).catch(A=>Pn(A)?Pn(A,2)?A:j(A):O(A,m,ie)).then(A=>{if(A){if(Pn(A,2))return I(De({replace:ae},p(A.to),{state:typeof A.to=="object"?De({},M,A.to.state):M,force:ee}),re||m)}else A=F(m,ie,!0,ae,M);return R(m,ie,A),A})}function T(L,re){const K=b(L,re);return K?Promise.reject(K):Promise.resolve()}function P(L,re){let K;const[ie,M,ee]=jk(L,re);K=Hu(ie.reverse(),"beforeRouteLeave",L,re);for(const ue of ie)ue.leaveGuards.forEach(m=>{K.push(nr(m,L,re))});const ae=T.bind(null,L,re);return K.push(ae),xs(K).then(()=>{K=[];for(const ue of i.list())K.push(nr(ue,L,re));return K.push(ae),xs(K)}).then(()=>{K=Hu(M,"beforeRouteUpdate",L,re);for(const ue of M)ue.updateGuards.forEach(m=>{K.push(nr(m,L,re))});return K.push(ae),xs(K)}).then(()=>{K=[];for(const ue of L.matched)if(ue.beforeEnter&&!re.matched.includes(ue))if(hn(ue.beforeEnter))for(const m of ue.beforeEnter)K.push(nr(m,L,re));else K.push(nr(ue.beforeEnter,L,re));return K.push(ae),xs(K)}).then(()=>(L.matched.forEach(ue=>ue.enterCallbacks={}),K=Hu(ee,"beforeRouteEnter",L,re),K.push(ae),xs(K))).then(()=>{K=[];for(const ue of o.list())K.push(nr(ue,L,re));return K.push(ae),xs(K)}).catch(ue=>Pn(ue,8)?ue:Promise.reject(ue))}function R(L,re,K){for(const ie of a.list())ie(L,re,K)}function F(L,re,K,ie,M){const ee=b(L,re);if(ee)return ee;const ae=re===Xn,ue=Fs?history.state:{};K&&(ie||ae?s.replace(L.fullPath,De({scroll:ae&&ue&&ue.scroll},M)):s.push(L.fullPath,M)),l.value=L,_e(L,re,K,ae),j()}let x;function H(){x||(x=s.listen((L,re,K)=>{if(!pt.listening)return;const ie=_(L),M=w(ie);if(M){I(De(M,{replace:!0}),ie).catch(Ji);return}u=ie;const ee=l.value;Fs&&ZS(wg(ee.fullPath,K.delta),Xl()),P(ie,ee).catch(ae=>Pn(ae,12)?ae:Pn(ae,2)?(I(ae.to,ie).then(ue=>{Pn(ue,20)&&!K.delta&&K.type===yo.pop&&s.go(-1,!1)}).catch(Ji),Promise.reject()):(K.delta&&s.go(-K.delta,!1),O(ae,ie,ee))).then(ae=>{ae=ae||F(ie,ee,!1),ae&&(K.delta&&!Pn(ae,8)?s.go(-K.delta,!1):K.type===yo.pop&&Pn(ae,20)&&s.go(-1,!1)),R(ie,ee,ae)}).catch(Ji)}))}let Y=Ci(),q=Ci(),se;function O(L,re,K){j(L);const ie=q.list();return ie.length?ie.forEach(M=>M(L,re,K)):console.error(L),Promise.reject(L)}function X(){return se&&l.value!==Xn?Promise.resolve():new Promise((L,re)=>{Y.add([L,re])})}function j(L){return se||(se=!L,H(),Y.list().forEach(([re,K])=>L?K(L):re()),Y.reset()),L}function _e(L,re,K,ie){const{scrollBehavior:M}=t;if(!Fs||!M)return Promise.resolve();const ee=!K&&ek(wg(L.fullPath,0))||(ie||!K)&&history.state&&history.state.scroll||null;return wt().then(()=>M(L,re,ee)).then(ae=>ae&&JS(ae)).catch(ae=>O(ae,L,re))}const Fe=L=>s.go(L);let Be;const Se=new Set,pt={currentRoute:l,listening:!0,addRoute:f,removeRoute:g,hasRoute:v,getRoutes:E,resolve:_,options:t,push:D,replace:N,go:Fe,back:()=>Fe(-1),forward:()=>Fe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:q.add,isReady:X,install(L){const re=this;L.component("RouterLink",Fk),L.component("RouterView",qk),L.config.globalProperties.$router=re,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>Hs(l)}),Fs&&!Be&&l.value===Xn&&(Be=!0,D(s.location).catch(M=>{}));const K={};for(const M in Xn)K[M]=C(()=>l.value[M]);L.provide(Jl,re),L.provide(nd,Er(K)),L.provide($c,l);const ie=L.unmount;Se.add(L),L.unmount=function(){Se.delete(L),Se.size<1&&(u=Xn,x&&x(),x=null,l.value=Xn,Be=!1,se=!1),ie()}}};return pt}function xs(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function jk(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>ni(u,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>ni(u,l))||s.push(l))}return[n,r,s]}function rB(){return Jt(Jl)}function sB(){return Jt(nd)}const zk=function(){const e=document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}(),Mg={},Hk="/",nn=function(e,n){return!n||n.length===0?e():Promise.all(n.map(r=>{if(r=`${Hk}${r}`,r in Mg)return;Mg[r]=!0;const s=r.endsWith(".css"),i=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${i}`))return;const o=document.createElement("link");if(o.rel=s?"stylesheet":zk,s||(o.as="script",o.crossOrigin=""),o.href=r,document.head.appendChild(o),s)return new Promise((a,l)=>{o.addEventListener("load",a),o.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())},Kk=[{path:"/",component:()=>nn(()=>import("./MainLayoutFronted.d8f0f48d.js"),["assets/MainLayoutFronted.d8f0f48d.js","assets/MainLayoutFronted.14c06daf.css","assets/NavItemMenu.d46d85a8.js","assets/QBadge.03487040.js","assets/QItem.0aec7174.js","assets/QItemLabel.c9451d4c.js","assets/QList.1944fe6a.js","assets/QBtnDropdown.85d83107.js","assets/QMenu.11f4452f.js","assets/selection.9ec04c91.js","assets/ClosePopup.ae57d685.js"]),children:[{path:"",name:"Home",component:()=>nn(()=>import("./IndexPage.5f9ef689.js"),["assets/IndexPage.5f9ef689.js","assets/IndexPage.a014c318.css","assets/QPage.311a4ff8.js","assets/QItem.0aec7174.js","assets/QItemLabel.c9451d4c.js","assets/meta.hook.abcf86c9.js"])},{path:"sign-in",name:"SignIn",meta:{authRoute:!0},component:()=>nn(()=>import("./SignIn.161fcf9e.js"),["assets/SignIn.161fcf9e.js","assets/QForm.9d973855.js","assets/QPage.311a4ff8.js","assets/notify.hook.477b6e06.js"])},{path:"work-experience",name:"WorkExperience",component:()=>nn(()=>import("./WorkExperience.353666e4.js"),["assets/WorkExperience.353666e4.js","assets/WorkExperience.9414beb6.css","assets/QPage.311a4ff8.js","assets/use-fullscreen.368c58dd.js","assets/notify.hook.477b6e06.js","assets/QBadge.03487040.js","assets/QItem.0aec7174.js","assets/QTable.7fe34306.js","assets/QList.1944fe6a.js","assets/QItemLabel.c9451d4c.js","assets/QMenu.11f4452f.js","assets/selection.9ec04c91.js","assets/meta.hook.abcf86c9.js"])}]},{path:"/admin",component:()=>nn(()=>import("./MainLayoutBackend.6b1f5949.js"),["assets/MainLayoutBackend.6b1f5949.js","assets/NavItemMenu.d46d85a8.js","assets/QBadge.03487040.js","assets/QItem.0aec7174.js","assets/QItemLabel.c9451d4c.js","assets/QList.1944fe6a.js","assets/selection.9ec04c91.js","assets/ClosePopup.ae57d685.js"]),children:[{path:"",name:"HomeAdmin",meta:{protectedRoute:!0},component:()=>nn(()=>import("./IndexPage.5bd42cdc.js"),["assets/IndexPage.5bd42cdc.js","assets/QPage.311a4ff8.js"])},{path:"work-experience",name:"WorkExperienceAdmin",meta:{protectedRoute:!0},component:()=>nn(()=>import("./WorkExperience.df505bcc.js"),["assets/WorkExperience.df505bcc.js","assets/QPage.311a4ff8.js","assets/use-fullscreen.368c58dd.js","assets/notify.hook.477b6e06.js","assets/QTable.7fe34306.js","assets/QList.1944fe6a.js","assets/QItem.0aec7174.js","assets/QItemLabel.c9451d4c.js","assets/QMenu.11f4452f.js","assets/selection.9ec04c91.js","assets/ClosePopup.ae57d685.js"])},{path:"new-experience",name:"NewExperience",meta:{protectedRoute:!0},component:()=>nn(()=>import("./NewExperience.c57bc7e2.js"),["assets/NewExperience.c57bc7e2.js","assets/QBtnDropdown.85d83107.js","assets/QMenu.11f4452f.js","assets/selection.9ec04c91.js","assets/QForm.9d973855.js","assets/QPage.311a4ff8.js","assets/use-fullscreen.368c58dd.js","assets/notify.hook.477b6e06.js","assets/FormExperience.eaed12d9.js","assets/QItem.0aec7174.js"])},{path:"edit-experience/:idDoc",name:"EditExperience",meta:{protectedRoute:!0},component:()=>nn(()=>import("./EditExperience.d3d5559b.js"),["assets/EditExperience.d3d5559b.js","assets/QBtnDropdown.85d83107.js","assets/QMenu.11f4452f.js","assets/selection.9ec04c91.js","assets/QForm.9d973855.js","assets/QPage.311a4ff8.js","assets/use-fullscreen.368c58dd.js","assets/notify.hook.477b6e06.js","assets/FormExperience.eaed12d9.js","assets/QItem.0aec7174.js"])},{path:"user-profile",name:"UserProfile",meta:{protectedRoute:!0},component:()=>nn(()=>import("./UserProfile.93a73fe4.js"),["assets/UserProfile.93a73fe4.js","assets/QItem.0aec7174.js","assets/QList.1944fe6a.js","assets/QPage.311a4ff8.js","assets/QForm.9d973855.js","assets/notify.hook.477b6e06.js"])}]},{path:"/:catchAll(.*)*",component:()=>nn(()=>import("./ErrorNotFound.1e32e154.js"),[])}],Pg=["B","KB","MB","GB","TB","PB"];function Ng(t){let e=0;for(;parseInt(t,10)>=1024&&e<Pg.length-1;)t/=1024,++e;return`${t.toFixed(1)}${Pg[e]}`}function Gk(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Wk(t,e,n){return n<=e?e:Math.min(n,Math.max(e,t))}function iB(t,e,n){if(n<=e)return e;const r=n-e+1;let s=e+(t-e)%r;return s<e&&(s=r+s),s===0?0:s}function Xe(t,e=2,n="0"){if(t==null)return t;const r=""+t;return r.length>=e?r:new Array(e-r.length+1).join(n)+r}const ga=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Yk(t){return Xk(t)===0}function Qk(t,e){return e<=6?31:e<=11||Yk(t)?30:29}function Xk(t){const e=ga.length;let n=ga[0],r,s,i,o,a;if(t<n||t>=ga[e-1])throw new Error("Invalid Jalaali year "+t);for(a=1;a<e&&(r=ga[a],s=r-n,!(t<r));a+=1)n=r;return o=t-n,s-o<6&&(o=o-s+Jk(s+4,33)*33),i=Lg(Lg(o+1,33)-1,4),i===-1&&(i=4),i}function Jk(t,e){return~~(t/e)}function Lg(t,e){return t-~~(t/e)*e}const $y=864e5,Zk=36e5,jc=6e4,jy="YYYY-MM-DDTHH:mm:ss.SSSZ",eC=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,tC=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,Ku={};function nC(t,e){const n="("+e.days.join("|")+")",r=t+n;if(Ku[r]!==void 0)return Ku[r];const s="("+e.daysShort.join("|")+")",i="("+e.months.join("|")+")",o="("+e.monthsShort.join("|")+")",a={};let l=0;const u=t.replace(tC,h=>{switch(l++,h){case"YY":return a.YY=l,"(-?\\d{1,2})";case"YYYY":return a.YYYY=l,"(-?\\d{1,4})";case"M":return a.M=l,"(\\d{1,2})";case"MM":return a.M=l,"(\\d{2})";case"MMM":return a.MMM=l,o;case"MMMM":return a.MMMM=l,i;case"D":return a.D=l,"(\\d{1,2})";case"Do":return a.D=l++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return a.D=l,"(\\d{2})";case"H":return a.H=l,"(\\d{1,2})";case"HH":return a.H=l,"(\\d{2})";case"h":return a.h=l,"(\\d{1,2})";case"hh":return a.h=l,"(\\d{2})";case"m":return a.m=l,"(\\d{1,2})";case"mm":return a.m=l,"(\\d{2})";case"s":return a.s=l,"(\\d{1,2})";case"ss":return a.s=l,"(\\d{2})";case"S":return a.S=l,"(\\d{1})";case"SS":return a.S=l,"(\\d{2})";case"SSS":return a.S=l,"(\\d{3})";case"A":return a.A=l,"(AM|PM)";case"a":return a.a=l,"(am|pm)";case"aa":return a.aa=l,"(a\\.m\\.|p\\.m\\.)";case"ddd":return s;case"dddd":return n;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return a.Z=l,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return a.ZZ=l,"(Z|[+-]\\d{2}\\d{2})";case"X":return a.X=l,"(-?\\d+)";case"x":return a.x=l,"(-?\\d{4,})";default:return l--,h[0]==="["&&(h=h.substring(1,h.length-1)),h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),c={map:a,regex:new RegExp("^"+u)};return Ku[r]=c,c}function zy(t,e){return t!==void 0?t:e!==void 0?e.date:Fc.date}function Fg(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.floor(r/60),i=r%60;return n+Xe(s)+e+Xe(i)}function rC(t,e,n){let r=t.getFullYear(),s=t.getMonth();const i=t.getDate();return e.year!==void 0&&(r+=n*e.year,delete e.year),e.month!==void 0&&(s+=n*e.month,delete e.month),t.setDate(1),t.setMonth(2),t.setFullYear(r),t.setMonth(s),t.setDate(Math.min(i,sd(t))),e.date!==void 0&&(t.setDate(t.getDate()+n*e.date),delete e.date),t}function sC(t,e,n){const r=e.year!==void 0?e.year:t[`get${n}FullYear`](),s=e.month!==void 0?e.month-1:t[`get${n}Month`](),i=new Date(r,s+1,0).getDate(),o=Math.min(i,e.date!==void 0?e.date:t[`get${n}Date`]());return t[`set${n}Date`](1),t[`set${n}Month`](2),t[`set${n}FullYear`](r),t[`set${n}Month`](s),t[`set${n}Date`](o),delete e.year,delete e.month,delete e.date,t}function rd(t,e,n){const r=Hy(e),s=new Date(t),i=r.year!==void 0||r.month!==void 0||r.date!==void 0?rC(s,r,n):s;for(const o in r){const a=Gk(o);i[`set${a}`](i[`get${a}`]()+n*r[o])}return i}function Hy(t){const e={...t};return t.years!==void 0&&(e.year=t.years,delete e.years),t.months!==void 0&&(e.month=t.months,delete e.months),t.days!==void 0&&(e.date=t.days,delete e.days),t.day!==void 0&&(e.date=t.day,delete e.day),t.hour!==void 0&&(e.hours=t.hour,delete e.hour),t.minute!==void 0&&(e.minutes=t.minute,delete e.minute),t.second!==void 0&&(e.seconds=t.second,delete e.second),t.millisecond!==void 0&&(e.milliseconds=t.millisecond,delete e.millisecond),e}function Ky(t,e,n){const r=Hy(e),s=n===!0?"UTC":"",i=new Date(t),o=r.year!==void 0||r.month!==void 0||r.date!==void 0?sC(i,r,s):i;for(const a in r){const l=a.charAt(0).toUpperCase()+a.slice(1);o[`set${s}${l}`](r[a])}return o}function iC(t,e,n){const r=oC(t,e,n),s=new Date(r.year,r.month===null?null:r.month-1,r.day===null?1:r.day,r.hour,r.minute,r.second,r.millisecond),i=s.getTimezoneOffset();return r.timezoneOffset===null||r.timezoneOffset===i?s:rd(s,{minutes:r.timezoneOffset-i},1)}function oC(t,e,n,r,s){const i={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(s!==void 0&&Object.assign(i,s),t==null||t===""||typeof t!="string")return i;e===void 0&&(e=jy);const o=zy(n,bn.props),a=o.months,l=o.monthsShort,{regex:u,map:c}=nC(e,o),h=t.match(u);if(h===null)return i;let d="";if(c.X!==void 0||c.x!==void 0){const f=parseInt(h[c.X!==void 0?c.X:c.x],10);if(isNaN(f)===!0||f<0)return i;const g=new Date(f*(c.X!==void 0?1e3:1));i.year=g.getFullYear(),i.month=g.getMonth()+1,i.day=g.getDate(),i.hour=g.getHours(),i.minute=g.getMinutes(),i.second=g.getSeconds(),i.millisecond=g.getMilliseconds()}else{if(c.YYYY!==void 0)i.year=parseInt(h[c.YYYY],10);else if(c.YY!==void 0){const f=parseInt(h[c.YY],10);i.year=f<0?f:2e3+f}if(c.M!==void 0){if(i.month=parseInt(h[c.M],10),i.month<1||i.month>12)return i}else c.MMM!==void 0?i.month=l.indexOf(h[c.MMM])+1:c.MMMM!==void 0&&(i.month=a.indexOf(h[c.MMMM])+1);if(c.D!==void 0){if(i.day=parseInt(h[c.D],10),i.year===null||i.month===null||i.day<1)return i;const f=r!=="persian"?new Date(i.year,i.month,0).getDate():Qk(i.year,i.month);if(i.day>f)return i}c.H!==void 0?i.hour=parseInt(h[c.H],10)%24:c.h!==void 0&&(i.hour=parseInt(h[c.h],10)%12,(c.A&&h[c.A]==="PM"||c.a&&h[c.a]==="pm"||c.aa&&h[c.aa]==="p.m.")&&(i.hour+=12),i.hour=i.hour%24),c.m!==void 0&&(i.minute=parseInt(h[c.m],10)%60),c.s!==void 0&&(i.second=parseInt(h[c.s],10)%60),c.S!==void 0&&(i.millisecond=parseInt(h[c.S],10)*10**(3-h[c.S].length)),(c.Z!==void 0||c.ZZ!==void 0)&&(d=c.Z!==void 0?h[c.Z].replace(":",""):h[c.ZZ],i.timezoneOffset=(d[0]==="+"?-1:1)*(60*d.slice(1,3)+1*d.slice(3,5)))}return i.dateHash=Xe(i.year,6)+"/"+Xe(i.month)+"/"+Xe(i.day),i.timeHash=Xe(i.hour)+":"+Xe(i.minute)+":"+Xe(i.second)+d,i}function aC(t){return typeof t=="number"?!0:isNaN(Date.parse(t))===!1}function lC(t,e){return Ky(new Date,t,e)}function uC(t){const e=new Date(t).getDay();return e===0?7:e}function zc(t){const e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);const n=new Date(e.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);const r=e.getTimezoneOffset()-n.getTimezoneOffset();e.setHours(e.getHours()-r);const s=(e-n)/($y*7);return 1+Math.floor(s)}function cC(t){return t.getFullYear()*1e4+t.getMonth()*100+t.getDate()}function Gu(t,e){const n=new Date(t);return e===!0?cC(n):n.getTime()}function hC(t,e,n,r={}){const s=Gu(e,r.onlyDate),i=Gu(n,r.onlyDate),o=Gu(t,r.onlyDate);return(o>s||r.inclusiveFrom===!0&&o===s)&&(o<i||r.inclusiveTo===!0&&o===i)}function dC(t,e){return rd(t,e,1)}function fC(t,e){return rd(t,e,-1)}function yn(t,e,n){const r=new Date(t),s=`set${n===!0?"UTC":""}`;switch(e){case"year":case"years":r[`${s}Month`](0);case"month":case"months":r[`${s}Date`](1);case"day":case"days":case"date":r[`${s}Hours`](0);case"hour":case"hours":r[`${s}Minutes`](0);case"minute":case"minutes":r[`${s}Seconds`](0);case"second":case"seconds":r[`${s}Milliseconds`](0)}return r}function gC(t,e,n){const r=new Date(t),s=`set${n===!0?"UTC":""}`;switch(e){case"year":case"years":r[`${s}Month`](11);case"month":case"months":r[`${s}Date`](sd(r));case"day":case"days":case"date":r[`${s}Hours`](23);case"hour":case"hours":r[`${s}Minutes`](59);case"minute":case"minutes":r[`${s}Seconds`](59);case"second":case"seconds":r[`${s}Milliseconds`](999)}return r}function mC(t){let e=new Date(t);return Array.prototype.slice.call(arguments,1).forEach(n=>{e=Math.max(e,new Date(n))}),e}function pC(t){let e=new Date(t);return Array.prototype.slice.call(arguments,1).forEach(n=>{e=Math.min(e,new Date(n))}),e}function ma(t,e,n){return(t.getTime()-t.getTimezoneOffset()*jc-(e.getTime()-e.getTimezoneOffset()*jc))/n}function Gy(t,e,n="days"){const r=new Date(t),s=new Date(e);switch(n){case"years":case"year":return r.getFullYear()-s.getFullYear();case"months":case"month":return(r.getFullYear()-s.getFullYear())*12+r.getMonth()-s.getMonth();case"days":case"day":case"date":return ma(yn(r,"day"),yn(s,"day"),$y);case"hours":case"hour":return ma(yn(r,"hour"),yn(s,"hour"),Zk);case"minutes":case"minute":return ma(yn(r,"minute"),yn(s,"minute"),jc);case"seconds":case"second":return ma(yn(r,"second"),yn(s,"second"),1e3)}}function Hc(t){return Gy(t,yn(t,"year"),"days")+1}function vC(t){return ky(t)===!0?"date":typeof t=="number"?"number":"string"}function yC(t,e,n){const r=new Date(t);if(e){const s=new Date(e);if(r<s)return s}if(n){const s=new Date(n);if(r>s)return s}return r}function wC(t,e,n){const r=new Date(t),s=new Date(e);if(n===void 0)return r.getTime()===s.getTime();switch(n){case"second":case"seconds":if(r.getSeconds()!==s.getSeconds())return!1;case"minute":case"minutes":if(r.getMinutes()!==s.getMinutes())return!1;case"hour":case"hours":if(r.getHours()!==s.getHours())return!1;case"day":case"days":case"date":if(r.getDate()!==s.getDate())return!1;case"month":case"months":if(r.getMonth()!==s.getMonth())return!1;case"year":case"years":if(r.getFullYear()!==s.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${n}`)}return!0}function sd(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function Bg(t){if(t>=11&&t<=13)return`${t}th`;switch(t%10){case 1:return`${t}st`;case 2:return`${t}nd`;case 3:return`${t}rd`}return`${t}th`}const Ug={YY(t,e,n){const r=this.YYYY(t,e,n)%100;return r>=0?Xe(r):"-"+Xe(Math.abs(r))},YYYY(t,e,n){return n!=null?n:t.getFullYear()},M(t){return t.getMonth()+1},MM(t){return Xe(t.getMonth()+1)},MMM(t,e){return e.monthsShort[t.getMonth()]},MMMM(t,e){return e.months[t.getMonth()]},Q(t){return Math.ceil((t.getMonth()+1)/3)},Qo(t){return Bg(this.Q(t))},D(t){return t.getDate()},Do(t){return Bg(t.getDate())},DD(t){return Xe(t.getDate())},DDD(t){return Hc(t)},DDDD(t){return Xe(Hc(t),3)},d(t){return t.getDay()},dd(t,e){return this.dddd(t,e).slice(0,2)},ddd(t,e){return e.daysShort[t.getDay()]},dddd(t,e){return e.days[t.getDay()]},E(t){return t.getDay()||7},w(t){return zc(t)},ww(t){return Xe(zc(t))},H(t){return t.getHours()},HH(t){return Xe(t.getHours())},h(t){const e=t.getHours();return e===0?12:e>12?e%12:e},hh(t){return Xe(this.h(t))},m(t){return t.getMinutes()},mm(t){return Xe(t.getMinutes())},s(t){return t.getSeconds()},ss(t){return Xe(t.getSeconds())},S(t){return Math.floor(t.getMilliseconds()/100)},SS(t){return Xe(Math.floor(t.getMilliseconds()/10))},SSS(t){return Xe(t.getMilliseconds(),3)},A(t){return this.H(t)<12?"AM":"PM"},a(t){return this.H(t)<12?"am":"pm"},aa(t){return this.H(t)<12?"a.m.":"p.m."},Z(t,e,n,r){const s=r==null?t.getTimezoneOffset():r;return Fg(s,":")},ZZ(t,e,n,r){const s=r==null?t.getTimezoneOffset():r;return Fg(s)},X(t){return Math.floor(t.getTime()/1e3)},x(t){return t.getTime()}};function bC(t,e,n,r,s){if(t!==0&&!t||t===1/0||t===-1/0)return;const i=new Date(t);if(isNaN(i))return;e===void 0&&(e=jy);const o=zy(n,bn.props);return e.replace(eC,(a,l)=>a in Ug?Ug[a](i,o,r,s):l===void 0?a:l.split("\\]").join("]"))}function _C(t){return ky(t)===!0?new Date(t.getTime()):t}var EC={isValid:aC,extractDate:iC,buildDate:lC,getDayOfWeek:uC,getWeekOfYear:zc,isBetweenDates:hC,addToDate:dC,subtractFromDate:fC,adjustDate:Ky,startOfDate:yn,endOfDate:gC,getMaxDate:mC,getMinDate:pC,getDateDiff:Gy,getDayOfYear:Hc,inferDateFormat:vC,getDateBetween:yC,isSameDate:wC,daysInMonth:sd,formatDate:bC,clone:_C};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},IC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Yy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,c=i>>2,h=(i&3)<<4|a>>4;let d=(a&15)<<2|u>>6,f=u&63;l||(f=64,o||(d=64)),r.push(n[c],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Wy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):IC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||h==null)throw Error();const d=i<<2|a>>4;if(r.push(d),u!==64){const f=a<<4&240|u>>2;if(r.push(f),h!==64){const g=u<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},TC=function(t){const e=Wy(t);return Yy.encodeByteArray(e,!0)},Qy=function(t){return TC(t).replace(/\./g,"")},SC=function(t){try{return Yy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xy(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function CC(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Jy(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Zy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xC(){return We().indexOf("Electron/")>=0}function ew(){const t=We();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function AC(){return We().indexOf("MSAppHost/")>=0}function DC(){return!CC()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tw(){return typeof indexedDB=="object"}function RC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="FirebaseError";class Mn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=OC,Object.setPrototypeOf(this,Mn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vo.prototype.create)}}class Vo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?MC(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Mn(s,a,r)}}function MC(t,e){return t.replace(PC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const PC=/\{\$([^}]+)}/g;function NC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Vg(i)&&Vg(o)){if(!cl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Vg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function qi(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function LC(t,e){const n=new FC(t,e);return n.subscribe.bind(n)}class FC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Wu),s.error===void 0&&(s.error=Wu),s.complete===void 0&&(s.complete=Wu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t){return t&&t._delegate?t._delegate:t}class yr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new kC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qC(e))try{this.getOrInitializeService({instanceIdentifier:Nr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Nr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Nr){return this.instances.has(e)}getOptions(e=Nr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:VC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Nr){return this.component?this.component.multipleInstances?e:Nr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VC(t){return t===Nr?void 0:t}function qC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new UC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const jC={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},zC=Ae.INFO,HC={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},KC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=HC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class id{constructor(e){this.name=e,this._logLevel=zC,this._logHandler=KC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const GC=(t,e)=>e.some(n=>t instanceof n);let qg,$g;function WC(){return qg||(qg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YC(){return $g||($g=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nw=new WeakMap,Kc=new WeakMap,rw=new WeakMap,Yu=new WeakMap,od=new WeakMap;function QC(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(fr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&nw.set(n,t)}).catch(()=>{}),od.set(e,t),e}function XC(t){if(Kc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Kc.set(t,e)}let Gc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Kc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function JC(t){Gc=t(Gc)}function ZC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Qu(this),e,...n);return rw.set(r,e.sort?e.sort():[e]),fr(r)}:YC().includes(t)?function(...e){return t.apply(Qu(this),e),fr(nw.get(this))}:function(...e){return fr(t.apply(Qu(this),e))}}function ex(t){return typeof t=="function"?ZC(t):(t instanceof IDBTransaction&&XC(t),GC(t,WC())?new Proxy(t,Gc):t)}function fr(t){if(t instanceof IDBRequest)return QC(t);if(Yu.has(t))return Yu.get(t);const e=ex(t);return e!==t&&(Yu.set(t,e),od.set(e,t)),e}const Qu=t=>od.get(t);function tx(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=fr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(fr(o.result),l.oldVersion,l.newVersion,fr(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",()=>s())}).catch(()=>{}),a}const nx=["get","getKey","getAll","getAllKeys","count"],rx=["put","add","delete","clear"],Xu=new Map;function jg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xu.get(e))return Xu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=rx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||nx.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return Xu.set(e,i),i}JC(t=>({...t,get:(e,n,r)=>jg(e,n)||t.get(e,n,r),has:(e,n)=>!!jg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ix(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ix(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wc="@firebase/app",zg="0.7.32";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new id("@firebase/app"),ox="@firebase/app-compat",ax="@firebase/analytics-compat",lx="@firebase/analytics",ux="@firebase/app-check-compat",cx="@firebase/app-check",hx="@firebase/auth",dx="@firebase/auth-compat",fx="@firebase/database",gx="@firebase/database-compat",mx="@firebase/functions",px="@firebase/functions-compat",vx="@firebase/installations",yx="@firebase/installations-compat",wx="@firebase/messaging",bx="@firebase/messaging-compat",_x="@firebase/performance",Ex="@firebase/performance-compat",Ix="@firebase/remote-config",Tx="@firebase/remote-config-compat",Sx="@firebase/storage",kx="@firebase/storage-compat",Cx="@firebase/firestore",xx="@firebase/firestore-compat",Ax="firebase",Dx="9.9.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="[DEFAULT]",Rx={[Wc]:"fire-core",[ox]:"fire-core-compat",[lx]:"fire-analytics",[ax]:"fire-analytics-compat",[cx]:"fire-app-check",[ux]:"fire-app-check-compat",[hx]:"fire-auth",[dx]:"fire-auth-compat",[fx]:"fire-rtdb",[gx]:"fire-rtdb-compat",[mx]:"fire-fn",[px]:"fire-fn-compat",[vx]:"fire-iid",[yx]:"fire-iid-compat",[wx]:"fire-fcm",[bx]:"fire-fcm-compat",[_x]:"fire-perf",[Ex]:"fire-perf-compat",[Ix]:"fire-rc",[Tx]:"fire-rc-compat",[Sx]:"fire-gcs",[kx]:"fire-gcs-compat",[Cx]:"fire-fst",[xx]:"fire-fst-compat","fire-js":"fire-js",[Ax]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=new Map,Yc=new Map;function Ox(t,e){try{t.container.addComponent(e)}catch(n){ns.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function rs(t){const e=t.name;if(Yc.has(e))return ns.debug(`There were multiple attempts to register component ${e}.`),!1;Yc.set(e,t);for(const n of hl.values())Ox(n,t);return!0}function Zl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ss=new Vo("app","Firebase",Mx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=Dx;function Nx(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:sw,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw ss.create("bad-app-name",{appName:String(r)});const s=hl.get(r);if(s){if(cl(t,s.options)&&cl(n,s.config))return s;throw ss.create("duplicate-app",{appName:r})}const i=new $C(r);for(const a of Yc.values())i.addComponent(a);const o=new Px(t,n,i);return hl.set(r,o),o}function ad(t=sw){const e=hl.get(t);if(!e)throw ss.create("no-app",{appName:t});return e}function Sn(t,e,n){var r;let s=(r=Rx[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ns.warn(a.join(" "));return}rs(new yr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx="firebase-heartbeat-database",Fx=1,wo="firebase-heartbeat-store";let Ju=null;function iw(){return Ju||(Ju=tx(Lx,Fx,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(wo)}}}).catch(t=>{throw ss.create("idb-open",{originalErrorMessage:t.message})})),Ju}async function Bx(t){var e;try{return(await iw()).transaction(wo).objectStore(wo).get(ow(t))}catch(n){if(n instanceof Mn)ns.warn(n.message);else{const r=ss.create("idb-get",{originalErrorMessage:(e=n)===null||e===void 0?void 0:e.message});ns.warn(r.message)}}}async function Hg(t,e){var n;try{const s=(await iw()).transaction(wo,"readwrite");return await s.objectStore(wo).put(e,ow(t)),s.done}catch(r){if(r instanceof Mn)ns.warn(r.message);else{const s=ss.create("idb-set",{originalErrorMessage:(n=r)===null||n===void 0?void 0:n.message});ns.warn(s.message)}}}function ow(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=1024,Vx=30*24*60*60*1e3;class qx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jx(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Kg();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=Vx}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Kg(),{heartbeatsToSend:n,unsentEntries:r}=$x(this._heartbeatsCache.heartbeats),s=Qy(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Kg(){return new Date().toISOString().substring(0,10)}function $x(t,e=Ux){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Gg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Gg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class jx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tw()?RC().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Bx(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Hg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Hg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Gg(t){return Qy(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(t){rs(new yr("platform-logger",e=>new sx(e),"PRIVATE")),rs(new yr("heartbeat",e=>new qx(e),"PRIVATE")),Sn(Wc,zg,t),Sn(Wc,zg,"esm2017"),Sn("fire-js","")}zx("");var Hx="firebase",Kx="9.9.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn(Hx,Kx,"app");var Gx=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},te,ld=ld||{},me=Gx||self;function dl(){}function Qc(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function $o(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Wx(t){return Object.prototype.hasOwnProperty.call(t,Zu)&&t[Zu]||(t[Zu]=++Yx)}var Zu="closure_uid_"+(1e9*Math.random()>>>0),Yx=0;function Qx(t,e,n){return t.call.apply(t.bind,arguments)}function Xx(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function ft(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ft=Qx:ft=Xx,ft.apply(null,arguments)}function pa(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function mt(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Ir(){this.s=this.s,this.o=this.o}var Jx=0;Ir.prototype.s=!1;Ir.prototype.na=function(){!this.s&&(this.s=!0,this.M(),Jx!=0)&&Wx(this)};Ir.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const aw=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},lw=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,s=typeof t=="string"?t.split(""):t;for(let i=0;i<r;i++)i in s&&e.call(n,s[i],i,t)};function Zx(t){e:{var e=z1;const n=t.length,r=typeof t=="string"?t.split(""):t;for(let s=0;s<n;s++)if(s in r&&e.call(void 0,r[s],s,t)){e=s;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function Wg(t){return Array.prototype.concat.apply([],arguments)}function ud(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function fl(t){return/^[\s\xa0]*$/.test(t)}var Yg=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function xt(t,e){return t.indexOf(e)!=-1}function ec(t,e){return t<e?-1:t>e?1:0}var At;e:{var Qg=me.navigator;if(Qg){var Xg=Qg.userAgent;if(Xg){At=Xg;break e}}At=""}function cd(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function uw(t){const e={};for(const n in t)e[n]=t[n];return e}var Jg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cw(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<Jg.length;i++)n=Jg[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function hd(t){return hd[" "](t),t}hd[" "]=dl;function e1(t){var e=r1;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var t1=xt(At,"Opera"),si=xt(At,"Trident")||xt(At,"MSIE"),hw=xt(At,"Edge"),Xc=hw||si,dw=xt(At,"Gecko")&&!(xt(At.toLowerCase(),"webkit")&&!xt(At,"Edge"))&&!(xt(At,"Trident")||xt(At,"MSIE"))&&!xt(At,"Edge"),n1=xt(At.toLowerCase(),"webkit")&&!xt(At,"Edge");function fw(){var t=me.document;return t?t.documentMode:void 0}var gl;e:{var tc="",nc=function(){var t=At;if(dw)return/rv:([^\);]+)(\)|;)/.exec(t);if(hw)return/Edge\/([\d\.]+)/.exec(t);if(si)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(n1)return/WebKit\/(\S+)/.exec(t);if(t1)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(nc&&(tc=nc?nc[1]:""),si){var rc=fw();if(rc!=null&&rc>parseFloat(tc)){gl=String(rc);break e}}gl=tc}var r1={};function s1(){return e1(function(){let t=0;const e=Yg(String(gl)).split("."),n=Yg("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var s=e[o]||"",i=n[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s[0].length==0&&i[0].length==0)break;t=ec(s[1].length==0?0:parseInt(s[1],10),i[1].length==0?0:parseInt(i[1],10))||ec(s[2].length==0,i[2].length==0)||ec(s[2],i[2]),s=s[3],i=i[3]}while(t==0)}return 0<=t})}var Jc;if(me.document&&si){var Zg=fw();Jc=Zg||parseInt(gl,10)||void 0}else Jc=void 0;var i1=Jc,o1=function(){if(!me.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{me.addEventListener("test",dl,e),me.removeEventListener("test",dl,e)}catch{}return t}();function Tt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Tt.prototype.h=function(){this.defaultPrevented=!0};function bo(t,e){if(Tt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(dw){e:{try{hd(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:a1[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&bo.Z.h.call(this)}}mt(bo,Tt);var a1={2:"touch",3:"pen",4:"mouse"};bo.prototype.h=function(){bo.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var jo="closure_listenable_"+(1e6*Math.random()|0),l1=0;function u1(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=s,this.key=++l1,this.ca=this.fa=!1}function eu(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function tu(t){this.src=t,this.g={},this.h=0}tu.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=eh(t,e,r,s);return-1<o?(e=t[o],n||(e.fa=!1)):(e=new u1(e,this.src,i,!!r,s),e.fa=n,t.push(e)),e};function Zc(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=aw(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(eu(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function eh(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.ca&&i.listener==e&&i.capture==!!n&&i.ia==r)return s}return-1}var dd="closure_lm_"+(1e6*Math.random()|0),sc={};function gw(t,e,n,r,s){if(r&&r.once)return pw(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)gw(t,e[i],n,r,s);return null}return n=md(n),t&&t[jo]?t.N(e,n,$o(r)?!!r.capture:!!r,s):mw(t,e,n,!1,r,s)}function mw(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=$o(s)?!!s.capture:!!s,a=gd(t);if(a||(t[dd]=a=new tu(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=c1(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)o1||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(yw(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function c1(){function t(n){return e.call(t.src,t.listener,n)}var e=h1;return t}function pw(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)pw(t,e[i],n,r,s);return null}return n=md(n),t&&t[jo]?t.O(e,n,$o(r)?!!r.capture:!!r,s):mw(t,e,n,!0,r,s)}function vw(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)vw(t,e[i],n,r,s);else r=$o(r)?!!r.capture:!!r,n=md(n),t&&t[jo]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=eh(i,n,r,s),-1<n&&(eu(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=gd(t))&&(e=t.g[e.toString()],t=-1,e&&(t=eh(e,n,r,s)),(n=-1<t?e[t]:null)&&fd(n))}function fd(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[jo])Zc(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(yw(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=gd(e))?(Zc(n,t),n.h==0&&(n.src=null,e[dd]=null)):eu(t)}}}function yw(t){return t in sc?sc[t]:sc[t]="on"+t}function h1(t,e){if(t.ca)t=!0;else{e=new bo(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&fd(t),t=n.call(r,e)}return t}function gd(t){return t=t[dd],t instanceof tu?t:null}var ic="__closure_events_fn_"+(1e9*Math.random()>>>0);function md(t){return typeof t=="function"?t:(t[ic]||(t[ic]=function(e){return t.handleEvent(e)}),t[ic])}function at(){Ir.call(this),this.i=new tu(this),this.P=this,this.I=null}mt(at,Ir);at.prototype[jo]=!0;at.prototype.removeEventListener=function(t,e,n,r){vw(this,t,e,n,r)};function gt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new Tt(e,t);else if(e instanceof Tt)e.target=e.target||t;else{var s=e;e=new Tt(r,t),cw(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=va(o,r,!0,e)&&s}if(o=e.g=t,s=va(o,r,!0,e)&&s,s=va(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=va(o,r,!1,e)&&s}at.prototype.M=function(){if(at.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)eu(n[r]);delete t.g[e],t.h--}}this.I=null};at.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};at.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function va(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.ca&&o.capture==n){var a=o.listener,l=o.ia||o.src;o.fa&&Zc(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var pd=me.JSON.stringify;function d1(){var t=bw;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class f1{constructor(){this.h=this.g=null}add(e,n){const r=ww.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var ww=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new g1,t=>t.reset());class g1{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function m1(t){me.setTimeout(()=>{throw t},0)}function vd(t,e){th||p1(),nh||(th(),nh=!0),bw.add(t,e)}var th;function p1(){var t=me.Promise.resolve(void 0);th=function(){t.then(v1)}}var nh=!1,bw=new f1;function v1(){for(var t;t=d1();){try{t.h.call(t.g)}catch(n){m1(n)}var e=ww;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}nh=!1}function nu(t,e){at.call(this),this.h=t||1,this.g=e||me,this.j=ft(this.kb,this),this.l=Date.now()}mt(nu,at);te=nu.prototype;te.da=!1;te.S=null;te.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),gt(this,"tick"),this.da&&(yd(this),this.start()))}};te.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function yd(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}te.M=function(){nu.Z.M.call(this),yd(this),delete this.g};function wd(t,e,n){if(typeof t=="function")n&&(t=ft(t,n));else if(t&&typeof t.handleEvent=="function")t=ft(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:me.setTimeout(t,e||0)}function _w(t){t.g=wd(()=>{t.g=null,t.i&&(t.i=!1,_w(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class y1 extends Ir{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:_w(this)}M(){super.M(),this.g&&(me.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _o(t){Ir.call(this),this.h=t,this.g={}}mt(_o,Ir);var em=[];function Ew(t,e,n,r){Array.isArray(n)||(n&&(em[0]=n.toString()),n=em);for(var s=0;s<n.length;s++){var i=gw(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function Iw(t){cd(t.g,function(e,n){this.g.hasOwnProperty(n)&&fd(e)},t),t.g={}}_o.prototype.M=function(){_o.Z.M.call(this),Iw(this)};_o.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ru(){this.g=!0}ru.prototype.Aa=function(){this.g=!1};function w1(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function b1(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function Vs(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+E1(t,n)+(r?" "+r:"")})}function _1(t,e){t.info(function(){return"TIMEOUT: "+e})}ru.prototype.info=function(){};function E1(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return pd(n)}catch{return e}}var bs={},tm=null;function su(){return tm=tm||new at}bs.Ma="serverreachability";function Tw(t){Tt.call(this,bs.Ma,t)}mt(Tw,Tt);function Eo(t){const e=su();gt(e,new Tw(e))}bs.STAT_EVENT="statevent";function Sw(t,e){Tt.call(this,bs.STAT_EVENT,t),this.stat=e}mt(Sw,Tt);function Rt(t){const e=su();gt(e,new Sw(e,t))}bs.Na="timingevent";function kw(t,e){Tt.call(this,bs.Na,t),this.size=e}mt(kw,Tt);function zo(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return me.setTimeout(function(){t()},e)}var iu={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Cw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function bd(){}bd.prototype.h=null;function nm(t){return t.h||(t.h=t.i())}function xw(){}var Ho={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function _d(){Tt.call(this,"d")}mt(_d,Tt);function Ed(){Tt.call(this,"c")}mt(Ed,Tt);var rh;function ou(){}mt(ou,bd);ou.prototype.g=function(){return new XMLHttpRequest};ou.prototype.i=function(){return{}};rh=new ou;function Ko(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new _o(this),this.P=I1,t=Xc?125:void 0,this.W=new nu(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Aw}function Aw(){this.i=null,this.g="",this.h=!1}var I1=45e3,sh={},ml={};te=Ko.prototype;te.setTimeout=function(t){this.P=t};function ih(t,e,n){t.K=1,t.v=lu(Hn(e)),t.s=n,t.U=!0,Dw(t,null)}function Dw(t,e){t.F=Date.now(),Go(t),t.A=Hn(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Fw(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Aw,t.g=rb(t.l,n?e:null,!t.s),0<t.O&&(t.L=new y1(ft(t.Ia,t,t.g),t.O)),Ew(t.V,t.g,"readystatechange",t.gb),e=t.H?uw(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Eo(),w1(t.j,t.u,t.A,t.m,t.X,t.s)}te.gb=function(t){t=t.target;const e=this.L;e&&Bn(t)==3?e.l():this.Ia(t)};te.Ia=function(t){try{if(t==this.g)e:{const c=Bn(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>c)&&(c!=3||Xc||this.g&&(this.h.h||this.g.ga()||om(this.g)))){this.I||c!=4||e==7||(e==8||0>=h?Eo(3):Eo(2)),au(this);var n=this.g.ba();this.N=n;t:if(Rw(this)){var r=om(this.g);t="";var s=r.length,i=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){Hr(this),eo(this);var o="";break t}this.h.i=new me.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=n==200,b1(this.j,this.u,this.A,this.m,this.X,c,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fl(a)){var u=a;break t}}u=null}if(n=u)Vs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,oh(this,n);else{this.i=!1,this.o=3,Rt(12),Hr(this),eo(this);break e}}this.U?(Ow(this,c,o),Xc&&this.i&&c==3&&(Ew(this.V,this.W,"tick",this.fb),this.W.start())):(Vs(this.j,this.m,o,null),oh(this,o)),c==4&&Hr(this),this.i&&!this.I&&(c==4?Zw(this.l,this):(this.i=!1,Go(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Rt(12)):(this.o=0,Rt(13)),Hr(this),eo(this)}}}catch{}finally{}};function Rw(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function Ow(t,e,n){let r=!0,s;for(;!t.I&&t.C<n.length;)if(s=T1(t,n),s==ml){e==4&&(t.o=4,Rt(14),r=!1),Vs(t.j,t.m,null,"[Incomplete Response]");break}else if(s==sh){t.o=4,Rt(15),Vs(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Vs(t.j,t.m,s,null),oh(t,s);Rw(t)&&s!=ml&&s!=sh&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Rt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Rd(e),e.L=!0,Rt(11))):(Vs(t.j,t.m,n,"[Invalid Chunked Response]"),Hr(t),eo(t))}te.fb=function(){if(this.g){var t=Bn(this.g),e=this.g.ga();this.C<e.length&&(au(this),Ow(this,t,e),this.i&&t!=4&&Go(this))}};function T1(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?ml:(n=Number(e.substring(n,r)),isNaN(n)?sh:(r+=1,r+n>e.length?ml:(e=e.substr(r,n),t.C=r+n,e)))}te.cancel=function(){this.I=!0,Hr(this)};function Go(t){t.Y=Date.now()+t.P,Mw(t,t.P)}function Mw(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=zo(ft(t.eb,t),e)}function au(t){t.B&&(me.clearTimeout(t.B),t.B=null)}te.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(_1(this.j,this.A),this.K!=2&&(Eo(),Rt(17)),Hr(this),this.o=2,eo(this)):Mw(this,this.Y-t)};function eo(t){t.l.G==0||t.I||Zw(t.l,t)}function Hr(t){au(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,yd(t.W),Iw(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function oh(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||ah(n.i,t))){if(n.I=t.N,!t.J&&ah(n.i,t)&&n.G==3){try{var r=n.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)wl(n),hu(n);else break e;Dd(n),Rt(18)}}else n.ta=s[1],0<n.ta-n.U&&37500>s[2]&&n.N&&n.A==0&&!n.v&&(n.v=zo(ft(n.ab,n),6e3));if(1>=Vw(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else Kr(n,11)}else if((t.J||n.g==t)&&wl(n),!fl(e))for(s=n.Ca.g.parse(e),e=0;e<s.length;e++){let u=s[e];if(n.U=u[0],u=u[1],n.G==2)if(u[0]=="c"){n.J=u[1],n.la=u[2];const c=u[3];c!=null&&(n.ma=c,n.h.info("VER="+n.ma));const h=u[4];h!=null&&(n.za=h,n.h.info("SVER="+n.za));const d=u[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var i=r.i;!i.g&&(xt(g,"spdy")||xt(g,"quic")||xt(g,"h2"))&&(i.j=i.l,i.g=new Set,i.h&&(Sd(i,i.h),i.h=null))}if(r.D){const E=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;E&&(r.sa=E,qe(r.F,r.D,E))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var o=t;if(r.oa=nb(r,r.H?r.la:null,r.W),o.J){qw(r.i,o);var a=o,l=r.K;l&&a.setTimeout(l),a.B&&(au(a),Go(a)),r.g=o}else Xw(r);0<n.l.length&&du(n)}else u[0]!="stop"&&u[0]!="close"||Kr(n,7);else n.G==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Kr(n,7):Ad(n):u[0]!="noop"&&n.j&&n.j.wa(u),n.A=0)}}Eo(4)}catch{}}function S1(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(Qc(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function Id(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Qc(t)||typeof t=="string")lw(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(Qc(t)||typeof t=="string"){n=[];for(var r=t.length,s=0;s<r;s++)n.push(s)}else for(s in n=[],r=0,t)n[r++]=s;r=S1(t),s=r.length;for(var i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}}function pi(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof pi)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}te=pi.prototype;te.R=function(){Td(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};te.T=function(){return Td(this),this.g.concat()};function Td(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];is(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var s={};for(n=e=0;e<t.g.length;)r=t.g[e],is(s,r)||(t.g[n++]=r,s[r]=1),e++;t.g.length=n}}te.get=function(t,e){return is(this.h,t)?this.h[t]:e};te.set=function(t,e){is(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};te.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var s=n[r],i=this.get(s);t.call(e,i,s,this)}};function is(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Pw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function k1(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function os(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof os){this.g=e!==void 0?e:t.g,pl(this,t.j),this.s=t.s,vl(this,t.i),yl(this,t.m),this.l=t.l,e=t.h;var n=new Io;n.i=e.i,e.g&&(n.g=new pi(e.g),n.h=e.h),rm(this,n),this.o=t.o}else t&&(n=String(t).match(Pw))?(this.g=!!e,pl(this,n[1]||"",!0),this.s=to(n[2]||""),vl(this,n[3]||"",!0),yl(this,n[4]),this.l=to(n[5]||"",!0),rm(this,n[6]||"",!0),this.o=to(n[7]||"")):(this.g=!!e,this.h=new Io(null,this.g))}os.prototype.toString=function(){var t=[],e=this.j;e&&t.push($i(e,sm,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push($i(e,sm,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push($i(n,n.charAt(0)=="/"?R1:D1,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",$i(n,M1)),t.join("")};function Hn(t){return new os(t)}function pl(t,e,n){t.j=n?to(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function vl(t,e,n){t.i=n?to(e,!0):e}function yl(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function rm(t,e,n){e instanceof Io?(t.h=e,P1(t.h,t.g)):(n||(e=$i(e,O1)),t.h=new Io(e,t.g))}function qe(t,e,n){t.h.set(e,n)}function lu(t){return qe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function C1(t){return t instanceof os?Hn(t):new os(t,void 0)}function x1(t,e,n,r){var s=new os(null,void 0);return t&&pl(s,t),e&&vl(s,e),n&&yl(s,n),r&&(s.l=r),s}function to(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function $i(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,A1),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function A1(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var sm=/[#\/\?@]/g,D1=/[#\?:]/g,R1=/[#\?]/g,O1=/[#\?@]/g,M1=/#/g;function Io(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Tr(t){t.g||(t.g=new pi,t.h=0,t.i&&k1(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}te=Io.prototype;te.add=function(t,e){Tr(this),this.i=null,t=vi(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Nw(t,e){Tr(t),e=vi(t,e),is(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,is(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Td(t)))}function Lw(t,e){return Tr(t),e=vi(t,e),is(t.g.h,e)}te.forEach=function(t,e){Tr(this),this.g.forEach(function(n,r){lw(n,function(s){t.call(e,s,r,this)},this)},this)};te.T=function(){Tr(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var s=t[r],i=0;i<s.length;i++)n.push(e[r]);return n};te.R=function(t){Tr(this);var e=[];if(typeof t=="string")Lw(this,t)&&(e=Wg(e,this.g.get(vi(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Wg(e,t[n])}return e};te.set=function(t,e){return Tr(this),this.i=null,t=vi(this,t),Lw(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};te.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function Fw(t,e,n){Nw(t,e),0<n.length&&(t.i=null,t.g.set(vi(t,e),ud(n)),t.h+=n.length)}te.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],s=encodeURIComponent(String(r));r=this.R(r);for(var i=0;i<r.length;i++){var o=s;r[i]!==""&&(o+="="+encodeURIComponent(String(r[i]))),t.push(o)}}return this.i=t.join("&")};function vi(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function P1(t,e){e&&!t.j&&(Tr(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(Nw(this,r),Fw(this,s,n))},t)),t.j=e}var N1=class{constructor(t,e){this.h=t,this.g=e}};function Bw(t){this.l=t||L1,me.PerformanceNavigationTiming?(t=me.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(me.g&&me.g.Ea&&me.g.Ea()&&me.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var L1=10;function Uw(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Vw(t){return t.h?1:t.g?t.g.size:0}function ah(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Sd(t,e){t.g?t.g.add(e):t.h=e}function qw(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Bw.prototype.cancel=function(){if(this.i=$w(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function $w(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return ud(t.i)}function kd(){}kd.prototype.stringify=function(t){return me.JSON.stringify(t,void 0)};kd.prototype.parse=function(t){return me.JSON.parse(t,void 0)};function F1(){this.g=new kd}function B1(t,e,n){const r=n||"";try{Id(t,function(s,i){let o=s;$o(s)&&(o=pd(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function U1(t,e){const n=new ru;if(me.Image){const r=new Image;r.onload=pa(ya,n,r,"TestLoadImage: loaded",!0,e),r.onerror=pa(ya,n,r,"TestLoadImage: error",!1,e),r.onabort=pa(ya,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=pa(ya,n,r,"TestLoadImage: timeout",!1,e),me.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ya(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Wo(t){this.l=t.$b||null,this.j=t.ib||!1}mt(Wo,bd);Wo.prototype.g=function(){return new uu(this.l,this.j)};Wo.prototype.i=function(t){return function(){return t}}({});function uu(t,e){at.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Cd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mt(uu,at);var Cd=0;te=uu.prototype;te.open=function(t,e){if(this.readyState!=Cd)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,To(this)};te.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||me).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};te.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yo(this)),this.readyState=Cd};te.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,To(this)),this.g&&(this.readyState=3,To(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof me.ReadableStream!="undefined"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;jw(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function jw(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}te.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Yo(this):To(this),this.readyState==3&&jw(this)}};te.Ua=function(t){this.g&&(this.response=this.responseText=t,Yo(this))};te.Ta=function(t){this.g&&(this.response=t,Yo(this))};te.ha=function(){this.g&&Yo(this)};function Yo(t){t.readyState=4,t.l=null,t.j=null,t.A=null,To(t)}te.setRequestHeader=function(t,e){this.v.append(t,e)};te.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};te.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function To(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(uu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var V1=me.JSON.parse;function et(t){at.call(this),this.headers=new pi,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zw,this.K=this.L=!1}mt(et,at);var zw="",q1=/^https?$/i,$1=["POST","PUT"];te=et.prototype;te.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():rh.g(),this.C=this.u?nm(this.u):nm(rh),this.g.onreadystatechange=ft(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(i){im(this,i);return}t=n||"";const s=new pi(this.headers);r&&Id(r,function(i,o){s.set(o,i)}),r=Zx(s.T()),n=me.FormData&&t instanceof me.FormData,!(0<=aw($1,e))||r||n||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(i,o){this.g.setRequestHeader(o,i)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Gw(this),0<this.B&&((this.K=j1(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ft(this.pa,this)):this.A=wd(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){im(this,i)}};function j1(t){return si&&s1()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function z1(t){return t.toLowerCase()=="content-type"}te.pa=function(){typeof ld!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,gt(this,"timeout"),this.abort(8))};function im(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Hw(t),cu(t)}function Hw(t){t.D||(t.D=!0,gt(t,"complete"),gt(t,"error"))}te.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,gt(this,"complete"),gt(this,"abort"),cu(this))};te.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cu(this,!0)),et.Z.M.call(this)};te.Fa=function(){this.s||(this.F||this.v||this.l?Kw(this):this.cb())};te.cb=function(){Kw(this)};function Kw(t){if(t.h&&typeof ld!="undefined"&&(!t.C[1]||Bn(t)!=4||t.ba()!=2)){if(t.v&&Bn(t)==4)wd(t.Fa,0,t);else if(gt(t,"readystatechange"),Bn(t)==4){t.h=!1;try{const a=t.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var s=String(t.H).match(Pw)[1]||null;if(!s&&me.self&&me.self.location){var i=me.self.location.protocol;s=i.substr(0,i.length-1)}r=!q1.test(s?s.toLowerCase():"")}n=r}if(n)gt(t,"complete"),gt(t,"success");else{t.m=6;try{var o=2<Bn(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.ba()+"]",Hw(t)}}finally{cu(t)}}}}function cu(t,e){if(t.g){Gw(t);const n=t.g,r=t.C[0]?dl:null;t.g=null,t.C=null,e||gt(t,"ready");try{n.onreadystatechange=r}catch{}}}function Gw(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(me.clearTimeout(t.A),t.A=null)}function Bn(t){return t.g?t.g.readyState:0}te.ba=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}};te.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};te.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),V1(e)}};function om(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case zw:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}te.Da=function(){return this.m};te.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function H1(t){let e="";return cd(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function xd(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=H1(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):qe(t,e,n))}function xi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ww(t){this.za=0,this.l=[],this.h=new ru,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=xi("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=xi("baseRetryDelayMs",5e3,t),this.$a=xi("retryDelaySeedMs",1e4,t),this.Ya=xi("forwardChannelMaxRetries",2,t),this.ra=xi("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Bw(t&&t.concurrentRequestLimit),this.Ca=new F1,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}te=Ww.prototype;te.ma=8;te.G=1;function Ad(t){if(Yw(t),t.G==3){var e=t.V++,n=Hn(t.F);qe(n,"SID",t.J),qe(n,"RID",e),qe(n,"TYPE","terminate"),Qo(t,n),e=new Ko(t,t.h,e,void 0),e.K=2,e.v=lu(Hn(n)),n=!1,me.navigator&&me.navigator.sendBeacon&&(n=me.navigator.sendBeacon(e.v.toString(),"")),!n&&me.Image&&(new Image().src=e.v,n=!0),n||(e.g=rb(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Go(e)}tb(t)}te.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function hu(t){t.g&&(Rd(t),t.g.cancel(),t.g=null)}function Yw(t){hu(t),t.u&&(me.clearTimeout(t.u),t.u=null),wl(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&me.clearTimeout(t.m),t.m=null)}function oc(t,e){t.l.push(new N1(t.Za++,e)),t.G==3&&du(t)}function du(t){Uw(t.i)||t.m||(t.m=!0,vd(t.Ha,t),t.C=0)}function K1(t,e){return Vw(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=zo(ft(t.Ha,t,e),eb(t,t.C)),t.C++,!0)}te.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const s=new Ko(this,this.h,t,void 0);let i=this.s;if(this.P&&(i?(i=uw(i),cw(i,this.P)):i=this.P),this.o===null&&(s.H=i),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){t:{var r=this.l[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Qw(this,s,e),n=Hn(this.F),qe(n,"RID",t),qe(n,"CVER",22),this.D&&qe(n,"X-HTTP-Session-Id",this.D),Qo(this,n),this.o&&i&&xd(n,this.o,i),Sd(this.i,s),this.Ra&&qe(n,"TYPE","init"),this.ja?(qe(n,"$req",e),qe(n,"SID","null"),s.$=!0,ih(s,n,null)):ih(s,n,e),this.G=2}}else this.G==3&&(t?am(this,t):this.l.length==0||Uw(this.i)||am(this))};function am(t,e){var n;e?n=e.m:n=t.V++;const r=Hn(t.F);qe(r,"SID",t.J),qe(r,"RID",n),qe(r,"AID",t.U),Qo(t,r),t.o&&t.s&&xd(r,t.o,t.s),n=new Ko(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Qw(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Sd(t.i,n),ih(n,r,e)}function Qo(t,e){t.j&&Id({},function(n,r){qe(e,r,n)})}function Qw(t,e,n){n=Math.min(t.l.length,n);var r=t.j?ft(t.j.Oa,t.j,t):null;e:{var s=t.l;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let u=s[l].h;const c=s[l].g;if(u-=i,0>u)i=Math.max(0,s[l].h-100),a=!1;else try{B1(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,r}function Xw(t){t.g||t.u||(t.Y=1,vd(t.Ga,t),t.A=0)}function Dd(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=zo(ft(t.Ga,t),eb(t,t.A)),t.A++,!0)}te.Ga=function(){if(this.u=null,Jw(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=zo(ft(this.bb,this),t)}};te.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Rt(10),hu(this),Jw(this))};function Rd(t){t.B!=null&&(me.clearTimeout(t.B),t.B=null)}function Jw(t){t.g=new Ko(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=Hn(t.oa);qe(e,"RID","rpc"),qe(e,"SID",t.J),qe(e,"CI",t.N?"0":"1"),qe(e,"AID",t.U),Qo(t,e),qe(e,"TYPE","xmlhttp"),t.o&&t.s&&xd(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=lu(Hn(e)),n.s=null,n.U=!0,Dw(n,t)}te.ab=function(){this.v!=null&&(this.v=null,hu(this),Dd(this),Rt(19))};function wl(t){t.v!=null&&(me.clearTimeout(t.v),t.v=null)}function Zw(t,e){var n=null;if(t.g==e){wl(t),Rd(t),t.g=null;var r=2}else if(ah(t.i,e))n=e.D,qw(t.i,e),r=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;r=su(),gt(r,new kw(r,n)),du(t)}else Xw(t);else if(s=e.o,s==3||s==0&&0<t.I||!(r==1&&K1(t,e)||r==2&&Dd(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Kr(t,5);break;case 4:Kr(t,10);break;case 3:Kr(t,6);break;default:Kr(t,2)}}}function eb(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Kr(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var r=ft(t.jb,t);n||(n=new os("//www.google.com/images/cleardot.gif"),me.location&&me.location.protocol=="http"||pl(n,"https"),lu(n)),U1(n.toString(),r)}else Rt(2);t.G=0,t.j&&t.j.va(e),tb(t),Yw(t)}te.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Rt(2)):(this.h.info("Failed to ping google.com"),Rt(1))};function tb(t){t.G=0,t.I=-1,t.j&&(($w(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,ud(t.l),t.l.length=0),t.j.ua())}function nb(t,e,n){let r=C1(n);if(r.i!="")e&&vl(r,e+"."+r.i),yl(r,r.m);else{const s=me.location;r=x1(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,n)}return t.aa&&cd(t.aa,function(s,i){qe(r,i,s)}),e=t.D,n=t.sa,e&&n&&qe(r,e,n),qe(r,"VER",t.ma),Qo(t,r),r}function rb(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new et(new Wo({ib:!0})):new et(t.qa),e.L=t.H,e}function sb(){}te=sb.prototype;te.xa=function(){};te.wa=function(){};te.va=function(){};te.ua=function(){};te.Oa=function(){};function bl(){if(si&&!(10<=Number(i1)))throw Error("Environmental error: no available transport.")}bl.prototype.g=function(t,e){return new Kt(t,e)};function Kt(t,e){at.call(this),this.g=new Ww(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!fl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!fl(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new yi(this)}mt(Kt,at);Kt.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),vd(ft(t.hb,t,e))),Rt(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=nb(t,null,t.W),du(t)};Kt.prototype.close=function(){Ad(this.g)};Kt.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,oc(this.g,e)}else this.v?(e={},e.__data__=pd(t),oc(this.g,e)):oc(this.g,t)};Kt.prototype.M=function(){this.g.j=null,delete this.j,Ad(this.g),delete this.g,Kt.Z.M.call(this)};function ib(t){_d.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}mt(ib,_d);function ob(){Ed.call(this),this.status=1}mt(ob,Ed);function yi(t){this.g=t}mt(yi,sb);yi.prototype.xa=function(){gt(this.g,"a")};yi.prototype.wa=function(t){gt(this.g,new ib(t))};yi.prototype.va=function(t){gt(this.g,new ob)};yi.prototype.ua=function(){gt(this.g,"b")};bl.prototype.createWebChannel=bl.prototype.g;Kt.prototype.send=Kt.prototype.u;Kt.prototype.open=Kt.prototype.m;Kt.prototype.close=Kt.prototype.close;iu.NO_ERROR=0;iu.TIMEOUT=8;iu.HTTP_ERROR=6;Cw.COMPLETE="complete";xw.EventType=Ho;Ho.OPEN="a";Ho.CLOSE="b";Ho.ERROR="c";Ho.MESSAGE="d";at.prototype.listen=at.prototype.N;et.prototype.listenOnce=et.prototype.O;et.prototype.getLastError=et.prototype.La;et.prototype.getLastErrorCode=et.prototype.Da;et.prototype.getStatus=et.prototype.ba;et.prototype.getResponseJson=et.prototype.Qa;et.prototype.getResponseText=et.prototype.ga;et.prototype.send=et.prototype.ea;var G1=function(){return new bl},W1=function(){return su()},ac=iu,Y1=Cw,Q1=bs,lm={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},X1=Wo,wa=xw,J1=et;const um="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wi="9.9.4";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new id("@firebase/firestore");function lh(){return as.logLevel}function z(t,...e){if(as.logLevel<=Ae.DEBUG){const n=e.map(Od);as.debug(`Firestore (${wi}): ${t}`,...n)}}function Dt(t,...e){if(as.logLevel<=Ae.ERROR){const n=e.map(Od);as.error(`Firestore (${wi}): ${t}`,...n)}}function uh(t,...e){if(as.logLevel<=Ae.WARN){const n=e.map(Od);as.warn(`Firestore (${wi}): ${t}`,...n)}}function Od(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t="Unexpected state"){const e=`FIRESTORE (${wi}) INTERNAL ASSERTION FAILED: `+t;throw Dt(e),new Error(e)}function ye(t,e){t||le()}function be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends Mn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ct.UNAUTHENTICATED))}shutdown(){}}class tA{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new cn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new cn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new cn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new Z1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new Ct(e)}}class nA{constructor(e,n,r,s){this.h=e,this.l=n,this.m=r,this.g=s,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ye(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class rA{constructor(e,n,r,s){this.h=e,this.l=n,this.m=r,this.g=s}getToken(){return Promise.resolve(new nA(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iA{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=i=>{i.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.A;return this.A=i.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.T.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.T.getImmediate({optional:!0});i?s(i):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.A=n.token,new sA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=oA(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function ii(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function lb(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ne(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fe(e)}static min(){return new fe(new ze(0,0))}static max(){return new fe(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(),r===void 0?r=e.length-n:r>e.length-n&&le(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return So.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof So?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Re extends So{construct(e,n,r){return new Re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const aA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Je extends So{construct(e,n,r){return new Je(e,n,r)}static isValidIdentifier(e){return aA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Je.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Je(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ne(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ne(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ne(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new ne(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Je(n)}static emptyPath(){return new Je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Re.fromString(e))}static fromName(e){return new J(Re.fromString(e).popFirst(5))}static empty(){return new J(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Re(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function ch(t){return t.fields.find(e=>e.kind===2)}function Lr(t){return t.fields.filter(e=>e.kind!==2)}ub.UNKNOWN_ID=-1;class lA{constructor(e,n){this.fieldPath=e,this.kind=n}}class _l{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new _l(0,Gt.min())}}function uA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=fe.fromTimestamp(r===1e9?new ze(n+1,0):new ze(n,r));return new Gt(s,J.empty(),e)}function cb(t){return new Gt(t.readTime,t.key,-1)}class Gt{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Gt(fe.min(),J.empty(),-1)}static max(){return new Gt(fe.max(),J.empty(),-1)}}function Md(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class db{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _s(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==hb)throw t;z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new k((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof k?n:k.resolve(n)}catch(n){return k.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):k.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):k.reject(n)}static resolve(e){return new k((n,r)=>{n(e)})}static reject(e){return new k((n,r)=>{r(e)})}static waitFor(e){return new k((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=k.resolve(!1);for(const r of e)n=n.next(s=>s?k.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new k((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===i&&r(o)},c=>s(c))}})}static doWhile(e,n){return new k((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.P=new cn,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{n.error?this.P.reject(new no(e,n.error)):this.P.resolve()},this.transaction.onerror=r=>{const s=Pd(r.target.error);this.P.reject(new no(e,s))}}static open(e,n,r,s){try{return new fu(n,e.transaction(s,r))}catch(i){throw new no(n,i)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(z("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new hA(n)}}class Un{constructor(e,n,r){this.name=e,this.version=n,this.S=r,Un.D(We())===12.2&&Dt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return z("SimpleDb","Removing database:",e),Vr(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!tw())return!1;if(Un.N())return!0;const e=We(),n=Un.D(e),r=0<n&&n<10,s=Un.k(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static N(){var e;return typeof process!="undefined"&&((e=process.env)===null||e===void 0?void 0:e.M)==="YES"}static O(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async F(e){return this.db||(z("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new no(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new ne(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ne(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new no(e,o))},s.onupgradeneeded=i=>{z("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.S.$(o,s.transaction,i.oldVersion,this.version).next(()=>{z("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.F(e);const a=fu.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(u=>(a.V(),u)).catch(u=>(a.abort(u),k.reject(u))).toPromise();return l.catch(()=>{}),await a.v,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(z("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class cA{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Vr(this.U.delete())}}class no extends ne{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Sr(t){return t.name==="IndexedDbTransactionError"}class hA{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(z("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(z("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Vr(r)}add(e){return z("SimpleDb","ADD",this.store.name,e,e),Vr(this.store.add(e))}get(e){return Vr(this.store.get(e)).next(n=>(n===void 0&&(n=null),z("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return z("SimpleDb","DELETE",this.store.name,e),Vr(this.store.delete(e))}count(){return z("SimpleDb","COUNT",this.store.name),Vr(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const s=this.cursor(r),i=[];return this.H(s,(o,a)=>{i.push(a)}).next(()=>i)}{const s=this.store.getAll(r.range);return new k((i,o)=>{s.onerror=a=>{o(a.target.error)},s.onsuccess=a=>{i(a.target.result)}})}}J(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new k((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Y(e,n){z("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}Z(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}tt(e){const n=this.cursor({});return new k((r,s)=>{n.onerror=i=>{const o=Pd(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new k((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new cA(a),u=n(a.primaryKey,a.value,l);if(u instanceof k){const c=u.catch(h=>(l.done(),k.reject(h)));r.push(c)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>k.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Vr(t){return new k((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Pd(r.target.error);n(s)}})}let cm=!1;function Pd(t){const e=Un.D(We());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cm||(cm=!0,setTimeout(()=>{throw r},0)),r}}return t}class dA{constructor(e,n){this.asyncQueue=e,this.et=n,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}nt(e){z("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{z("IndexBackiller",`Documents written: ${await this.et.st()}`)}catch(n){Sr(n)?z("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await _s(n)}await this.nt(1)})}}class fA{constructor(e,n){this.localStore=e,this.persistence=n}async st(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.it(n,e))}it(e,n){const r=new Set;let s=n,i=!0;return k.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return z("IndexBackiller",`Processing collection: ${o}`),this.rt(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}rt(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ot(s,i)).next(a=>(z("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ot(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=cb(i);Md(o,r)>0&&(r=o)}),new Gt(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>n.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Es(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qt.at=-1;class tt{constructor(e,n){this.comparator=e,this.root=n||dt.EMPTY}insert(e,n){return new tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dt.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ba(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ba(this.root,e,this.comparator,!1)}getReverseIterator(){return new ba(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ba(this.root,e,this.comparator,!0)}}class ba{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r!=null?r:dt.RED,this.left=s!=null?s:dt.EMPTY,this.right=i!=null?i:dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new dt(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,s!=null?s:this.left,i!=null?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return dt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();const e=this.left.check();if(e!==this.right.check())throw le();return e+(this.isRed()?0:1)}}dt.EMPTY=null,dt.RED=!0,dt.BLACK=!1;dt.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(t,e,n,r,s){return this}insert(t,e,n){return new dt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dm(this.data.getIterator())}getIteratorFrom(e){return new dm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Me)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Me(this.comparator);return n.data=e,n}}class dm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function As(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.fields=e,e.sort(Je.comparator)}static empty(){return new jt([])}unionWith(e){let n=new Me(Je.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ii(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new lt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let i=0;i<r.length;++i)s+=String.fromCharCode(r[i]);return s}(e);return new lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lt.EMPTY_BYTE_STRING=new lt("");const gA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wr(t){if(ye(!!t),typeof t=="string"){let e=0;const n=gA.exec(t);if(ye(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ge(t.seconds),nanos:Ge(t.nanos)}}function Ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ls(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function mb(t){const e=t.mapValue.fields.__previous_value__;return gb(e)?mb(e):e}function ko(t){const e=wr(t.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n,r,s,i,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class us{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new us("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof us&&e.projectId===this.projectId&&e.database===this.database}}function gu(t){return t==null}function Co(t){return t===0&&1/t==-1/0}function pA(t){return typeof t=="number"&&Number.isInteger(t)&&!Co(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ba={nullValue:"NULL_VALUE"};function cs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gb(t)?4:pb(t)?9007199254740991:10:le()}function Dn(t,e){if(t===e)return!0;const n=cs(t);if(n!==cs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ko(t).isEqual(ko(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const i=wr(r.timestampValue),o=wr(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return ls(r.bytesValue).isEqual(ls(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Ge(r.geoPointValue.latitude)===Ge(s.geoPointValue.latitude)&&Ge(r.geoPointValue.longitude)===Ge(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ge(r.integerValue)===Ge(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const i=Ge(r.doubleValue),o=Ge(s.doubleValue);return i===o?Co(i)===Co(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return ii(t.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:return function(r,s){const i=r.mapValue.fields||{},o=s.mapValue.fields||{};if(hm(i)!==hm(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!Dn(i[a],o[a])))return!1;return!0}(t,e);default:return le()}}function xo(t,e){return(t.values||[]).find(n=>Dn(n,e))!==void 0}function br(t,e){if(t===e)return 0;const n=cs(t),r=cs(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=Ge(s.integerValue||s.doubleValue),a=Ge(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return fm(t.timestampValue,e.timestampValue);case 4:return fm(ko(t),ko(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(s,i){const o=ls(s),a=ls(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=Ee(o[l],a[l]);if(u!==0)return u}return Ee(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=Ee(Ge(s.latitude),Ge(i.latitude));return o!==0?o:Ee(Ge(s.longitude),Ge(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,i){const o=s.values||[],a=i.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=br(o[l],a[l]);if(u)return u}return Ee(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,i){if(s===cr.mapValue&&i===cr.mapValue)return 0;if(s===cr.mapValue)return 1;if(i===cr.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),l=i.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const h=Ee(a[c],u[c]);if(h!==0)return h;const d=br(o[a[c]],l[u[c]]);if(d!==0)return d}return Ee(a.length,u.length)}(t.mapValue,e.mapValue);default:throw le()}}function fm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=wr(t),r=wr(e),s=Ee(n.seconds,r.seconds);return s!==0?s:Ee(n.nanos,r.nanos)}function Gs(t){return hh(t)}function hh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=wr(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ls(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,J.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",i=!0;for(const o of r.values||[])i?i=!1:s+=",",s+=hh(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const a of s)o?o=!1:i+=",",i+=`${a}:${hh(r.fields[a])}`;return i+"}"}(t.mapValue):le();var e,n}function Nd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function dh(t){return!!t&&"integerValue"in t}function Ao(t){return!!t&&"arrayValue"in t}function gm(t){return!!t&&"nullValue"in t}function mm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ua(t){return!!t&&"mapValue"in t}function ro(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Es(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ro(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ro(t.arrayValue.values[n]);return e}return Object.assign({},t)}function pb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function vA(t){return"nullValue"in t?Ba:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Nd(us.empty(),J.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:le()}function yA(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Nd(us.empty(),J.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?cr:le()}function pm(t,e){const n=br(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function vm(t,e){const n=br(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.value=e}static empty(){return new bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ua(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ro(n)}setAll(e){let n=Je.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ro(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ua(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ua(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Es(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new bt(ro(this.value))}}function vb(t){const e=[];return Es(t.fields,(n,r)=>{const s=new Je([n]);if(Ua(r)){const i=vb(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n,r,s,i,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new je(e,0,fe.min(),fe.min(),bt.empty(),0)}static newFoundDocument(e,n,r){return new je(e,1,n,fe.min(),r,0)}static newNoDocument(e,n){return new je(e,2,n,fe.min(),bt.empty(),0)}static newUnknownDocument(e,n){return new je(e,3,n,fe.min(),bt.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof je&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new je(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ht=null}}function ym(t,e=null,n=[],r=[],s=null,i=null,o=null){return new wA(t,e,n,r,s,i,o)}function hs(t){const e=be(t);if(e.ht===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+Gs(s.value);var s}).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),gu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Gs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Gs(r)).join(",")),e.ht=n}return e.ht}function bA(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${Gs(r.value)}`;var r}).join(", ")}]`),gu(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Gs(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Gs(n)).join(",")),`Target(${e})`}function Xo(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!xA(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(n=t.filters[s],r=e.filters[s],n.op!==r.op||!n.field.isEqual(r.field)||!Dn(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Em(t.startAt,e.startAt)&&Em(t.endAt,e.endAt)}function El(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Il(t,e){return t.filters.filter(n=>n instanceof It&&n.field.isEqual(e))}function wm(t,e,n){let r=Ba,s=!0;for(const i of Il(t,e)){let o=Ba,a=!0;switch(i.op){case"<":case"<=":o=vA(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Ba}pm({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];pm({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function bm(t,e,n){let r=cr,s=!0;for(const i of Il(t,e)){let o=cr,a=!0;switch(i.op){case">=":case">":o=yA(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=cr}vm({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];vm({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}class It extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.lt(e,n,r):new _A(e,n,r):n==="array-contains"?new TA(e,r):n==="in"?new SA(e,r):n==="not-in"?new kA(e,r):n==="array-contains-any"?new CA(e,r):new It(e,n,r)}static lt(e,n,r){return n==="in"?new EA(e,r):new IA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.ft(br(n,this.value)):n!==null&&cs(this.value)===cs(n)&&this.ft(br(n,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class _A extends It{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.ft(n)}}class EA extends It{constructor(e,n){super(e,"in",n),this.keys=yb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class IA extends It{constructor(e,n){super(e,"not-in",n),this.keys=yb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class TA extends It{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ao(n)&&xo(n.arrayValue,this.value)}}class SA extends It{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xo(this.value.arrayValue,n)}}class kA extends It{constructor(e,n){super(e,"not-in",n)}matches(e){if(xo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!xo(this.value.arrayValue,n)}}class CA extends It{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ao(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xo(this.value.arrayValue,r))}}class oi{constructor(e,n){this.position=e,this.inclusive=n}}class Ws{constructor(e,n="asc"){this.field=e,this.dir=n}}function xA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function _m(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=br(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Em(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this._t=null,this.wt=null,this.startAt,this.endAt}}function AA(t,e,n,r,s,i,o,a){return new Jo(t,e,n,r,s,i,o,a)}function mu(t){return new Jo(t)}function Im(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wb(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function bb(t){for(const e of t.filters)if(e.dt())return e.field;return null}function DA(t){return t.collectionGroup!==null}function Do(t){const e=be(t);if(e._t===null){e._t=[];const n=bb(e),r=wb(e);if(n!==null&&r===null)n.isKeyField()||e._t.push(new Ws(n)),e._t.push(new Ws(Je.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e._t.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Ws(Je.keyField(),i))}}}return e._t}function dn(t){const e=be(t);if(!e.wt)if(e.limitType==="F")e.wt=ym(e.path,e.collectionGroup,Do(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of Do(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new Ws(i.field,o))}const r=e.endAt?new oi(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new oi(e.startAt.position,e.startAt.inclusive):null;e.wt=ym(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e.wt}function fh(t,e,n){return new Jo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pu(t,e){return Xo(dn(t),dn(e))&&t.limitType===e.limitType}function _b(t){return`${hs(dn(t))}|lt:${t.limitType}`}function gh(t){return`Query(target=${bA(dn(t))}; limitType=${t.limitType})`}function Ld(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):J.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of n.explicitOrderBy)if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(s,i,o){const a=_m(s,i,o);return s.inclusive?a<=0:a<0}(n.startAt,Do(n),r)||n.endAt&&!function(s,i,o){const a=_m(s,i,o);return s.inclusive?a>=0:a>0}(n.endAt,Do(n),r))}(t,e)}function RA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Eb(t){return(e,n)=>{let r=!1;for(const s of Do(t)){const i=OA(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function OA(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(s,i,o){const a=i.data.field(s),l=o.data.field(s);return a!==null&&l!==null?br(a,l):le()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(t,e){if(t.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Co(e)?"-0":e}}function Tb(t){return{integerValue:""+t}}function MA(t,e){return pA(e)?Tb(e):Ib(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(){this._=void 0}}function PA(t,e,n){return t instanceof Ro?function(r,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof ai?kb(t,e):t instanceof li?Cb(t,e):function(r,s){const i=Sb(r,s),o=Tm(i)+Tm(r.yt);return dh(i)&&dh(r.yt)?Tb(o):Ib(r.It,o)}(t,e)}function NA(t,e,n){return t instanceof ai?kb(t,e):t instanceof li?Cb(t,e):n}function Sb(t,e){return t instanceof Oo?dh(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Ro extends vu{}class ai extends vu{constructor(e){super(),this.elements=e}}function kb(t,e){const n=xb(e);for(const r of t.elements)n.some(s=>Dn(s,r))||n.push(r);return{arrayValue:{values:n}}}class li extends vu{constructor(e){super(),this.elements=e}}function Cb(t,e){let n=xb(e);for(const r of t.elements)n=n.filter(s=>!Dn(s,r));return{arrayValue:{values:n}}}class Oo extends vu{constructor(e,n){super(),this.It=e,this.yt=n}}function Tm(t){return Ge(t.integerValue||t.doubleValue)}function xb(t){return Ao(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,n){this.field=e,this.transform=n}}function FA(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof ai&&r instanceof ai||n instanceof li&&r instanceof li?ii(n.elements,r.elements,Dn):n instanceof Oo&&r instanceof Oo?Dn(n.yt,r.yt):n instanceof Ro&&r instanceof Ro}(t.transform,e.transform)}class BA{constructor(e,n){this.version=e,this.transformResults=n}}class Ot{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ot}static exists(e){return new Ot(void 0,e)}static updateTime(e){return new Ot(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Va(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class yu{}function Ab(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wu(t.key,Ot.none()):new bi(t.key,t.data,Ot.none());{const n=t.data,r=bt.empty();let s=new Me(Je.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Wn(t.key,r,new jt(s.toArray()),Ot.none())}}function UA(t,e,n){t instanceof bi?function(r,s,i){const o=r.value.clone(),a=km(r.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Wn?function(r,s,i){if(!Va(r.precondition,s))return void s.convertToUnknownDocument(i.version);const o=km(r.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(Db(r)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(r,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function so(t,e,n,r){return t instanceof bi?function(s,i,o,a){if(!Va(s.precondition,i))return o;const l=s.value.clone(),u=Cm(s.fieldTransforms,a,i);return l.setAll(u),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Wn?function(s,i,o,a){if(!Va(s.precondition,i))return o;const l=Cm(s.fieldTransforms,a,i),u=i.data;return u.setAll(Db(s)),u.setAll(l),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(c=>c.field))}(t,e,n,r):function(s,i,o){return Va(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function VA(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Sb(r.transform,s||null);i!=null&&(n===null&&(n=bt.empty()),n.set(r.field,i))}return n||null}function Sm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&ii(n,r,(s,i)=>FA(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class bi extends yu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Wn extends yu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Db(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function km(t,e,n){const r=new Map;ye(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,NA(o,a,n[s]))}return r}function Cm(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,PA(i,o,e))}return r}class wu extends yu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Rb extends yu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe,ke;function $A(t){switch(t){default:return le();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function Ob(t){if(t===void 0)return Dt("GRPC error has no .code"),B.UNKNOWN;switch(t){case Qe.OK:return B.OK;case Qe.CANCELLED:return B.CANCELLED;case Qe.UNKNOWN:return B.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return B.INTERNAL;case Qe.UNAVAILABLE:return B.UNAVAILABLE;case Qe.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Qe.NOT_FOUND:return B.NOT_FOUND;case Qe.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Qe.ABORTED:return B.ABORTED;case Qe.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Qe.DATA_LOSS:return B.DATA_LOSS;default:return le()}}(ke=Qe||(Qe={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Es(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return fb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=new tt(J.comparator);function qt(){return jA}const Mb=new tt(J.comparator);function ji(...t){let e=Mb;for(const n of t)e=e.insert(n.key,n);return e}function Pb(t){let e=Mb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function En(){return io()}function Nb(){return io()}function io(){return new kr(t=>t.toString(),(t,e)=>t.isEqual(e))}const zA=new tt(J.comparator),HA=new Me(J.comparator);function Te(...t){let e=HA;for(const n of t)e=e.add(n);return e}const KA=new Me(Ee);function Lb(){return KA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n){const r=new Map;return r.set(e,Zo.createSynthesizedTargetChangeForCurrentChange(e,n)),new bu(fe.min(),r,Lb(),qt(),Te())}}class Zo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n){return new Zo(lt.EMPTY_BYTE_STRING,n,Te(),Te(),Te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,n,r,s){this.Tt=e,this.removedTargetIds=n,this.key=r,this.Et=s}}class Fb{constructor(e,n){this.targetId=e,this.At=n}}class Bb{constructor(e,n,r=lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class xm{constructor(){this.Rt=0,this.bt=Dm(),this.Pt=lt.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return this.Rt!==0}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Te(),n=Te(),r=Te();return this.bt.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:le()}}),new Zo(this.Pt,this.vt,e,n,r)}Nt(){this.Vt=!1,this.bt=Dm()}kt(e,n){this.Vt=!0,this.bt=this.bt.insert(e,n)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class GA{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=qt(),this.qt=Am(),this.Kt=new Me(Ee)}Gt(e){for(const n of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(n,e.Et):this.jt(n,e.key,e.Et);for(const n of e.removedTargetIds)this.jt(n,e.key,e.Et)}Wt(e){this.forEachTarget(e,n=>{const r=this.zt(n);switch(e.state){case 0:this.Ht(n)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(n);break;case 3:this.Ht(n)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(n)&&(this.Jt(n),r.Ct(e.resumeToken));break;default:le()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Lt.forEach((r,s)=>{this.Ht(s)&&n(s)})}Yt(e){const n=e.targetId,r=e.At.count,s=this.Xt(n);if(s){const i=s.target;if(El(i))if(r===0){const o=new J(i.path);this.jt(n,o,je.newNoDocument(o,fe.min()))}else ye(r===1);else this.Zt(n)!==r&&(this.Jt(n),this.Kt=this.Kt.add(n))}}te(e){const n=new Map;this.Lt.forEach((i,o)=>{const a=this.Xt(o);if(a){if(i.current&&El(a.target)){const l=new J(a.target.path);this.Ut.get(l)!==null||this.ee(o,l)||this.jt(o,l,je.newNoDocument(l,e))}i.Dt&&(n.set(o,i.xt()),i.Nt())}});let r=Te();this.qt.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Xt(l);return!u||u.purpose===2||(a=!1,!1)}),a&&(r=r.add(i))}),this.Ut.forEach((i,o)=>o.setReadTime(e));const s=new bu(e,n,this.Kt,this.Ut,r);return this.Ut=qt(),this.qt=Am(),this.Kt=new Me(Ee),s}Qt(e,n){if(!this.Ht(e))return;const r=this.ee(e,n.key)?2:0;this.zt(e).kt(n.key,r),this.Ut=this.Ut.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ne(n.key).add(e))}jt(e,n,r){if(!this.Ht(e))return;const s=this.zt(e);this.ee(e,n)?s.kt(n,1):s.Mt(n),this.qt=this.qt.insert(n,this.ne(n).delete(e)),r&&(this.Ut=this.Ut.insert(n,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const n=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let n=this.Lt.get(e);return n||(n=new xm,this.Lt.set(e,n)),n}ne(e){let n=this.qt.get(e);return n||(n=new Me(Ee),this.qt=this.qt.insert(e,n)),n}Ht(e){const n=this.Xt(e)!==null;return n||z("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.Lt.get(e);return n&&n.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new xm),this.Bt.getRemoteKeysForTarget(e).forEach(n=>{this.jt(e,n,null)})}ee(e,n){return this.Bt.getRemoteKeysForTarget(e).has(n)}}function Am(){return new tt(J.comparator)}function Dm(){return new tt(J.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),YA=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class QA{constructor(e,n){this.databaseId=e,this.gt=n}}function Mo(t,e){return t.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ub(t,e){return t.gt?e.toBase64():e.toUint8Array()}function XA(t,e){return Mo(t,e.toTimestamp())}function zt(t){return ye(!!t),fe.fromTimestamp(function(e){const n=wr(e);return new ze(n.seconds,n.nanos)}(t))}function Fd(t,e){return function(n){return new Re(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Vb(t){const e=Re.fromString(t);return ye(Gb(e)),e}function Tl(t,e){return Fd(t.databaseId,e.path)}function Xr(t,e){const n=Vb(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J($b(n))}function mh(t,e){return Fd(t.databaseId,e)}function qb(t){const e=Vb(t);return e.length===4?Re.emptyPath():$b(e)}function ph(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $b(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Rm(t,e,n){return{name:Tl(t,e),fields:n.value.mapValue.fields}}function JA(t,e,n){const r=Xr(t,e.name),s=zt(e.updateTime),i=new bt({mapValue:{fields:e.fields}}),o=je.newFoundDocument(r,s,i);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function ZA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:le()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(l,u){return l.gt?(ye(u===void 0||typeof u=="string"),lt.fromBase64String(u||"")):(ye(u===void 0||u instanceof Uint8Array),lt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?B.UNKNOWN:Ob(l.code);return new ne(u,l.message||"")}(o);n=new Bb(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Xr(t,r.document.name),i=zt(r.document.updateTime),o=new bt({mapValue:{fields:r.document.fields}}),a=je.newFoundDocument(s,i,o),l=r.targetIds||[],u=r.removedTargetIds||[];n=new qa(l,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Xr(t,r.document),i=r.readTime?zt(r.readTime):fe.min(),o=je.newNoDocument(s,i),a=r.removedTargetIds||[];n=new qa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Xr(t,r.document),i=r.removedTargetIds||[];n=new qa([],i,s,null)}else{if(!("filter"in e))return le();{e.filter;const r=e.filter;r.targetId;const s=r.count||0,i=new qA(s),o=r.targetId;n=new Fb(o,i)}}return n}function Sl(t,e){let n;if(e instanceof bi)n={update:Rm(t,e.key,e.value)};else if(e instanceof wu)n={delete:Tl(t,e.key)};else if(e instanceof Wn)n={update:Rm(t,e.key,e.data),updateMask:oD(e.fieldMask)};else{if(!(e instanceof Rb))return le();n={verify:Tl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof Ro)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof ai)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof li)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Oo)return{fieldPath:i.field.canonicalString(),increment:o.yt};throw le()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:XA(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:le()}(t,e.precondition)),n}function vh(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Ot.updateTime(zt(s.updateTime)):s.exists!==void 0?Ot.exists(s.exists):Ot.none()}(e.currentDocument):Ot.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(i,o){let a=null;if("setToServerValue"in o)ye(o.setToServerValue==="REQUEST_TIME"),a=new Ro;else if("appendMissingElements"in o){const u=o.appendMissingElements.values||[];a=new ai(u)}else if("removeAllFromArray"in o){const u=o.removeAllFromArray.values||[];a=new li(u)}else"increment"in o?a=new Oo(i,o.increment):le();const l=Je.fromServerFormat(o.fieldPath);return new LA(l,a)}(t,s)):[];if(e.update){e.update.name;const s=Xr(t,e.update.name),i=new bt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const l=a.fieldPaths||[];return new jt(l.map(u=>Je.fromServerFormat(u)))}(e.updateMask);return new Wn(s,i,o,n,r)}return new bi(s,i,n,r)}if(e.delete){const s=Xr(t,e.delete);return new wu(s,n)}if(e.verify){const s=Xr(t,e.verify);return new Rb(s,n)}return le()}function eD(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(r,s){let i=r.updateTime?zt(r.updateTime):zt(s);return i.isEqual(fe.min())&&(i=zt(s)),new BA(i,r.transformResults||[])}(n,e))):[]}function jb(t,e){return{documents:[mh(t,e.path)]}}function zb(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=mh(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=mh(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length===0)return;const u=l.map(c=>function(h){if(h.op==="=="){if(mm(h.value))return{unaryFilter:{field:Ds(h.field),op:"IS_NAN"}};if(gm(h.value))return{unaryFilter:{field:Ds(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(mm(h.value))return{unaryFilter:{field:Ds(h.field),op:"IS_NOT_NAN"}};if(gm(h.value))return{unaryFilter:{field:Ds(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ds(h.field),op:rD(h.op),value:h.value}}}(c));return u.length===1?u[0]:{compositeFilter:{op:"AND",filters:u}}}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(u=>function(c){return{field:Ds(c.field),direction:nD(c.dir)}}(u))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=function(l,u){return l.gt||gu(u)?u:{value:u}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function Hb(t){let e=qb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ye(r===1);const c=n.from[0];c.allDescendants?s=c.collectionId:e=e.child(c.collectionId)}let i=[];n.where&&(i=Kb(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(h){return new Ws(qs(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(c)));let a=null;n.limit&&(a=function(c){let h;return h=typeof c=="object"?c.value:c,gu(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(c){const h=!!c.before,d=c.values||[];return new oi(d,h)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const h=!c.before,d=c.values||[];return new oi(d,h)}(n.endAt)),AA(e,s,o,i,a,"F",l,u)}function tD(t,e){const n=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return le()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function Kb(t){return t?t.unaryFilter!==void 0?[iD(t)]:t.fieldFilter!==void 0?[sD(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>Kb(e)).reduce((e,n)=>e.concat(n)):le():[]}function nD(t){return WA[t]}function rD(t){return YA[t]}function Ds(t){return{fieldPath:t.canonicalString()}}function qs(t){return Je.fromServerFormat(t.fieldPath)}function sD(t){return It.create(qs(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(t.fieldFilter.op),t.fieldFilter.value)}function iD(t){switch(t.unaryFilter.op){case"IS_NAN":const e=qs(t.unaryFilter.field);return It.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=qs(t.unaryFilter.field);return It.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=qs(t.unaryFilter.field);return It.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=qs(t.unaryFilter.field);return It.create(s,"!=",{nullValue:"NULL_VALUE"});default:return le()}}function oD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Gb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Om(e)),e=aD(t.get(n),e);return Om(e)}function aD(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function Om(t){return t+""}function In(t){const e=t.length;if(ye(e>=2),e===2)return ye(t.charAt(0)===""&&t.charAt(1)===""),Re.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&le(),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:le()}i=o+2}return new Re(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(t,e){return[t,Mt(e)]}function Wb(t,e,n){return[t,Mt(e),n]}const lD={},uD=["prefixPath","collectionGroup","readTime","documentId"],cD=["prefixPath","collectionGroup","documentId"],hD=["collectionGroup","readTime","prefixPath","documentId"],dD=["canonicalId","targetId"],fD=["targetId","path"],gD=["path","targetId"],mD=["collectionId","parent"],pD=["indexId","uid"],vD=["uid","sequenceNumber"],yD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wD=["indexId","uid","orderedDocumentKey"],bD=["userId","collectionPath","documentId"],_D=["userId","collectionPath","largestBatchId"],ED=["userId","collectionGroup","largestBatchId"],Yb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ID=[...Yb,"documentOverlays"],Qb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Xb=Qb,TD=[...Xb,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh extends db{constructor(e,n){super(),this.ie=e,this.currentSequenceNumber=n}}function ut(t,e){const n=be(t);return Un.O(n.ie,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&UA(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=so(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=so(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Nb();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=Ab(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Te())}isEqual(e){return this.batchId===e.batchId&&ii(this.mutations,e.mutations,(n,r)=>Sm(n,r))&&ii(this.baseMutations,e.baseMutations,(n,r)=>Sm(n,r))}}class Ud{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ye(e.mutations.length===r.length);let s=zA;const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Ud(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n,r,s,i=fe.min(),o=fe.min(),a=lt.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new gr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this.re=e}}function SD(t,e){let n;if(e.document)n=JA(t.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=J.fromSegments(e.noDocument.path),s=fs(e.noDocument.readTime);n=je.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return le();{const r=J.fromSegments(e.unknownDocument.path),s=fs(e.unknownDocument.version);n=je.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(r){const s=new ze(r[0],r[1]);return fe.fromTimestamp(s)}(e.readTime)),n}function Pm(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:kl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,i){return{name:Tl(s,i.key),fields:i.data.value.mapValue.fields,updateTime:Mo(s,i.version.toTimestamp())}}(t.re,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ds(e.version)};else{if(!e.isUnknownDocument())return le();r.unknownDocument={path:n.path.toArray(),version:ds(e.version)}}return r}function kl(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ds(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fs(t){const e=new ze(t.seconds,t.nanoseconds);return fe.fromTimestamp(e)}function qr(t,e){const n=(e.baseMutations||[]).map(i=>vh(t.re,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>vh(t.re,i)),s=ze.fromMillis(e.localWriteTimeMs);return new Bd(e.batchId,s,n,r)}function zi(t){const e=fs(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?fs(t.lastLimboFreeSnapshotVersion):fe.min();let r;var s;return t.query.documents!==void 0?(ye((s=t.query).documents.length===1),r=dn(mu(qb(s.documents[0])))):r=function(i){return dn(Hb(i))}(t.query),new gr(r,t.targetId,0,t.lastListenSequenceNumber,e,n,lt.fromBase64String(t.resumeToken))}function Zb(t,e){const n=ds(e.snapshotVersion),r=ds(e.lastLimboFreeSnapshotVersion);let s;s=El(e.target)?jb(t.re,e.target):zb(t.re,e.target);const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:hs(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function e0(t){const e=Hb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fh(e,e.limit,"L"):e}function lc(t,e){return new Vd(e.largestBatchId,vh(t.re,e.overlayMutation))}function Nm(t,e){const n=e.path.lastSegment();return[t,Mt(e.path.popLast()),n]}function Lm(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:ds(r.readTime),documentKey:Mt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{getBundleMetadata(e,n){return Fm(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:fs(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return Fm(e).put({bundleId:(r=n).id,createTime:ds(zt(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return Bm(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:e0(s.bundledQuery),readTime:fs(s.readTime)};var s})}saveNamedQuery(e,n){return Bm(e).put(function(r){return{name:r.name,readTime:ds(zt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function Fm(t){return ut(t,"bundles")}function Bm(t){return ut(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n){this.It=e,this.userId=n}static oe(e,n){const r=n.uid||"";return new _u(e,r)}getOverlay(e,n){return Ai(e).get(Nm(this.userId,n)).next(r=>r?lc(this.It,r):null)}getOverlays(e,n){const r=En();return k.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new Vd(n,o);s.push(this.ue(e,a))}),k.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(Mt(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Ai(e).Y("collectionPathOverlayIndex",a))}),k.waitFor(i)}getOverlaysForCollection(e,n,r){const s=En(),i=Mt(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Ai(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=lc(this.It,l);s.set(u.getKey(),u)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=En();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ai(e).Z({index:"collectionGroupOverlayIndex",range:a},(l,u,c)=>{const h=lc(this.It,u);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):c.done()}).next(()=>i)}ue(e,n){return Ai(e).put(function(r,s,i){const[o,a,l]=Nm(s,i.mutation.key);return{userId:s,collectionPath:a,documentId:l,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:Sl(r.re,i.mutation)}}(this.It,this.userId,n))}}function Ai(t){return ut(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(){}ce(e,n){this.ae(e,n),n.he()}ae(e,n){if("nullValue"in e)this.le(n,5);else if("booleanValue"in e)this.le(n,10),n.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(n,15),n.fe(Ge(e.integerValue));else if("doubleValue"in e){const r=Ge(e.doubleValue);isNaN(r)?this.le(n,13):(this.le(n,15),Co(r)?n.fe(0):n.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(n,20),typeof r=="string"?n.de(r):(n.de(`${r.seconds||""}`),n.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,n),this.we(n);else if("bytesValue"in e)this.le(n,30),n.me(ls(e.bytesValue)),this.we(n);else if("referenceValue"in e)this.ge(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(n,45),n.fe(r.latitude||0),n.fe(r.longitude||0)}else"mapValue"in e?pb(e)?this.le(n,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,n),this.we(n)):"arrayValue"in e?(this.pe(e.arrayValue,n),this.we(n)):le()}_e(e,n){this.le(n,25),this.Ie(e,n)}Ie(e,n){n.de(e)}ye(e,n){const r=e.fields||{};this.le(n,55);for(const s of Object.keys(r))this._e(s,n),this.ae(r[s],n)}pe(e,n){const r=e.values||[];this.le(n,50);for(const s of r)this.ae(s,n)}ge(e,n){this.le(n,37),J.fromName(e).path.forEach(r=>{this.le(n,60),this.Ie(r,n)})}le(e,n){e.fe(n)}we(e){e.fe(2)}}$r.Te=new $r;function CD(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function Um(t){const e=64-function(n){let r=0;for(let s=0;s<8;++s){const i=CD(255&n[s]);if(r+=i,i!==8)break}return r}(t);return Math.ceil(e/8)}class xD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ae(r.value),r=n.next();this.Re()}be(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Pe(r.value),r=n.next();this.ve()}Ve(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const s=n.codePointAt(0);this.Ae(240|s>>>18),this.Ae(128|63&s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s)}}this.Re()}Se(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const s=n.codePointAt(0);this.Pe(240|s>>>18),this.Pe(128|63&s>>>12),this.Pe(128|63&s>>>6),this.Pe(128|63&s)}}this.ve()}De(e){const n=this.Ce(e),r=Um(n);this.xe(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Ne(e){const n=this.Ce(e),r=Um(n);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const n=function(s){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,s,!1),new Uint8Array(i.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ae(e){const n=255&e;n===0?(this.Me(0),this.Me(255)):n===255?(this.Me(255),this.Me(0)):this.Me(n)}Pe(e){const n=255&e;n===0?(this.Fe(0),this.Fe(255)):n===255?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class AD{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class DD{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class Di{constructor(){this.Be=new xD,this.Le=new AD(this.Be),this.Ue=new DD(this.Be)}seed(e){this.Be.seed(e)}qe(e){return e===0?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Ke(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new jr(this.indexId,this.documentKey,this.arrayValue,r)}}function Or(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=Vm(t.arrayValue,e.arrayValue),n!==0?n:(n=Vm(t.directionalValue,e.directionalValue),n!==0?n:J.comparator(t.documentKey,e.documentKey)))}function Vm(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const n of e.filters){const r=n;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const n=ch(e);if(n!==void 0&&!this.ze(n))return!1;const r=Lr(e);let s=0,i=0;for(;s<r.length&&this.ze(r[s]);++s);if(s===r.length)return!0;if(this.je!==void 0){const o=r[s];if(!this.He(this.je,o)||!this.Je(this.Ge[i++],o))return!1;++s}for(;s<r.length;++s){const o=r[s];if(i>=this.Ge.length||!this.Je(this.Ge[i++],o))return!1}return!0}ze(e){for(const n of this.Qe)if(this.He(n,e))return!0;return!1}He(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}Je(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.Ye=new qd}addToCollectionParentIndex(e,n){return this.Ye.add(n),k.resolve()}getCollectionParents(e,n){return k.resolve(this.Ye.getEntries(n))}addFieldIndex(e,n){return k.resolve()}deleteFieldIndex(e,n){return k.resolve()}getDocumentsMatchingTarget(e,n){return k.resolve(null)}getIndexType(e,n){return k.resolve(0)}getFieldIndexes(e,n){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,n){return k.resolve(Gt.min())}getMinOffsetFromCollectionGroup(e,n){return k.resolve(Gt.min())}updateCollectionGroup(e,n,r){return k.resolve()}updateIndexEntries(e,n){return k.resolve()}}class qd{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Me(Re.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Me(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=new Uint8Array(0);class MD{constructor(e,n){this.user=e,this.databaseId=n,this.Xe=new qd,this.Ze=new kr(r=>hs(r),(r,s)=>Xo(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Xe.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.Xe.add(n)});const i={collectionId:r,parent:Mt(s)};return qm(e).put(i)}return k.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[lb(n),""],!1,!0);return qm(e).W(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(In(o.parent))}return r})}addFieldIndex(e,n){const r=Ea(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=Oi(e);return i.next(a=>{o.put(Lm(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=Ea(e),s=Oi(e),i=Ri(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=Ri(e);let s=!0;const i=new Map;return k.forEach(this.tn(n),o=>this.en(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Te();const a=[];return k.forEach(i,(l,u)=>{var c;z("IndexedDbIndexManager",`Using index ${c=l,`id=${c.indexId}|cg=${c.collectionGroup}|f=${c.fields.map(b=>`${b.fieldPath}:${b.kind}`).join(",")}`} to execute ${hs(n)}`);const h=function(b,D){const N=ch(D);if(N===void 0)return null;for(const w of Il(b,N.fieldPath))switch(w.op){case"array-contains-any":return w.value.arrayValue.values||[];case"array-contains":return[w.value]}return null}(u,l),d=function(b,D){const N=new Map;for(const w of Lr(D))for(const I of Il(b,w.fieldPath))switch(I.op){case"==":case"in":N.set(w.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return N.set(w.fieldPath.canonicalString(),I.value),Array.from(N.values())}return null}(u,l),f=function(b,D){const N=[];let w=!0;for(const I of Lr(D)){const T=I.kind===0?wm(b,I.fieldPath,b.startAt):bm(b,I.fieldPath,b.startAt);N.push(T.value),w&&(w=T.inclusive)}return new oi(N,w)}(u,l),g=function(b,D){const N=[];let w=!0;for(const I of Lr(D)){const T=I.kind===0?bm(b,I.fieldPath,b.endAt):wm(b,I.fieldPath,b.endAt);N.push(T.value),w&&(w=T.inclusive)}return new oi(N,w)}(u,l),E=this.nn(l,u,f),v=this.nn(l,u,g),_=this.sn(l,u,d),p=this.rn(l.indexId,h,E,f.inclusive,v,g.inclusive,_);return k.forEach(p,b=>r.J(b,n.limit).next(D=>{D.forEach(N=>{const w=J.fromSegments(N.documentKey);o.has(w)||(o=o.add(w),a.push(w))})}))}).next(()=>a)}return k.resolve(null)})}tn(e){let n=this.Ze.get(e);return n||(n=[e],this.Ze.set(e,n),n)}rn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),u=l/(n!=null?n.length:1),c=[];for(let h=0;h<l;++h){const d=n?this.on(n[h/u]):_a,f=this.un(e,d,r[h%u],s),g=this.cn(e,d,i[h%u],o),E=a.map(v=>this.un(e,d,v,!0));c.push(...this.createRange(f,g,E))}return c}un(e,n,r,s){const i=new jr(e,J.empty(),n,r);return s?i:i.Ke()}cn(e,n,r,s){const i=new jr(e,J.empty(),n,r);return s?i.Ke():i}en(e,n){const r=new RD(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.We(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;return k.forEach(this.tn(n),s=>this.en(e,s).next(i=>{i?r!==0&&i.fields.length<function(o){let a=new Me(Je.comparator),l=!1;for(const u of o.filters){const c=u;c.field.isKeyField()||(c.op==="array-contains"||c.op==="array-contains-any"?l=!0:a=a.add(c.field))}for(const u of o.orderBy)u.field.isKeyField()||(a=a.add(u.field));return a.size+(l?1:0)}(s)&&(r=1):r=0})).next(()=>r)}an(e,n){const r=new Di;for(const s of Lr(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.qe(s.kind);$r.Te.ce(i,o)}return r.$e()}on(e){const n=new Di;return $r.Te.ce(e,n.qe(0)),n.$e()}hn(e,n){const r=new Di;return $r.Te.ce(Nd(this.databaseId,n),r.qe(function(s){const i=Lr(s);return i.length===0?0:i[i.length-1].kind}(e))),r.$e()}sn(e,n,r){if(r===null)return[];let s=[];s.push(new Di);let i=0;for(const o of Lr(e)){const a=r[i++];for(const l of s)if(this.ln(n,o.fieldPath)&&Ao(a))s=this.fn(s,o,a);else{const u=l.qe(o.kind);$r.Te.ce(a,u)}}return this.dn(s)}nn(e,n,r){return this.sn(e,n,r.position)}dn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].$e();return n}fn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new Di;l.seed(a.$e()),$r.Te.ce(o,l.qe(n.kind)),i.push(l)}return i}ln(e,n){return!!e.filters.find(r=>r instanceof It&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Ea(e),s=Oi(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(i=>{const o=[];return k.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(u,c){const h=c?new _l(c.sequenceNumber,new Gt(fs(c.readTime),new J(In(c.documentKey)),c.largestBatchId)):_l.empty(),d=u.fields.map(([f,g])=>new lA(Je.fromServerFormat(f),g));return new ub(u.indexId,u.collectionGroup,d,h)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Ee(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=Ea(e),i=Oi(e);return this._n(e).next(o=>s.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>k.forEach(a,l=>i.put(Lm(l.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return k.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?k.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),k.forEach(a,l=>this.wn(e,s,l).next(u=>{const c=this.mn(i,l);return u.isEqual(c)?k.resolve():this.gn(e,i,l,u,c)}))))})}yn(e,n,r,s){return Ri(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.hn(r,n.key),documentKey:n.key.path.toArray()})}pn(e,n,r,s){return Ri(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.hn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=Ri(e);let i=new Me(Or);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,n)])},(o,a)=>{i=i.add(new jr(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}mn(e,n){let r=new Me(Or);const s=this.an(n,e);if(s==null)return r;const i=ch(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Ao(o))for(const a of o.arrayValue.values||[])r=r.add(new jr(n.indexId,e.key,this.on(a),s))}else r=r.add(new jr(n.indexId,e.key,_a,s));return r}gn(e,n,r,s,i){z("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,l,u,c,h){const d=a.getIterator(),f=l.getIterator();let g=As(d),E=As(f);for(;g||E;){let v=!1,_=!1;if(g&&E){const p=u(g,E);p<0?_=!0:p>0&&(v=!0)}else g!=null?_=!0:v=!0;v?(c(E),E=As(f)):_?(h(g),g=As(d)):(g=As(d),E=As(f))}}(s,i,Or,a=>{o.push(this.yn(e,n,r,a))},a=>{o.push(this.pn(e,n,r,a))}),k.waitFor(o)}_n(e){let n=1;return Oi(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Or(o,a)).filter((o,a,l)=>!a||Or(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Or(o,e),l=Or(o,n);if(a===0)s[0]=e.Ke();else if(a>0&&l<0)s.push(o),s.push(o.Ke());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2)i.push(IDBKeyRange.bound([s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,_a,[]],[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,_a,[]]));return i}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next($m)}getMinOffset(e,n){return k.mapArray(this.tn(n),r=>this.en(e,r).next(s=>s||le())).next($m)}}function qm(t){return ut(t,"collectionParents")}function Ri(t){return ut(t,"indexEntries")}function Ea(t){return ut(t,"indexConfiguration")}function Oi(t){return ut(t,"indexState")}function $m(t){ye(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;Md(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Gt(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Nt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Nt(e,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Z({range:o},(c,h,d)=>(a++,d.delete()));i.push(l.next(()=>{ye(a===1)}));const u=[];for(const c of n.mutations){const h=Wb(e,c.key.path,n.batchId);i.push(s.delete(h)),u.push(c.key)}return k.waitFor(i).next(()=>u)}function Cl(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw le();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(41943040,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);class Eu{constructor(e,n,r,s){this.userId=e,this.It=n,this.indexManager=r,this.referenceDelegate=s,this.In={}}static oe(e,n,r,s){ye(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Eu(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Jn(e).Z({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=Bs(e),o=Jn(e);return o.add({}).next(a=>{ye(typeof a=="number");const l=new Bd(a,n,r,s),u=function(d,f,g){const E=g.baseMutations.map(_=>Sl(d.re,_)),v=g.mutations.map(_=>Sl(d.re,_));return{userId:f,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:E,mutations:v}}(this.It,this.userId,l),c=[];let h=new Me((d,f)=>Ee(d.canonicalString(),f.canonicalString()));for(const d of s){const f=Wb(this.userId,d.key.path,a);h=h.add(d.key.path.popLast()),c.push(o.put(u)),c.push(i.put(f,lD))}return h.forEach(d=>{c.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.In[a]=l.keys()}),k.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return Jn(e).get(n).next(r=>r?(ye(r.userId===this.userId),qr(this.It,r)):null)}Tn(e,n){return this.In[n]?k.resolve(this.In[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.In[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Jn(e).Z({index:"userMutationsIndex",range:s},(o,a,l)=>{a.userId===this.userId&&(ye(a.batchId>=r),i=qr(this.It,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Jn(e).Z({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Jn(e).W("userMutationsIndex",n).next(r=>r.map(s=>qr(this.It,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=$a(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Bs(e).Z({range:s},(o,a,l)=>{const[u,c,h]=o,d=In(c);if(u===this.userId&&n.path.isEqual(d))return Jn(e).get(h).next(f=>{if(!f)throw le();ye(f.userId===this.userId),i.push(qr(this.It,f))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Me(Ee);const s=[];return n.forEach(i=>{const o=$a(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=Bs(e).Z({range:a},(u,c,h)=>{const[d,f,g]=u,E=In(f);d===this.userId&&i.path.isEqual(E)?r=r.add(g):h.done()});s.push(l)}),k.waitFor(s).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=$a(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Me(Ee);return Bs(e).Z({range:o},(l,u,c)=>{const[h,d,f]=l,g=In(d);h===this.userId&&r.isPrefixOf(g)?g.length===s&&(a=a.add(f)):c.done()}).next(()=>this.En(e,a))}En(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Jn(e).get(i).next(o=>{if(o===null)throw le();ye(o.userId===this.userId),r.push(qr(this.It,o))}))}),k.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return t0(e.ie,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.An(n.batchId)}),k.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return k.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return Bs(e).Z({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=In(i[1]);s.push(l)}else a.done()}).next(()=>{ye(s.length===0)})})}containsKey(e,n){return n0(e,this.userId,n)}Rn(e){return r0(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function n0(t,e,n){const r=$a(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Bs(t).Z({range:i,X:!0},(a,l,u)=>{const[c,h,d]=a;c===e&&h===s&&(o=!0),u.done()}).next(()=>o)}function Jn(t){return ut(t,"mutations")}function Bs(t){return ut(t,"documentMutations")}function r0(t){return ut(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new gs(0)}static vn(){return new gs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,n){this.referenceDelegate=e,this.It=n}allocateTargetId(e){return this.Vn(e).next(n=>{const r=new gs(n.highestTargetId);return n.highestTargetId=r.next(),this.Sn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(n=>fe.fromTimestamp(new ze(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Sn(e,s)))}addTargetData(e,n){return this.Dn(e,n).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(n,r),this.Sn(e,r))))}updateTargetData(e,n){return this.Dn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Rs(e).delete(n.targetId)).next(()=>this.Vn(e)).next(r=>(ye(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return Rs(e).Z((o,a)=>{const l=zi(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>k.waitFor(i)).next(()=>s)}forEachTarget(e,n){return Rs(e).Z((r,s)=>{const i=zi(s);n(i)})}Vn(e){return zm(e).get("targetGlobalKey").next(n=>(ye(n!==null),n))}Sn(e,n){return zm(e).put("targetGlobalKey",n)}Dn(e,n){return Rs(e).put(Zb(this.It,n))}Cn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=hs(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Rs(e).Z({range:s,index:"queryTargetsIndex"},(o,a,l)=>{const u=zi(a);Xo(n,u.target)&&(i=u,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=rr(e);return n.forEach(o=>{const a=Mt(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),k.waitFor(s)}removeMatchingKeys(e,n,r){const s=rr(e);return k.forEach(n,i=>{const o=Mt(i.path);return k.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=rr(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=rr(e);let i=Te();return s.Z({range:r,X:!0},(o,a,l)=>{const u=In(o[1]),c=new J(u);i=i.add(c)}).next(()=>i)}containsKey(e,n){const r=Mt(n.path),s=IDBKeyRange.bound([r],[lb(r)],!1,!0);let i=0;return rr(e).Z({index:"documentTargetsIndex",X:!0,range:s},([o,a],l,u)=>{o!==0&&(i++,u.done())}).next(()=>i>0)}se(e,n){return Rs(e).get(n).next(r=>r?zi(r):null)}}function Rs(t){return ut(t,"targets")}function zm(t){return ut(t,"targetGlobal")}function rr(t){return ut(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm([t,e],[n,r]){const s=Ee(t,n);return s===0?Ee(e,r):s}class ND{constructor(e){this.xn=e,this.buffer=new Me(Hm),this.Nn=0}kn(){return++this.Nn}Mn(e){const n=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Hm(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class LD{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.On=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return this.On!==null}Fn(e){z("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.On=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Sr(n)?z("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await _s(n)}await this.Fn(3e5)})}}class FD{constructor(e,n){this.$n=e,this.params=n}calculateTargetCount(e,n){return this.$n.Bn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return k.resolve(Qt.at);const r=new ND(n);return this.$n.forEachTarget(e,s=>r.Mn(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>r.Mn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.$n.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.$n.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(jm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jm):this.Un(e,n))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,n){let r,s,i,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),lh()<=Ae.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,n){this.db=e,this.garbageCollector=function(r,s){return new FD(r,s)}(this,n)}Bn(e){const n=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}qn(e){let n=0;return this.Ln(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Ln(e,n){return this.Kn(e,(r,s)=>n(s))}addReference(e,n,r){return Ia(e,r)}removeReference(e,n,r){return Ia(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Ia(e,n)}Gn(e,n){return function(r,s){let i=!1;return r0(r).tt(o=>n0(r,o,s).next(a=>(a&&(i=!0),k.resolve(!a)))).next(()=>i)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Kn(e,(o,a)=>{if(a<=n){const l=this.Gn(e,o).next(u=>{if(!u)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,fe.min()),rr(e).delete([0,Mt(o.path)])))});s.push(l)}}).next(()=>k.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Ia(e,n)}Kn(e,n){const r=rr(e);let s,i=Qt.at;return r.Z({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(i!==Qt.at&&n(new J(In(s)),i),i=u,s=l):i=Qt.at}).next(()=>{i!==Qt.at&&n(new J(In(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ia(t,e){return rr(t).put(function(n,r){return{targetId:0,path:Mt(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(){this.changes=new kr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,je.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?k.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Mr(e).put(r)}removeEntry(e,n,r){return Mr(e).delete(function(s,i){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],kl(i),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Qn(e,r)))}getEntry(e,n){let r=je.newInvalidDocument(n);return Mr(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Mi(n))},(s,i)=>{r=this.jn(n,i)}).next(()=>r)}Wn(e,n){let r={size:0,document:je.newInvalidDocument(n)};return Mr(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Mi(n))},(s,i)=>{r={document:this.jn(n,i),size:Cl(i)}}).next(()=>r)}getEntries(e,n){let r=qt();return this.zn(e,n,(s,i)=>{const o=this.jn(s,i);r=r.insert(s,o)}).next(()=>r)}Hn(e,n){let r=qt(),s=new tt(J.comparator);return this.zn(e,n,(i,o)=>{const a=this.jn(i,o);r=r.insert(i,a),s=s.insert(i,Cl(o))}).next(()=>({documents:r,Jn:s}))}zn(e,n,r){if(n.isEmpty())return k.resolve();let s=new Me(Wm);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Mi(s.first()),Mi(s.last())),o=s.getIterator();let a=o.getNext();return Mr(e).Z({index:"documentKeyIndex",range:i},(l,u,c)=>{const h=J.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&Wm(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?c.j(Mi(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getAllFromCollection(e,n,r){const s=[n.popLast().toArray(),n.lastSegment(),kl(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],i=[n.popLast().toArray(),n.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mr(e).W(IDBKeyRange.bound(s,i,!0)).next(o=>{let a=qt();for(const l of o){const u=this.jn(J.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);a=a.insert(u.key,u)}return a})}getAllFromCollectionGroup(e,n,r,s){let i=qt();const o=Gm(n,r),a=Gm(n,Gt.max());return Mr(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,c)=>{const h=this.jn(J.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(h.key,h),i.size===s&&c.done()}).next(()=>i)}newChangeBuffer(e){return new VD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Km(e).get("remoteDocumentGlobalKey").next(n=>(ye(!!n),n))}Qn(e,n){return Km(e).put("remoteDocumentGlobalKey",n)}jn(e,n){if(n){const r=SD(this.It,n);if(!(r.isNoDocument()&&r.version.isEqual(fe.min())))return r}return je.newInvalidDocument(e)}}function i0(t){return new UD(t)}class VD extends s0{constructor(e,n){super(),this.Yn=e,this.trackRemovals=n,this.Xn=new kr(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new Me((i,o)=>Ee(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Xn.get(i);if(n.push(this.Yn.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=Pm(this.Yn.It,o);s=s.add(i.path.popLast()),r+=Cl(l)-a.size,n.push(this.Yn.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=Pm(this.Yn.It,o.convertToNoDocument(fe.min()));n.push(this.Yn.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Yn.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Yn.updateMetadata(e,r)),k.waitFor(n)}getFromCache(e,n){return this.Yn.Wn(e,n).next(r=>(this.Xn.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Yn.Hn(e,n).next(({documents:r,Jn:s})=>(s.forEach((i,o)=>{this.Xn.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function Km(t){return ut(t,"remoteDocumentGlobal")}function Mr(t){return ut(t,"remoteDocumentsV14")}function Mi(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Gm(t,e){const n=e.documentKey.path.toArray();return[t,kl(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Wm(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=Ee(n[i],r[i]),s)return s;return s=Ee(n.length,r.length),s||(s=Ee(n[n.length-2],r[r.length-2]),s||Ee(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.getBaseDocument(e,n,r))).next(s=>(r!==null&&so(r.mutation,s,jt.empty(),ze.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Te()){const s=En();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ji();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=En();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Te()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=qt();const o=io(),a=io();return n.forEach((l,u)=>{const c=r.get(u.key);s.has(u.key)&&(c===void 0||c.mutation instanceof Wn)?i=i.insert(u.key,u):c!==void 0&&(o.set(u.key,c.mutation.getFieldMask()),so(c.mutation,u,c.mutation.getFieldMask(),ze.now()))}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new qD(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=io();let s=new tt((o,a)=>o-a),i=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||jt.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(s.get(a.batchId)||Te()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=Nb();c.forEach(d=>{if(!i.has(d)){const f=Ab(n.get(d),r.get(d));f!==null&&h.set(d,f),i=i.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return k.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return J.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):DA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):k.resolve(En());let a=-1,l=i;return o.next(u=>k.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(c)?k.resolve():this.getBaseDocument(e,c,h).next(d=>{l=l.insert(c,d)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Te())).next(c=>({batchId:a,changes:Pb(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=ji();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=ji();return this.indexManager.getCollectionParents(e,s).next(o=>k.forEach(o,a=>{const l=function(u,c){return new Jo(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(u=>{u.forEach((c,h)=>{i=i.insert(c,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,n.path,r).next(i=>(s=i,this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId))).next(i=>{i.forEach((a,l)=>{const u=l.getKey();s.get(u)===null&&(s=s.insert(u,je.newInvalidDocument(u)))});let o=ji();return s.forEach((a,l)=>{const u=i.get(a);u!==void 0&&so(u.mutation,l,jt.empty(),ze.now()),Ld(n,l)&&(o=o.insert(a,l))}),o})}getBaseDocument(e,n,r){return r===null||r.mutation.type===1?this.remoteDocumentCache.getEntry(e,n):k.resolve(je.newInvalidDocument(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return k.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var r;return this.Zn.set(n.id,{id:(r=n).id,version:r.version,createTime:zt(r.createTime)}),k.resolve()}getNamedQuery(e,n){return k.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,function(r){return{name:r.name,query:e0(r.bundledQuery),readTime:zt(r.readTime)}}(n)),k.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(){this.overlays=new tt(J.comparator),this.es=new Map}getOverlay(e,n){return k.resolve(this.overlays.get(n))}getOverlays(e,n){const r=En();return k.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ue(e,n,i)}),k.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.es.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.es.delete(r)),k.resolve()}getOverlaysForCollection(e,n,r){const s=En(),i=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return k.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new tt((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=i.get(u.largestBatchId);c===null&&(c=En(),i=i.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=En(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=s)););return k.resolve(a)}ue(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Vd(n,r));let i=this.es.get(n);i===void 0&&(i=Te(),this.es.set(n,i)),this.es.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(){this.ns=new Me(st.ss),this.rs=new Me(st.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const r=new st(e,n);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.cs(new st(e,n))}hs(e,n){e.forEach(r=>this.removeReference(r,n))}ls(e){const n=new J(new Re([])),r=new st(n,e),s=new st(n,e+1),i=[];return this.rs.forEachInRange([r,s],o=>{this.cs(o),i.push(o.key)}),i}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new J(new Re([])),r=new st(n,e),s=new st(n,e+1);let i=Te();return this.rs.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new st(e,0),r=this.ns.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class st{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return J.comparator(e.key,n.key)||Ee(e._s,n._s)}static os(e,n){return Ee(e._s,n._s)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Me(st.ss)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Bd(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.gs=this.gs.add(new st(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(o)}lookupMutationBatch(e,n){return k.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ps(r),i=s<0?0:s;return k.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new st(n,0),s=new st(n,Number.POSITIVE_INFINITY),i=[];return this.gs.forEachInRange([r,s],o=>{const a=this.ys(o._s);i.push(a)}),k.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Me(Ee);return n.forEach(s=>{const i=new st(s,0),o=new st(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([i,o],a=>{r=r.add(a._s)})}),k.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new st(new J(i),0);let a=new Me(Ee);return this.gs.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l._s)),!0)},o),k.resolve(this.Is(a))}Is(e){const n=[];return e.forEach(r=>{const s=this.ys(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.Ts(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.gs;return k.forEach(n.mutations,s=>{const i=new st(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,n){const r=new st(n,0),s=this.gs.firstAfterOrEqual(r);return k.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Ts(e,n){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e){this.Es=e,this.docs=new tt(J.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Es(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return k.resolve(r?r.document.mutableCopy():je.newInvalidDocument(n))}getEntries(e,n){let r=qt();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():je.newInvalidDocument(s))}),k.resolve(r)}getAllFromCollection(e,n,r){let s=qt();const i=new J(n.child("")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||Md(cb(l),r)<=0||(s=s.insert(l.key,l.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(e,n,r,s){le()}As(e,n){return k.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new KD(this)}getSize(e){return k.resolve(this.size)}}class KD extends s0{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),k.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e){this.persistence=e,this.Rs=new kr(n=>hs(n),Xo),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.bs=0,this.Ps=new $d,this.targetCount=0,this.vs=gs.Pn()}forEachTarget(e,n){return this.Rs.forEach((r,s)=>n(s)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.bs&&(this.bs=n),k.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new gs(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,k.resolve()}updateTargetData(e,n){return this.Dn(n),k.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Rs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),k.waitFor(i).next(()=>s)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,n){const r=this.Rs.get(n)||null;return k.resolve(r)}addMatchingKeys(e,n,r){return this.Ps.us(n,r),k.resolve()}removeMatchingKeys(e,n,r){this.Ps.hs(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),k.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),k.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ps.ds(n);return k.resolve(r)}containsKey(e,n){return k.resolve(this.Ps.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new Qt(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new GD(this),this.indexManager=new OD,this.remoteDocumentCache=function(r){return new HD(r)}(r=>this.referenceDelegate.xs(r)),this.It=new Jb(n),this.Ns=new $D(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Vs[e.toKey()];return r||(r=new zD(n,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,r){z("MemoryPersistence","Starting transaction:",e);const s=new WD(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(i=>this.referenceDelegate.Ms(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Os(e,n){return k.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,n)))}}class WD extends db{constructor(e){super(),this.currentSequenceNumber=e}}class Iu{constructor(e){this.persistence=e,this.Fs=new $d,this.$s=null}static Bs(e){return new Iu(e)}get Ls(){if(this.$s)return this.$s;throw le()}addReference(e,n,r){return this.Fs.addReference(r,n),this.Ls.delete(r.toString()),k.resolve()}removeReference(e,n,r){return this.Fs.removeReference(r,n),this.Ls.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),k.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Ls.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}ks(){this.$s=new Set}Ms(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Ls,r=>{const s=J.fromPath(r);return this.Us(e,s).next(i=>{i||n.removeEntry(s,fe.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.Us(e,n).next(r=>{r?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}Us(e,n){return k.or([()=>k.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Os(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e){this.It=e}$(e,n,r,s){const i=new fu("createOrUpgrade",n);r<1&&s>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mm,{unique:!0}),a.createObjectStore("documentMutations")}(e),Ym(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=k.resolve();return r<3&&s>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),Ym(e)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fe.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",u)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(a,l){return l.store("mutations").W().next(u=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Mm,{unique:!0});const c=l.store("mutations"),h=u.map(d=>c.put(d));return k.waitFor(h)})}(e,i))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.qs(i))),r<6&&s>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(i)))),r<7&&s>=7&&(o=o.next(()=>this.Gs(i))),r<8&&s>=8&&(o=o.next(()=>this.Qs(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.js(i))),r<11&&s>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(a){const l=a.createObjectStore("documentOverlays",{keyPath:bD});l.createIndex("collectionPathOverlayIndex",_D,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",ED,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:uD});l.createIndex("documentKeyIndex",cD),l.createIndex("collectionGroupIndex",hD)}(e)).next(()=>this.Ws(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.zs(e,i))),r<15&&s>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:pD}).createIndex("sequenceNumberIndex",vD,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:yD}).createIndex("documentKeyIndex",wD,{unique:!1})}(e))),o}Ks(e){let n=0;return e.store("remoteDocuments").Z((r,s)=>{n+=Cl(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(s=>k.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>k.forEach(a,l=>{ye(l.userId===i.userId);const u=qr(this.It,l);return t0(e,i.userId,u).next(()=>{})}))}))}Gs(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.Z((o,a)=>{const l=new Re(o),u=function(c){return[0,Mt(c)]}(l);i.push(n.get(u).next(c=>c?k.resolve():(h=>n.put({targetId:0,path:Mt(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>k.waitFor(i))})}Qs(e,n){e.createObjectStore("collectionParents",{keyPath:mD});const r=n.store("collectionParents"),s=new qd,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Mt(l)})}};return n.store("remoteDocuments").Z({X:!0},(o,a)=>{const l=new Re(o);return i(l.popLast())}).next(()=>n.store("documentMutations").Z({X:!0},([o,a,l],u)=>{const c=In(a);return i(c.popLast())}))}js(e){const n=e.store("targets");return n.Z((r,s)=>{const i=zi(s),o=Zb(this.It,i);return n.put(o)})}Ws(e,n){const r=n.store("remoteDocuments"),s=[];return r.Z((i,o)=>{const a=n.store("remoteDocumentsV14"),l=(u=o,u.document?new J(Re.fromString(u.document.name).popFirst(5)):u.noDocument?J.fromSegments(u.noDocument.path):u.unknownDocument?J.fromSegments(u.unknownDocument.path):le()).path.toArray();var u;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>k.waitFor(s))}zs(e,n){const r=n.store("mutations"),s=i0(this.It),i=new a0(Iu.Bs,this.It.re);return r.W().next(o=>{const a=new Map;return o.forEach(l=>{var u;let c=(u=a.get(l.userId))!==null&&u!==void 0?u:Te();qr(this.It,l).keys().forEach(h=>c=c.add(h)),a.set(l.userId,c)}),k.forEach(a,(l,u)=>{const c=new Ct(u),h=_u.oe(this.It,c),d=i.getIndexManager(c),f=Eu.oe(c,this.It,d,i.referenceDelegate);return new o0(s,f,h,d).recalculateAndSaveOverlaysForDocumentKeys(new yh(n,Qt.at),l).next()})})}}function Ym(t){t.createObjectStore("targetDocuments",{keyPath:fD}).createIndex("documentTargetsIndex",gD,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",dD,{unique:!0}),t.createObjectStore("targetGlobal")}const uc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jd{constructor(e,n,r,s,i,o,a,l,u,c,h=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Hs=i,this.window=o,this.document=a,this.Js=u,this.Ys=c,this.Xs=h,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=d=>Promise.resolve(),!jd.C())throw new ne(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new BD(this,s),this.ii=n+"main",this.It=new Jb(l),this.ri=new Un(this.ii,this.Xs,new YD(this.It)),this.Cs=new PD(this.referenceDelegate,this.It),this.remoteDocumentCache=i0(this.It),this.Ns=new kD,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,c===!1&&Dt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ne(B.FAILED_PRECONDITION,uc);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Qt(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){return this.si=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(async()=>{this.started&&await this.ui()}))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ta(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(n=>this.isPrimary&&!n?this._i(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Sr(e))return z("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return z("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Pi(e).get("owner").next(n=>k.resolve(this.mi(n)))}gi(e){return Ta(e).delete(this.clientId)}async yi(){if(this.isPrimary&&!this.pi(this.ni,18e5)){this.ni=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=ut(n,"clientMetadata");return r.W().next(s=>{const i=this.Ii(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return k.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.oi)for(const n of e)this.oi.removeItem(this.Ti(n.clientId))}}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?k.resolve(!0):Pi(e).get("owner").next(n=>{if(n!==null&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)){if(this.mi(n)&&this.networkEnabled)return!0;if(!this.mi(n)){if(!n.allowTabSynchronization)throw new ne(B.FAILED_PRECONDITION,uc);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ta(e).W().next(r=>this.Ii(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&z("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),await this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new yh(e,Qt.at);return this._i(n).next(()=>this.gi(n))}),this.ri.close(),this.Pi()}Ii(e,n){return e.filter(r=>this.pi(r.updateTimeMs,n)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Ta(e).W().next(n=>this.Ii(n,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,n){return Eu.oe(e,this.It,n,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new MD(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return _u.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,n,r){z("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=(o=this.Xs)===15?TD:o===14?Xb:o===13?Qb:o===12?ID:o===11?Yb:void le();var o;let a;return this.ri.runTransaction(e,s,i,l=>(a=new yh(l,this.Ss?this.Ss.next():Qt.at),n==="readwrite-primary"?this.fi(a).next(u=>!!u||this.di(a)).next(u=>{if(!u)throw Dt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new ne(B.FAILED_PRECONDITION,hb);return r(a)}).next(u=>this.wi(a).next(()=>u)):this.Vi(a).next(()=>r(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Vi(e){return Pi(e).get("owner").next(n=>{if(n!==null&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)&&!this.mi(n)&&!(this.Ys||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ne(B.FAILED_PRECONDITION,uc)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Pi(e).put("owner",n)}static C(){return Un.C()}_i(e){const n=Pi(e);return n.get("owner").next(r=>this.mi(r)?(z("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):k.resolve())}pi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Dt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}ci(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground=this.document.visibilityState==="visible")}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Zs=()=>{this.Ai(),DC()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var n;try{const r=((n=this.oi)===null||n===void 0?void 0:n.getItem(this.Ti(e)))!==null;return z("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Dt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Dt("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Pi(t){return ut(t,"owner")}function Ta(t){return ut(t,"clientMetadata")}function QD(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Si=r,this.Di=s}static Ci(e,n){let r=Te(),s=Te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new zd(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,r,s){return this.ki(e,n).next(i=>i||this.Mi(e,n,s,r)).next(i=>i||this.Oi(e,n))}ki(e,n){if(Im(n))return k.resolve(null);let r=dn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=fh(n,null,"F"),r=dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Te(...i);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Fi(n,a);return this.$i(n,u,o,l.readTime)?this.ki(e,fh(n,null,"F")):this.Bi(e,u,n,l)}))})))}Mi(e,n,r,s){return Im(n)||s.isEqual(fe.min())?this.Oi(e,n):this.Ni.getDocuments(e,r).next(i=>{const o=this.Fi(n,i);return this.$i(n,o,r,s)?this.Oi(e,n):(lh()<=Ae.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),gh(n)),this.Bi(e,o,n,uA(s,-1)))})}Fi(e,n){let r=new Me(Eb(e));return n.forEach((s,i)=>{Ld(e,i)&&(r=r.add(i))}),r}$i(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Oi(e,n){return lh()<=Ae.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",gh(n)),this.Ni.getDocumentsMatchingQuery(e,n,Gt.min())}Bi(e,n,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n,r,s){this.persistence=e,this.Li=n,this.It=s,this.Ui=new tt(Ee),this.qi=new kr(i=>hs(i),Xo),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o0(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ui))}}function u0(t,e,n,r){return new XD(t,e,n,r)}async function c0(t,e){const n=be(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Qi(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Te();for(const u of s){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of i){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({ji:u,removedBatchIds:o,addedBatchIds:a}))})})}function JD(t,e){const n=be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,h=c.keys();let d=k.resolve();return h.forEach(f=>{d=d.next(()=>u.getEntry(a,f)).next(g=>{const E=l.docVersions.get(f);ye(E!==null),g.version.compareTo(E)<0&&(c.applyToRemoteDocument(g,l),g.isValidDocument()&&(g.setReadTime(l.commitVersion),u.addEntry(g)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Te();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function h0(t){const e=be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function ZD(t,e){const n=be(t),r=e.snapshotVersion;let s=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Gi.newChangeBuffer({trackRemovals:!0});s=n.Ui;const a=[];e.targetChanges.forEach((c,h)=>{const d=s.get(h);if(!d)return;a.push(n.Cs.removeMatchingKeys(i,c.removedDocuments,h).next(()=>n.Cs.addMatchingKeys(i,c.addedDocuments,h)));let f=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.has(h)?f=f.withResumeToken(lt.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),s=s.insert(h,f),function(g,E,v){return g.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(d,f,c)&&a.push(n.Cs.updateTargetData(i,f))});let l=qt(),u=Te();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,c))}),a.push(eR(i,o,e.documentUpdates).next(c=>{l=c.Wi,u=c.zi})),!r.isEqual(fe.min())){const c=n.Cs.getLastRemoteSnapshotVersion(i).next(h=>n.Cs.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(c)}return k.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ui=s,i))}function eR(t,e,n){let r=Te(),s=Te();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=qt();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(fe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Wi:o,zi:s}})}function tR(t,e){const n=be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function nR(t,e){const n=be(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Cs.getTargetData(r,e).next(i=>i?(s=i,k.resolve(s)):n.Cs.allocateTargetId(r).next(o=>(s=new gr(e,o,0,r.currentSequenceNumber),n.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ui.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(r.targetId,r),n.qi.set(e,r.targetId)),r})}async function wh(t,e,n){const r=be(t),s=r.Ui.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Sr(o))throw o;z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ui=r.Ui.remove(e),r.qi.delete(s.target)}function Qm(t,e,n){const r=be(t);let s=fe.min(),i=Te();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=be(a),h=c.qi.get(u);return h!==void 0?k.resolve(c.Ui.get(h)):c.Cs.getTargetData(l,u)}(r,o,dn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Li.getDocumentsMatchingQuery(o,e,n?s:fe.min(),n?i:Te())).next(a=>(rR(r,RA(e),a),{documents:a,Hi:i})))}function rR(t,e,n){let r=fe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ki.set(e,r)}class Xm{constructor(){this.activeTargetIds=Lb()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class d0{constructor(){this.Lr=new Xm,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,n,r){this.Ur[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Xm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{qr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.oo=n+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,n,r,s,i){const o=this.ao(e,n);z("RestConnection","Sending: ",o,r);const a={};return this.ho(a,s,i),this.lo(e,o,a,r).then(l=>(z("RestConnection","Received: ",l),l),l=>{throw uh("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",r),l})}fo(e,n,r,s,i,o){return this.co(e,n,r,s,i)}ho(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+wi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}ao(e,n){const r=iR[e];return`${this.oo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,n,r,s){return new Promise((i,o)=>{const a=new J1;a.listenOnce(Y1.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case ac.NO_ERROR:const u=a.getResponseJson();z("Connection","XHR received:",JSON.stringify(u)),i(u);break;case ac.TIMEOUT:z("Connection",'RPC "'+e+'" timed out'),o(new ne(B.DEADLINE_EXCEEDED,"Request time out"));break;case ac.HTTP_ERROR:const c=a.getStatus();if(z("Connection",'RPC "'+e+'" failed with status:',c,"response text:",a.getResponseText()),c>0){const h=a.getResponseJson().error;if(h&&h.status&&h.message){const d=function(f){const g=f.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(g)>=0?g:B.UNKNOWN}(h.status);o(new ne(d,h.message))}else o(new ne(B.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ne(B.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{z("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(s);a.send(n,"POST",l,r,15)})}_o(e,n,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=G1(),o=W1(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new X1({})),this.ho(a.initMessageHeaders,n,r),Xy()||Zy()||xC()||ew()||AC()||Jy()||(a.httpHeadersOverwriteParam="$httpHeaders");const l=s.join("");z("Connection","Creating WebChannel: "+l,a);const u=i.createWebChannel(l,a);let c=!1,h=!1;const d=new oR({Hr:g=>{h?z("Connection","Not sending because WebChannel is closed:",g):(c||(z("Connection","Opening WebChannel transport."),u.open(),c=!0),z("Connection","WebChannel sending:",g),u.send(g))},Jr:()=>u.close()}),f=(g,E,v)=>{g.listen(E,_=>{try{v(_)}catch(p){setTimeout(()=>{throw p},0)}})};return f(u,wa.EventType.OPEN,()=>{h||z("Connection","WebChannel transport opened.")}),f(u,wa.EventType.CLOSE,()=>{h||(h=!0,z("Connection","WebChannel transport closed"),d.io())}),f(u,wa.EventType.ERROR,g=>{h||(h=!0,uh("Connection","WebChannel transport errored:",g),d.io(new ne(B.UNAVAILABLE,"The operation could not be completed")))}),f(u,wa.EventType.MESSAGE,g=>{var E;if(!h){const v=g.data[0];ye(!!v);const _=v,p=_.error||((E=_[0])===null||E===void 0?void 0:E.error);if(p){z("Connection","WebChannel received error:",p);const b=p.status;let D=function(w){const I=Qe[w];if(I!==void 0)return Ob(I)}(b),N=p.message;D===void 0&&(D=B.INTERNAL,N="Unknown error status: "+b+" with message "+p.message),h=!0,d.io(new ne(D,N)),u.close()}else z("Connection","WebChannel received:",v),d.ro(v)}}),f(o,Q1.STAT_EVENT,g=>{g.stat===lm.PROXY?z("Connection","Detected buffering proxy"):g.stat===lm.NOPROXY&&z("Connection","Detected no buffering proxy")}),setTimeout(()=>{d.so()},0),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(){return typeof window!="undefined"?window:null}function ja(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(t){return new QA(t,!0)}class f0{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Hs=e,this.timerId=n,this.wo=r,this.mo=s,this.yo=i,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),s=Math.max(0,n-r);s>0&&z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.po} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){this.Io!==null&&(this.Io.skipDelay(),this.Io=null)}cancel(){this.Io!==null&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,n,r,s,i,o,a,l){this.Hs=e,this.Po=r,this.vo=s,this.Vo=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new f0(e,n)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Mo()}async stop(){this.No()&&await this.close(0)}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,n){this.Lo(),this.Uo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Dt(n.toString()),Dt("Using maximum backoff delay to prevent overloading the backend."),this.xo.Eo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.qo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(n)}qo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===n&&this.Go(r,s)},r=>{e(()=>{const s=new ne(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,n){const r=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Mo(){this.state=5,this.xo.Ao(async()=>{this.state=0,this.start()})}Qo(e){return z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uR extends g0{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.It=i}jo(e,n){return this.Vo._o("Listen",e,n)}onMessage(e){this.xo.reset();const n=ZA(this.It,e),r=function(s){if(!("targetChange"in s))return fe.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?fe.min():i.readTime?zt(i.readTime):fe.min()}(e);return this.listener.Wo(n,r)}zo(e){const n={};n.database=ph(this.It),n.addTarget=function(s,i){let o;const a=i.target;return o=El(a)?{documents:jb(s,a)}:{query:zb(s,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0?o.resumeToken=Ub(s,i.resumeToken):i.snapshotVersion.compareTo(fe.min())>0&&(o.readTime=Mo(s,i.snapshotVersion.toTimestamp())),o}(this.It,e);const r=tD(this.It,e);r&&(n.labels=r),this.Bo(n)}Ho(e){const n={};n.database=ph(this.It),n.removeTarget=e,this.Bo(n)}}class cR extends g0{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.It=i,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,n){return this.Vo._o("Write",e,n)}onMessage(e){if(ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=eD(e.writeResults,e.commitTime),r=zt(e.commitTime);return this.listener.Zo(r,n)}return ye(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=ph(this.It),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Sl(this.It,r))};this.Bo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.Vo=r,this.It=s,this.nu=!1}su(){if(this.nu)throw new ne(B.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,n,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.Vo.co(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(B.UNKNOWN,s.toString())})}fo(e,n,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.Vo.fo(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ne(B.UNKNOWN,i.toString())})}terminate(){this.nu=!0}}class dR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Dt(n),this.ou=!1):z("OnlineStateTracker",n)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=i,this.mu.qr(o=>{r.enqueueAndForget(async()=>{Is(this)&&(z("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=be(a);l._u.add(4),await ea(l),l.gu.set("Unknown"),l._u.delete(4),await Su(l)}(this))})}),this.gu=new dR(r,s)}}async function Su(t){if(Is(t))for(const e of t.wu)await e(!0)}async function ea(t){for(const e of t.wu)await e(!1)}function m0(t,e){const n=be(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),Gd(n)?Kd(n):_i(n).ko()&&Hd(n,e))}function p0(t,e){const n=be(t),r=_i(n);n.du.delete(e),r.ko()&&v0(n,e),n.du.size===0&&(r.ko()?r.Fo():Is(n)&&n.gu.set("Unknown"))}function Hd(t,e){t.yu.Ot(e.targetId),_i(t).zo(e)}function v0(t,e){t.yu.Ot(e),_i(t).Ho(e)}function Kd(t){t.yu=new GA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),se:e=>t.du.get(e)||null}),_i(t).start(),t.gu.uu()}function Gd(t){return Is(t)&&!_i(t).No()&&t.du.size>0}function Is(t){return be(t)._u.size===0}function y0(t){t.yu=void 0}async function gR(t){t.du.forEach((e,n)=>{Hd(t,e)})}async function mR(t,e){y0(t),Gd(t)?(t.gu.hu(e),Kd(t)):t.gu.set("Unknown")}async function pR(t,e,n){if(t.gu.set("Online"),e instanceof Bb&&e.state===2&&e.cause)try{await async function(r,s){const i=s.cause;for(const o of s.targetIds)r.du.has(o)&&(await r.remoteSyncer.rejectListen(o,i),r.du.delete(o),r.yu.removeTarget(o))}(t,e)}catch(r){z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xl(t,r)}else if(e instanceof qa?t.yu.Gt(e):e instanceof Fb?t.yu.Yt(e):t.yu.Wt(e),!n.isEqual(fe.min()))try{const r=await h0(t.localStore);n.compareTo(r)>=0&&await function(s,i){const o=s.yu.te(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=s.du.get(l);u&&s.du.set(l,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach(a=>{const l=s.du.get(a);if(!l)return;s.du.set(a,l.withResumeToken(lt.EMPTY_BYTE_STRING,l.snapshotVersion)),v0(s,a);const u=new gr(l.target,a,1,l.sequenceNumber);Hd(s,u)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){z("RemoteStore","Failed to raise snapshot:",r),await xl(t,r)}}async function xl(t,e,n){if(!Sr(e))throw e;t._u.add(1),await ea(t),t.gu.set("Offline"),n||(n=()=>h0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{z("RemoteStore","Retrying IndexedDB access"),await n(),t._u.delete(1),await Su(t)})}function w0(t,e){return e().catch(n=>xl(t,n,e))}async function ta(t){const e=be(t),n=_r(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;vR(e);)try{const s=await tR(e.localStore,r);if(s===null){e.fu.length===0&&n.Fo();break}r=s.batchId,yR(e,s)}catch(s){await xl(e,s)}b0(e)&&_0(e)}function vR(t){return Is(t)&&t.fu.length<10}function yR(t,e){t.fu.push(e);const n=_r(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function b0(t){return Is(t)&&!_r(t).No()&&t.fu.length>0}function _0(t){_r(t).start()}async function wR(t){_r(t).eu()}async function bR(t){const e=_r(t);for(const n of t.fu)e.Xo(n.mutations)}async function _R(t,e,n){const r=t.fu.shift(),s=Ud.from(r,e,n);await w0(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ta(t)}async function ER(t,e){e&&_r(t).Yo&&await async function(n,r){if(s=r.code,$A(s)&&s!==B.ABORTED){const i=n.fu.shift();_r(n).Oo(),await w0(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await ta(n)}var s}(t,e),b0(t)&&_0(t)}async function Zm(t,e){const n=be(t);n.asyncQueue.verifyOperationInProgress(),z("RemoteStore","RemoteStore received new credentials");const r=Is(n);n._u.add(3),await ea(n),r&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),await Su(n)}async function IR(t,e){const n=be(t);e?(n._u.delete(2),await Su(n)):e||(n._u.add(2),await ea(n),n.gu.set("Unknown"))}function _i(t){return t.pu||(t.pu=function(e,n,r){const s=be(e);return s.su(),new uR(n,s.Vo,s.authCredentials,s.appCheckCredentials,s.It,r)}(t.datastore,t.asyncQueue,{Yr:gR.bind(null,t),Zr:mR.bind(null,t),Wo:pR.bind(null,t)}),t.wu.push(async e=>{e?(t.pu.Oo(),Gd(t)?Kd(t):t.gu.set("Unknown")):(await t.pu.stop(),y0(t))})),t.pu}function _r(t){return t.Iu||(t.Iu=function(e,n,r){const s=be(e);return s.su(),new cR(n,s.Vo,s.authCredentials,s.appCheckCredentials,s.It,r)}(t.datastore,t.asyncQueue,{Yr:wR.bind(null,t),Zr:ER.bind(null,t),tu:bR.bind(null,t),Zo:_R.bind(null,t)}),t.wu.push(async e=>{e?(t.Iu.Oo(),await ta(t)):(await t.Iu.stop(),t.fu.length>0&&(z("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))})),t.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new cn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Wd(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yd(t,e){if(Dt("AsyncQueue",`${e}: ${t}`),Sr(t))return new ne(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=ji(),this.sortedSet=new tt(this.comparator)}static emptySet(e){return new Ys(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ys)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ys;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(){this.Tu=new tt(J.comparator)}track(e){const n=e.doc.key,r=this.Tu.get(n);r?e.type!==0&&r.type===3?this.Tu=this.Tu.insert(n,e):e.type===3&&r.type!==1?this.Tu=this.Tu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Tu=this.Tu.remove(n):e.type===1&&r.type===2?this.Tu=this.Tu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):le():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,r)=>{e.push(r)}),e}}class ui{constructor(e,n,r,s,i,o,a,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l}static fromInitialDocuments(e,n,r,s){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new ui(e,n,Ys.emptySet(n),i,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(){this.Au=void 0,this.listeners=[]}}class SR{constructor(){this.queries=new kr(e=>_b(e),pu),this.onlineState="Unknown",this.Ru=new Set}}async function E0(t,e){const n=be(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new TR),s)try{i.Au=await n.onListen(r)}catch(o){const a=Yd(o,`Initialization of query '${gh(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.bu(n.onlineState),i.Au&&e.Pu(i.Au)&&Qd(n)}async function I0(t,e){const n=be(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function kR(t,e){const n=be(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.Pu(s)&&(r=!0);o.Au=s}}r&&Qd(n)}function CR(t,e,n){const r=be(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function Qd(t){t.Ru.forEach(e=>{e.next()})}class T0{constructor(e,n,r){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ui(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Nu||!r)&&(!e.docs.isEmpty()||n==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const n=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}xu(e){e=ui.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e){this.key=e}}class k0{constructor(e){this.key=e}}class xR{constructor(e,n){this.query=e,this.Lu=n,this.Uu=null,this.current=!1,this.qu=Te(),this.mutatedKeys=Te(),this.Ku=Eb(e),this.Gu=new Ys(this.Ku)}get Qu(){return this.Lu}ju(e,n){const r=n?n.Wu:new ep,s=n?n.Gu:this.Gu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((c,h)=>{const d=s.get(c),f=Ld(this.query,h)?h:null,g=!!d&&this.mutatedKeys.has(d.key),E=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let v=!1;d&&f?d.data.isEqual(f.data)?g!==E&&(r.track({type:3,doc:f}),v=!0):this.zu(d,f)||(r.track({type:2,doc:f}),v=!0,(l&&this.Ku(f,l)>0||u&&this.Ku(f,u)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),v=!0):d&&!f&&(r.track({type:1,doc:d}),v=!0,(l||u)&&(a=!0)),v&&(f?(o=o.add(f),i=E?i.add(c):i.delete(c)):(o=o.delete(c),i=i.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),i=i.delete(c.key),r.track({type:1,doc:c})}return{Gu:o,Wu:r,$i:a,mutatedKeys:i}}zu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const i=e.Wu.Eu();i.sort((u,c)=>function(h,d){const f=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return f(h)-f(d)}(u.type,c.type)||this.Ku(u.doc,c.doc)),this.Hu(r);const o=n?this.Ju():[],a=this.qu.size===0&&this.current?1:0,l=a!==this.Uu;return this.Uu=a,i.length!==0||l?{snapshot:new ui(this.query,e.Gu,s,i,e.mutatedKeys,a===0,l,!1),Yu:o}:{Yu:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new ep,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(n=>this.Lu=this.Lu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Lu=this.Lu.delete(n)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Te(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const n=[];return e.forEach(r=>{this.qu.has(r)||n.push(new k0(r))}),this.qu.forEach(r=>{e.has(r)||n.push(new S0(r))}),n}Zu(e){this.Lu=e.Hi,this.qu=Te();const n=this.ju(e.documents);return this.applyChanges(n,!0)}tc(){return ui.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,this.Uu===0)}}class AR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class DR{constructor(e){this.key=e,this.ec=!1}}class RR{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new kr(a=>_b(a),pu),this.ic=new Map,this.rc=new Set,this.oc=new tt(J.comparator),this.uc=new Map,this.cc=new $d,this.ac={},this.hc=new Map,this.lc=gs.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return this.fc===!0}}async function OR(t,e){const n=$R(t);let r,s;const i=n.sc.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.tc();else{const o=await nR(n.localStore,dn(e));n.isPrimaryClient&&m0(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await MR(n,e,r,a==="current")}return s}async function MR(t,e,n,r){t.dc=(c,h,d)=>async function(f,g,E,v){let _=g.view.ju(E);_.$i&&(_=await Qm(f.localStore,g.query,!1).then(({documents:D})=>g.view.ju(D,_)));const p=v&&v.targetChanges.get(g.targetId),b=g.view.applyChanges(_,f.isPrimaryClient,p);return np(f,g.targetId,b.Yu),b.snapshot}(t,c,h,d);const s=await Qm(t.localStore,e,!0),i=new xR(e,s.Hi),o=i.ju(s.documents),a=Zo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),l=i.applyChanges(o,t.isPrimaryClient,a);np(t,n,l.Yu);const u=new AR(e,n,i);return t.sc.set(e,u),t.ic.has(n)?t.ic.get(n).push(e):t.ic.set(n,[e]),l.snapshot}async function PR(t,e){const n=be(t),r=n.sc.get(e),s=n.ic.get(r.targetId);if(s.length>1)return n.ic.set(r.targetId,s.filter(i=>!pu(i,e))),void n.sc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await wh(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),p0(n.remoteStore,r.targetId),bh(n,r.targetId)}).catch(_s)):(bh(n,r.targetId),await wh(n.localStore,r.targetId,!0))}async function NR(t,e,n){const r=R0(t);try{const s=await function(i,o){const a=be(i),l=ze.now(),u=o.reduce((d,f)=>d.add(f.key),Te());let c,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let f=qt(),g=Te();return a.Gi.getEntries(d,u).next(E=>{f=E,f.forEach((v,_)=>{_.isValidDocument()||(g=g.add(v))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,f)).next(E=>{c=E;const v=[];for(const _ of o){const p=VA(_,c.get(_.key).overlayedDocument);p!=null&&v.push(new Wn(_.key,p,vb(p.value.mapValue),Ot.exists(!0)))}return a.mutationQueue.addMutationBatch(d,l,v,o)}).next(E=>{h=E;const v=E.applyToLocalDocumentSet(c,g);return a.documentOverlayCache.saveOverlays(d,E.batchId,v)})}).then(()=>({batchId:h.batchId,changes:Pb(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,a){let l=i.ac[i.currentUser.toKey()];l||(l=new tt(Ee)),l=l.insert(o,a),i.ac[i.currentUser.toKey()]=l}(r,s.batchId,n),await na(r,s.changes),await ta(r.remoteStore)}catch(s){const i=Yd(s,"Failed to persist write");n.reject(i)}}async function C0(t,e){const n=be(t);try{const r=await ZD(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.uc.get(i);o&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.ec=!0:s.modifiedDocuments.size>0?ye(o.ec):s.removedDocuments.size>0&&(ye(o.ec),o.ec=!1))}),await na(n,r,e)}catch(r){await _s(r)}}function tp(t,e,n){const r=be(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.sc.forEach((i,o)=>{const a=o.view.bu(e);a.snapshot&&s.push(a.snapshot)}),function(i,o){const a=be(i);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const h of c.listeners)h.bu(o)&&(l=!0)}),l&&Qd(a)}(r.eventManager,e),s.length&&r.nc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function LR(t,e,n){const r=be(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.uc.get(e),i=s&&s.key;if(i){let o=new tt(J.comparator);o=o.insert(i,je.newNoDocument(i,fe.min()));const a=Te().add(i),l=new bu(fe.min(),new Map,new Me(Ee),o,a);await C0(r,l),r.oc=r.oc.remove(i),r.uc.delete(e),Xd(r)}else await wh(r.localStore,e,!1).then(()=>bh(r,e,n)).catch(_s)}async function FR(t,e){const n=be(t),r=e.batch.batchId;try{const s=await JD(n.localStore,e);A0(n,r,null),x0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await na(n,s)}catch(s){await _s(s)}}async function BR(t,e,n){const r=be(t);try{const s=await function(i,o){const a=be(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(ye(c!==null),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(r.localStore,e);A0(r,e,n),x0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await na(r,s)}catch(s){await _s(s)}}function x0(t,e){(t.hc.get(e)||[]).forEach(n=>{n.resolve()}),t.hc.delete(e)}function A0(t,e,n){const r=be(t);let s=r.ac[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.ac[r.currentUser.toKey()]=s}}function bh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.ic.get(e))t.sc.delete(r),n&&t.nc._c(r,n);t.ic.delete(e),t.isPrimaryClient&&t.cc.ls(e).forEach(r=>{t.cc.containsKey(r)||D0(t,r)})}function D0(t,e){t.rc.delete(e.path.canonicalString());const n=t.oc.get(e);n!==null&&(p0(t.remoteStore,n),t.oc=t.oc.remove(e),t.uc.delete(n),Xd(t))}function np(t,e,n){for(const r of n)r instanceof S0?(t.cc.addReference(r.key,e),UR(t,r)):r instanceof k0?(z("SyncEngine","Document no longer in limbo: "+r.key),t.cc.removeReference(r.key,e),t.cc.containsKey(r.key)||D0(t,r.key)):le()}function UR(t,e){const n=e.key,r=n.path.canonicalString();t.oc.get(n)||t.rc.has(r)||(z("SyncEngine","New document in limbo: "+n),t.rc.add(r),Xd(t))}function Xd(t){for(;t.rc.size>0&&t.oc.size<t.maxConcurrentLimboResolutions;){const e=t.rc.values().next().value;t.rc.delete(e);const n=new J(Re.fromString(e)),r=t.lc.next();t.uc.set(r,new DR(n)),t.oc=t.oc.insert(n,r),m0(t.remoteStore,new gr(dn(mu(n.path)),r,2,Qt.at))}}async function na(t,e,n){const r=be(t),s=[],i=[],o=[];r.sc.isEmpty()||(r.sc.forEach((a,l)=>{o.push(r.dc(l,e,n).then(u=>{if(u){r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u.fromCache?"not-current":"current"),s.push(u);const c=zd.Ci(l.targetId,u);i.push(c)}}))}),await Promise.all(o),r.nc.Wo(s),await async function(a,l){const u=be(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>k.forEach(l,h=>k.forEach(h.Si,d=>u.persistence.referenceDelegate.addReference(c,h.targetId,d)).next(()=>k.forEach(h.Di,d=>u.persistence.referenceDelegate.removeReference(c,h.targetId,d)))))}catch(c){if(!Sr(c))throw c;z("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const h=c.targetId;if(!c.fromCache){const d=u.Ui.get(h),f=d.snapshotVersion,g=d.withLastLimboFreeSnapshotVersion(f);u.Ui=u.Ui.insert(h,g)}}}(r.localStore,i))}async function VR(t,e){const n=be(t);if(!n.currentUser.isEqual(e)){z("SyncEngine","User change. New user:",e.toKey());const r=await c0(n.localStore,e);n.currentUser=e,function(s,i){s.hc.forEach(o=>{o.forEach(a=>{a.reject(new ne(B.CANCELLED,i))})}),s.hc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await na(n,r.ji)}}function qR(t,e){const n=be(t),r=n.uc.get(e);if(r&&r.ec)return Te().add(r.key);{let s=Te();const i=n.ic.get(e);if(!i)return s;for(const o of i){const a=n.sc.get(o);s=s.unionWith(a.view.Qu)}return s}}function $R(t){const e=be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=C0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LR.bind(null,e),e.nc.Wo=kR.bind(null,e.eventManager),e.nc._c=CR.bind(null,e.eventManager),e}function R0(t){const e=be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BR.bind(null,e),e}class O0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.It=Tu(e.databaseInfo.databaseId),this.sharedClientState=this.mc(e),this.persistence=this.gc(e),await this.persistence.start(),this.localStore=this.yc(e),this.gcScheduler=this.Ic(e,this.localStore),this.indexBackfillerScheduler=this.Tc(e,this.localStore)}Ic(e,n){return null}Tc(e,n){return null}yc(e){return u0(this.persistence,new l0,e.initialUser,this.It)}gc(e){return new a0(Iu.Bs,this.It)}mc(e){return new d0}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class jR extends O0{constructor(e,n,r){super(),this.Ec=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ec.initialize(this,e),await R0(this.Ec.syncEngine),await ta(this.Ec.remoteStore),await this.persistence.li(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}yc(e){return u0(this.persistence,new l0,e.initialUser,this.It)}Ic(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new LD(r,e.asyncQueue,n)}Tc(e,n){const r=new fA(n,this.persistence);return new dA(e.asyncQueue,r)}gc(e){const n=QD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new jd(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,lR(),ja(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new d0}}class M0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>tp(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=VR.bind(null,this.syncEngine),await IR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new SR}createDatastore(e){const n=Tu(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new aR(s));var s;return function(i,o,a,l){return new hR(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,s=e.asyncQueue,i=a=>tp(this.syncEngine,a,0),o=Jm.C()?new Jm:new sR,new fR(n,r,s,i,o);var n,r,s,i,o}createSyncEngine(e,n){return function(r,s,i,o,a,l,u){const c=new RR(r,s,i,o,a,l);return u&&(c.fc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=be(e);z("RemoteStore","RemoteStore shutting down."),n._u.add(5),await ea(n),n.mu.shutdown(),n.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):Dt("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ct.UNAUTHENTICATED,this.clientId=ab.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{z("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(z("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ne(B.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Yd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function N0(t,e){t.asyncQueue.verifyOperationInProgress(),z("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await c0(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function L0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await HR(t);z("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>Zm(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>Zm(e.remoteStore,i)),t.onlineComponents=e}async function HR(t){return t.offlineComponents||(z("FirestoreClient","Using default OfflineComponentProvider"),await N0(t,new O0)),t.offlineComponents}async function F0(t){return t.onlineComponents||(z("FirestoreClient","Using default OnlineComponentProvider"),await L0(t,new M0)),t.onlineComponents}function KR(t){return F0(t).then(e=>e.syncEngine)}async function B0(t){const e=await F0(t),n=e.eventManager;return n.onListen=OR.bind(null,e.syncEngine),n.onUnlisten=PR.bind(null,e.syncEngine),n}function GR(t,e,n={}){const r=new cn;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,l){const u=new P0({next:h=>{i.enqueueAndForget(()=>I0(s,c));const d=h.docs.has(o);!d&&h.fromCache?l.reject(new ne(B.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?l.reject(new ne(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),c=new T0(mu(o.path),u,{includeMetadataChanges:!0,Nu:!0});return E0(s,c)}(await B0(t),t.asyncQueue,e,n,r)),r.promise}function WR(t,e,n={}){const r=new cn;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,l){const u=new P0({next:h=>{i.enqueueAndForget(()=>I0(s,c)),h.fromCache&&a.source==="server"?l.reject(new ne(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),c=new T0(o,u,{includeMetadataChanges:!0,Nu:!0});return E0(s,c)}(await B0(t),t.asyncQueue,e,n,r)),r.promise}const rp=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(t,e,n){if(!n)throw new ne(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YR(t,e,n,r){if(e===!0&&r===!0)throw new ne(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sp(t){if(!J.isDocumentKey(t))throw new ne(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ip(t){if(J.isDocumentKey(t))throw new ne(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Jd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le()}function Rn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jd(t);throw new ne(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,YR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new op({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ne(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ne(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new op(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new eA;switch(n.type){case"gapi":const r=n.client;return new rA(r,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ne(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=rp.get(e);n&&(z("ComponentProvider","Removing Datastore"),rp.delete(e),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}}class ra{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ra(this.firestore,e,this._query)}}class mr extends ra{constructor(e,n,r){super(e,n,mu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new J(e))}withConverter(e){return new mr(this.firestore,e,this._path)}}function oB(t,e,...n){if(t=He(t),U0("collection","path",e),t instanceof Zd){const r=Re.fromString(e,...n);return ip(r),new mr(t,null,r)}{if(!(t instanceof Bt||t instanceof mr))throw new ne(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return ip(r),new mr(t.firestore,null,r)}}function aB(t,e,...n){if(t=He(t),arguments.length===1&&(e=ab.R()),U0("doc","path",e),t instanceof Zd){const r=Re.fromString(e,...n);return sp(r),new Bt(t,null,new J(r))}{if(!(t instanceof Bt||t instanceof mr))throw new ne(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return sp(r),new Bt(t.firestore,t instanceof mr?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new f0(this,"async_queue_retry"),this.jc=()=>{const n=ja();n&&z("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.bo()};const e=ja();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const n=ja();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const n=new cn;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}async Hc(){if(this.Bc.length!==0){try{await this.Bc[0](),this.Bc.shift(),this.xo.reset()}catch(e){if(!Sr(e))throw e;z("AsyncQueue","Operation failed with retryable error: "+e)}this.Bc.length>0&&this.xo.Ao(()=>this.Hc())}}zc(e){const n=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{this.qc=r,this.Kc=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw Dt("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Kc=!1,r))));return this.$c=n,n}enqueueAfterDelay(e,n,r){this.Wc(),this.Qc.indexOf(e)>-1&&(n=0);const s=Wd.createAndSchedule(this,e,n,r,i=>this.Jc(i));return this.Uc.push(s),s}Wc(){this.qc&&le()}verifyOperationInProgress(){}async Yc(){let e;do e=this.$c,await e;while(e!==this.$c)}Xc(e){for(const n of this.Uc)if(n.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const n=this.Uc.indexOf(e);this.Uc.splice(n,1)}}class Ts extends Zd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new QR,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||V0(this),this._firestoreClient.terminate()}}function XR(t,e){const n=typeof t=="object"?t:ad(),r=typeof t=="string"?t:e||"(default)";return Zl(n,"firestore").getImmediate({identifier:r})}function ku(t){return t._firestoreClient||V0(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function V0(t){var e;const n=t._freezeSettings(),r=function(s,i,o,a){return new mA(s,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new zR(t._authCredentials,t._appCheckCredentials,t._queue,r)}function JR(t,e){eO(t=Rn(t,Ts));const n=ku(t),r=t._freezeSettings(),s=new M0;return ZR(n,s,new jR(s,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function ZR(t,e,n){const r=new cn;return t.asyncQueue.enqueue(async()=>{try{await N0(t,n),await L0(t,e),r.resolve()}catch(s){const i=s;if(!function(o){return o.name==="FirebaseError"?o.code===B.FAILED_PRECONDITION||o.code===B.UNIMPLEMENTED:typeof DOMException!="undefined"&&o instanceof DOMException?o.code===22||o.code===20||o.code===11:!0}(i))throw i;uh("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}}).then(()=>r.promise)}function eO(t){if(t._initialized||t._terminated)throw new ne(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ci(lt.fromBase64String(e))}catch(n){throw new ne(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ci(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=/^__.*__$/;class nO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Wn(e,this.data,this.fieldMask,n,this.fieldTransforms):new bi(e,this.data,n,this.fieldTransforms)}}class q0{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Wn(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}class nf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.It=r,this.ignoreUndefinedProperties=s,i===void 0&&this.ea(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new nf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.sa({path:r,ra:!1});return s.oa(e),s}ua(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.sa({path:r,ra:!1});return s.ea(),s}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return Al(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(e.length===0)throw this.aa("Document fields must not be empty");if($0(this.na)&&tO.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class rO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.It=r||Tu(e)}fa(e,n,r,s=!1){return new nf({na:e,methodName:n,la:r,path:Je.emptyPath(),ra:!1,ha:s},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function j0(t){const e=t._freezeSettings(),n=Tu(t._databaseId);return new rO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sO(t,e,n,r,s,i={}){const o=t.fa(i.merge||i.mergeFields?2:0,e,n,s);rf("Data must be an object, but it was:",o,r);const a=z0(r,o);let l,u;if(i.merge)l=new jt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const c=[];for(const h of i.mergeFields){const d=_h(e,h,n);if(!o.contains(d))throw new ne(B.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);K0(c,d)||c.push(d)}l=new jt(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new nO(new bt(a),l,u)}class xu extends ef{_toFieldTransform(e){if(e.na!==2)throw e.na===1?e.aa(`${this._methodName}() can only appear at the top level of your update data`):e.aa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xu}}function iO(t,e,n,r){const s=t.fa(1,e,n);rf("Data must be an object, but it was:",s,r);const i=[],o=bt.empty();Es(r,(l,u)=>{const c=sf(e,l,n);u=He(u);const h=s.ua(c);if(u instanceof xu)i.push(c);else{const d=Au(u,h);d!=null&&(i.push(c),o.set(c,d))}});const a=new jt(i);return new q0(o,a,s.fieldTransforms)}function oO(t,e,n,r,s,i){const o=t.fa(1,e,n),a=[_h(e,r,n)],l=[s];if(i.length%2!=0)throw new ne(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push(_h(e,i[d])),l.push(i[d+1]);const u=[],c=bt.empty();for(let d=a.length-1;d>=0;--d)if(!K0(u,a[d])){const f=a[d];let g=l[d];g=He(g);const E=o.ua(f);if(g instanceof xu)u.push(f);else{const v=Au(g,E);v!=null&&(u.push(f),c.set(f,v))}}const h=new jt(u);return new q0(c,h,o.fieldTransforms)}function Au(t,e){if(H0(t=He(t)))return rf("Unsupported field value:",e,t),z0(t,e);if(t instanceof ef)return function(n,r){if(!$0(r.na))throw r.aa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ra&&e.na!==4)throw e.aa("Nested arrays are not supported");return function(n,r){const s=[];let i=0;for(const o of n){let a=Au(o,r.ca(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,r){if((n=He(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return MA(r.It,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=ze.fromDate(n);return{timestampValue:Mo(r.It,s)}}if(n instanceof ze){const s=new ze(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Mo(r.It,s)}}if(n instanceof tf)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ci)return{bytesValue:Ub(r.It,n._byteString)};if(n instanceof Bt){const s=r.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw r.aa(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Fd(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.aa(`Unsupported field value: ${Jd(n)}`)}(t,e)}function z0(t,e){const n={};return fb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Es(t,(r,s)=>{const i=Au(s,e.ia(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function H0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof tf||t instanceof ci||t instanceof Bt||t instanceof ef)}function rf(t,e,n){if(!H0(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=Jd(n);throw r==="an object"?e.aa(t+" a custom object"):e.aa(t+" "+r)}}function _h(t,e,n){if((e=He(e))instanceof Cu)return e._internalPath;if(typeof e=="string")return sf(t,e);throw Al("Field path arguments must be of type string or ",t,!1,void 0,n)}const aO=new RegExp("[~\\*/\\[\\]]");function sf(t,e,n){if(e.search(aO)>=0)throw Al(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cu(...e.split("."))._internalPath}catch{throw Al(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Al(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new ne(B.INVALID_ARGUMENT,a+t+l)}function K0(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(of("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class lO extends G0{data(){return super.data()}}function of(t,e){return typeof e=="string"?sf(t,e):e instanceof Cu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class W0 extends G0{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new za(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(of("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class za extends W0{data(e={}){return super.data(e)}}class uO{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Hi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new za(this._firestore,this._userDataWriter,r.key,r,new Hi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let i=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new za(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Hi(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:i++}))}{let i=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new za(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Hi(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,u=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:cO(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function cO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dO{}function lB(t,...e){for(const n of e)t=n._apply(t);return t}class fO extends dO{constructor(e,n){super(),this.wa=e,this.ya=n,this.type="orderBy"}_apply(e){const n=function(r,s,i){if(r.startAt!==null)throw new ne(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ne(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Ws(s,i);return function(a,l){if(wb(a)===null){const u=bb(a);u!==null&&gO(a,u,l.field)}}(r,o),o}(e._query,this.wa,this.ya);return new ra(e.firestore,e.converter,function(r,s){const i=r.explicitOrderBy.concat([s]);return new Jo(r.path,r.collectionGroup,i,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function uB(t,e="asc"){const n=e,r=of("orderBy",t);return new fO(r,n)}function gO(t,e,n){if(!n.isEqual(e))throw new ne(B.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{convertValue(e,n="none"){switch(cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw le()}}convertObject(e,n){const r={};return Es(e.fields,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new tf(Ge(e.latitude),Ge(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=mb(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ko(e));default:return null}}convertTimestamp(e){const n=wr(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Re.fromString(e);ye(Gb(r));const s=new us(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||Dt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cB(t){t=Rn(t,Bt);const e=Rn(t.firestore,Ts);return GR(ku(e),t._key).then(n=>vO(e,t,n))}class Y0 extends mO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ci(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,n)}}function hB(t){t=Rn(t,ra);const e=Rn(t.firestore,Ts),n=ku(e),r=new Y0(e);return hO(t._query),WR(n,t._query).then(s=>new uO(e,r,t,s))}function dB(t,e,n){t=Rn(t,Bt);const r=Rn(t.firestore,Ts),s=pO(t.converter,e,n);return af(r,[sO(j0(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ot.none())])}function fB(t,e,n,...r){t=Rn(t,Bt);const s=Rn(t.firestore,Ts),i=j0(s);let o;return o=typeof(e=He(e))=="string"||e instanceof Cu?oO(i,"updateDoc",t._key,e,n,r):iO(i,"updateDoc",t._key,e),af(s,[o.toMutation(t._key,Ot.exists(!0))])}function gB(t){return af(Rn(t.firestore,Ts),[new wu(t._key,Ot.none())])}function af(t,e){return function(n,r){const s=new cn;return n.asyncQueue.enqueueAndForget(async()=>NR(await KR(n),r,s)),s.promise}(ku(t),e)}function vO(t,e,n){const r=n.docs.get(e._key),s=new Y0(t);return new W0(t,s,e._key,r,new Hi(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){wi=n})(mi),rs(new yr("firestore",(n,{instanceIdentifier:r,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new Ts(new tA(n.getProvider("auth-internal")),new iA(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new ne(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new us(a.options.projectId,l)}(i,r),i);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Sn(um,"3.4.15",t),Sn(um,"3.4.15","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="firebasestorage.googleapis.com",X0="storageBucket",yO=2*60*1e3,wO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye extends Mn{constructor(e,n){super(cc(e),`Firebase Storage: ${n} (${cc(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ye.prototype)}_codeEquals(e){return cc(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function cc(t){return"storage/"+t}function lf(){const t="An unknown error occurred, please check the error payload for server response.";return new Ye("unknown",t)}function bO(t){return new Ye("object-not-found","Object '"+t+"' does not exist.")}function _O(t){return new Ye("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function EO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ye("unauthenticated",t)}function IO(){return new Ye("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function TO(t){return new Ye("unauthorized","User does not have permission to access '"+t+"'.")}function SO(){return new Ye("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function kO(){return new Ye("canceled","User canceled the upload/download.")}function CO(t){return new Ye("invalid-url","Invalid URL '"+t+"'.")}function xO(t){return new Ye("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function AO(){return new Ye("no-default-bucket","No default bucket found. Did you set the '"+X0+"' property when initializing the app?")}function DO(){return new Ye("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function RO(){return new Ye("no-download-url","The given file does not have any download URLs.")}function Eh(t){return new Ye("invalid-argument",t)}function J0(){return new Ye("app-deleted","The Firebase app was deleted.")}function OO(t){return new Ye("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function oo(t,e){return new Ye("invalid-format","String does not match format '"+t+"': "+e)}function Ni(t){throw new Ye("internal-error","Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=$t.makeFromUrl(e,n)}catch{return new $t(e,"")}if(r.path==="")return r;throw xO(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function u(D){D.path_=decodeURIComponent(D.path)}const c="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${c}/b/${s}/o${d}`,"i"),g={bucket:1,path:3},E=n===Q0?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",_=new RegExp(`^https?://${E}/${s}/${v}`,"i"),b=[{regex:a,indices:l,postModify:i},{regex:f,indices:g,postModify:u},{regex:_,indices:{bucket:1,path:2},postModify:u}];for(let D=0;D<b.length;D++){const N=b[D],w=N.regex.exec(e);if(w){const I=w[N.indices.bucket];let T=w[N.indices.path];T||(T=""),r=new $t(I,T),N.postModify(r);break}}if(r==null)throw CO(e);return r}}class MO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...v){u||(u=!0,e.apply(null,v))}function h(v){s=setTimeout(()=>{s=null,t(f,l())},v)}function d(){i&&clearTimeout(i)}function f(v,..._){if(u){d();return}if(v){d(),c.call(null,v,..._);return}if(l()||o){d(),c.call(null,v,..._);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,h(b)}let g=!1;function E(v){g||(g=!0,d(),!u&&(s!==null?(v||(a=2),clearTimeout(s),h(0)):v||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,E(!0)},n),E}function NO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(t){return t!==void 0}function FO(t){return typeof t=="object"&&!Array.isArray(t)}function uf(t){return typeof t=="string"||t instanceof String}function ap(t){return cf()&&t instanceof Blob}function cf(){return typeof Blob!="undefined"}function lp(t,e,n,r){if(r<e)throw Eh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Eh(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Z0(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Jr||(Jr={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e,n,r,s,i,o,a,l,u,c,h){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((d,f)=>{this.resolve_=d,this.reject_=f,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Sa(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Jr.NO_ERROR,l=i.getStatus();if(!a||this.isRetryStatusCode_(l)){const c=i.getErrorCode()===Jr.ABORT;r(!1,new Sa(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Sa(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());LO(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=lf();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?J0():kO();o(l)}else{const l=SO();o(l)}};this.canceled_?n(!1,new Sa(!1,null,!0)):this.backoffId_=PO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&NO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const n=e>=500&&e<600,s=[408,429].indexOf(e)!==-1,i=this.additionalRetryCodes_.indexOf(e)!==-1;return n||s||i}}class Sa{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function UO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function VO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function qO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function $O(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function jO(t,e,n,r,s,i){const o=Z0(t.urlParams),a=t.url+o,l=Object.assign({},t.headers);return qO(l,e),UO(l,n),VO(l,i),$O(l,r),new BO(a,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function HO(...t){const e=zO();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(cf())return new Blob(t);throw new Ye("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function KO(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(t){return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hc{constructor(e,n){this.data=e,this.contentType=n||null}}function WO(t,e){switch(t){case Tn.RAW:return new hc(e_(e));case Tn.BASE64:case Tn.BASE64URL:return new hc(t_(t,e));case Tn.DATA_URL:return new hc(QO(e),XO(e))}throw lf()}function e_(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function YO(t){let e;try{e=decodeURIComponent(t)}catch{throw oo(Tn.DATA_URL,"Malformed data URL.")}return e_(e)}function t_(t,e){switch(t){case Tn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw oo(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Tn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw oo(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=GO(e)}catch{throw oo(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class n_{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw oo(Tn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=JO(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function QO(t){const e=new n_(t);return e.base64?t_(Tn.BASE64,e.rest):YO(e.rest)}function XO(t){return new n_(t).contentType}function JO(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n){let r=0,s="";ap(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(ap(this.data_)){const r=this.data_,s=KO(r,e,n);return s===null?null:new sr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new sr(r,!0)}}static getBlob(...e){if(cf()){const n=e.map(r=>r instanceof sr?r.data_:r);return new sr(HO.apply(null,n))}else{const n=e.map(o=>uf(o)?WO(Tn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new sr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(t){let e;try{e=JSON.parse(t)}catch{return null}return FO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function eM(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function s_(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(t,e){return e}class St{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||tM}}let ka=null;function nM(t){return!uf(t)||t.length<2?t:s_(t)}function i_(){if(ka)return ka;const t=[];t.push(new St("bucket")),t.push(new St("generation")),t.push(new St("metageneration")),t.push(new St("name","fullPath",!0));function e(i,o){return nM(o)}const n=new St("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new St("size");return s.xform=r,t.push(s),t.push(new St("timeCreated")),t.push(new St("updated")),t.push(new St("md5Hash",null,!0)),t.push(new St("cacheControl",null,!0)),t.push(new St("contentDisposition",null,!0)),t.push(new St("contentEncoding",null,!0)),t.push(new St("contentLanguage",null,!0)),t.push(new St("contentType",null,!0)),t.push(new St("metadata","customMetadata",!0)),ka=t,ka}function rM(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new $t(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function sM(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return rM(r,t),r}function o_(t,e,n){const r=r_(e);return r===null?null:sM(t,r,n)}function iM(t,e,n,r){const s=r_(e);if(s===null||!uf(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const c=t.bucket,h=t.fullPath,d="/b/"+o(c)+"/o/"+o(h),f=hf(d,n,r),g=Z0({alt:"media",token:u});return f+g})[0]}function oM(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class a_{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(t){if(!t)throw lf()}function aM(t,e){function n(r,s){const i=o_(t,s,e);return l_(i!==null),i}return n}function lM(t,e){function n(r,s){const i=o_(t,s,e);return l_(i!==null),iM(i,s,t.host,t._protocol)}return n}function u_(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=IO():s=EO():n.getStatus()===402?s=_O(t.bucket):n.getStatus()===403?s=TO(t.path):s=r,s.serverResponse=r.serverResponse,s}return e}function uM(t){const e=u_(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=bO(t.path)),i.serverResponse=s.serverResponse,i}return n}function cM(t,e,n){const r=e.fullServerUrl(),s=hf(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new a_(s,i,lM(t,n),o);return a.errorHandler=uM(e),a}function hM(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function dM(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=hM(null,e)),r}function fM(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let D=0;D<2;D++)b=b+Math.random().toString().slice(2);return b}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=dM(e,r,s),c=oM(u,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,d=`\r
--`+l+"--",f=sr.getBlob(h,r,d);if(f===null)throw DO();const g={name:u.fullPath},E=hf(i,t.host,t._protocol),v="POST",_=t.maxUploadRetryTime,p=new a_(E,v,aM(t,n),_);return p.urlParams=g,p.headers=o,p.body=f.uploadData(),p.errorHandler=u_(e),p}class gM{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Ni("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ni("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ni("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ni("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ni("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class mM extends gM{initXhr(){this.xhr_.responseType="text"}}function c_(){return new mM}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n){this._service=e,n instanceof $t?this._location=n:this._location=$t.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ms(e,n)}get root(){const e=new $t(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return s_(this._location.path)}get storage(){return this._service}get parent(){const e=ZO(this._location.path);if(e===null)return null;const n=new $t(this._location.bucket,e);return new ms(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw OO(e)}}function pM(t,e,n){t._throwIfRoot("uploadBytes");const r=fM(t.storage,t._location,i_(),new sr(e,!0),n);return t.storage.makeRequestWithTokens(r,c_).then(s=>({metadata:s,ref:t}))}function vM(t){t._throwIfRoot("getDownloadURL");const e=cM(t.storage,t._location,i_());return t.storage.makeRequestWithTokens(e,c_).then(n=>{if(n===null)throw RO();return n})}function yM(t,e){const n=eM(t._location.path,e),r=new $t(t._location.bucket,n);return new ms(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(t){return/^[A-Za-z]+:\/\//.test(t)}function bM(t,e){return new ms(t,e)}function h_(t,e){if(t instanceof df){const n=t;if(n._bucket==null)throw AO();const r=new ms(n,n._bucket);return e!=null?h_(r,e):r}else return e!==void 0?yM(t,e):t}function _M(t,e){if(e&&wM(e)){if(t instanceof df)return bM(t,e);throw Eh("To use ref(service, url), the first argument must be a Storage instance.")}else return h_(t,e)}function up(t,e){const n=e==null?void 0:e[X0];return n==null?null:$t.makeFromBucketSpec(n,t)}class df{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=Q0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yO,this._maxUploadRetryTime=wO,this._requests=new Set,s!=null?this._bucket=$t.makeFromBucketSpec(s,this._host):this._bucket=up(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=$t.makeFromBucketSpec(this._url,e):this._bucket=up(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){lp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){lp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ms(this,e)}_makeRequest(e,n,r,s){if(this._deleted)return new MO(J0());{const i=jO(e,this._appId,r,s,n,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const cp="@firebase/storage",hp="0.9.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="storage";function EM(t,e,n){return t=He(t),pM(t,e,n)}function IM(t){return t=He(t),vM(t)}function f_(t,e){return t=He(t),_M(t,e)}function TM(t=ad(),e){return t=He(t),Zl(t,d_).getImmediate({identifier:e})}function SM(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new df(n,r,s,e,mi)}function kM(){rs(new yr(d_,SM,"PUBLIC").setMultipleInstances(!0)),Sn(cp,hp,""),Sn(cp,hp,"esm2017")}kM();function ff(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function g_(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CM=g_,m_=new Vo("auth","Firebase",g_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp=new id("@firebase/auth");function Ha(t,...e){dp.logLevel<=Ae.ERROR&&dp.error(`Auth (${mi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(t,...e){throw gf(t,...e)}function kn(t,...e){return gf(t,...e)}function xM(t,e,n){const r=Object.assign(Object.assign({},CM()),{[e]:n});return new Vo("auth","Firebase",r).create(e,{appName:t.name})}function gf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return m_.create(t,...e)}function de(t,e,...n){if(!t)throw gf(e,...n)}function Vn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ha(e),new Error(e)}function Kn(t,e){t||Vn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp=new Map;function qn(t){Kn(t instanceof Function,"Expected a class definition");let e=fp.get(t);return e?(Kn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fp.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AM(t,e){const n=Zl(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(cl(i,e!=null?e:{}))return s;fn(s,"already-initialized")}return n.initialize({options:e})}function DM(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(qn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function RM(){return gp()==="http:"||gp()==="https:"}function gp(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RM()||Jy()||"connection"in navigator)?navigator.onLine:!0}function MM(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kn(n>e,"Short delay should be less than long delay!"),this.isMobile=Xy()||Zy()}get(){return OM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t,e){Kn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;Vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;Vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;Vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=new sa(3e4,6e4);function ia(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ss(t,e,n,r,s={}){return v_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=qo(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),p_.fetch()(y_(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function v_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},PM),e);try{const s=new LM(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ca(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ca(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ca(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ca(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw xM(t,c,u);fn(t,c)}}catch(s){if(s instanceof Mn)throw s;fn(t,"network-request-failed")}}async function Du(t,e,n,r,s={}){const i=await Ss(t,e,n,r,s);return"mfaPendingCredential"in i&&fn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function y_(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?mf(t.config,s):`${t.config.apiScheme}://${s}`}class LM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(kn(this.auth,"network-request-failed")),NM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ca(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=kn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FM(t,e){return Ss(t,"POST","/v1/accounts:delete",e)}async function BM(t,e){return Ss(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function UM(t,e=!1){const n=He(t),r=await n.getIdToken(e),s=pf(r);de(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ao(dc(s.auth_time)),issuedAtTime:ao(dc(s.iat)),expirationTime:ao(dc(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function dc(t){return Number(t)*1e3}function pf(t){var e;const[n,r,s]=t.split(".");if(n===void 0||r===void 0||s===void 0)return Ha("JWT malformed, contained fewer than 3 sections"),null;try{const i=SC(r);return i?JSON.parse(i):(Ha("Failed to decode base64 JWT payload"),null)}catch(i){return Ha("Caught error parsing JWT payload as JSON",(e=i)===null||e===void 0?void 0:e.toString()),null}}function VM(t){const e=pf(t);return de(e,"internal-error"),de(typeof e.exp!="undefined","internal-error"),de(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ps(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Mn&&qM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function qM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){var e;try{await this.user.getIdToken(!0)}catch(n){((e=n)===null||e===void 0?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ao(this.lastLoginAt),this.creationTime=ao(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ps(t,BM(n,{idToken:r}));de(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?HM(i.providerUserInfo):[],a=zM(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new w_(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function jM(t){const e=He(t);await Dl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zM(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function HM(t){return t.map(e=>{var{providerId:n}=e,r=ff(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(t,e){const n=await v_(t,{},async()=>{const r=qo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=y_(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",p_.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken!="undefined","internal-error"),de(typeof e.refreshToken!="undefined","internal-error");const n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):VM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return de(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await KM(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Po;return r&&(de(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(de(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(de(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Po,this.toJSON())}_performRefresh(){return Vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(t,e){de(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class Zr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=ff(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $M(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new w_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ps(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return UM(this,e)}reload(){return jM(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Dl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ps(this,FM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,c;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(s=n.email)!==null&&s!==void 0?s:void 0,f=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,p=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:D,isAnonymous:N,providerData:w,stsTokenManager:I}=n;de(b&&I,e,"internal-error");const T=Po.fromJSON(this.name,I);de(typeof b=="string",e,"internal-error"),Zn(h,e.name),Zn(d,e.name),de(typeof D=="boolean",e,"internal-error"),de(typeof N=="boolean",e,"internal-error"),Zn(f,e.name),Zn(g,e.name),Zn(E,e.name),Zn(v,e.name),Zn(_,e.name),Zn(p,e.name);const P=new Zr({uid:b,auth:e,email:d,emailVerified:D,displayName:h,isAnonymous:N,photoURL:g,phoneNumber:f,tenantId:E,stsTokenManager:T,createdAt:_,lastLoginAt:p});return w&&Array.isArray(w)&&(P.providerData=w.map(R=>Object.assign({},R))),v&&(P._redirectEventId=v),P}static async _fromIdTokenResponse(e,n,r=!1){const s=new Po;s.updateFromServerResponse(n);const i=new Zr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Dl(i),i}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}b_.type="NONE";const mp=b_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t,e,n){return`firebase:${t}:${e}:${n}`}class Qs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ka(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ka("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Zr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Qs(qn(mp),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||qn(mp);const o=Ka(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const h=Zr._fromJSON(e,c);u!==i&&(a=h),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Qs(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Qs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(I_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(__(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(S_(e))return"Blackberry";if(k_(e))return"Webos";if(vf(e))return"Safari";if((e.includes("chrome/")||E_(e))&&!e.includes("edge/"))return"Chrome";if(T_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function __(t=We()){return/firefox\//i.test(t)}function vf(t=We()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function E_(t=We()){return/crios\//i.test(t)}function I_(t=We()){return/iemobile/i.test(t)}function T_(t=We()){return/android/i.test(t)}function S_(t=We()){return/blackberry/i.test(t)}function k_(t=We()){return/webos/i.test(t)}function Ru(t=We()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function GM(t=We()){var e;return Ru(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function WM(){return ew()&&document.documentMode===10}function C_(t=We()){return Ru(t)||T_(t)||k_(t)||S_(t)||/windows phone/i.test(t)||I_(t)}function YM(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(t,e=[]){let n;switch(t){case"Browser":n=pp(We());break;case"Worker":n=`${pp(We())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){var n;if(this.auth.currentUser===e)return;const r=[];try{for(const s of this.queue)await s(e),s.onAbort&&r.push(s.onAbort)}catch(s){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:(n=s)===null||n===void 0?void 0:n.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vp(this),this.idTokenSubscription=new vp(this),this.beforeStateQueue=new QM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m_,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Qs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l==null?void 0:l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){var n;try{await Dl(e)}catch(r){if(((n=r)===null||n===void 0?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?He(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(qn(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Vo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qn(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await Qs.create(this,[qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return de(o,this,"internal-error"),o.then(()=>i(this.currentUser)),typeof n=="function"?e.addObserver(n,r,s):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=x_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function yf(t){return He(t)}class vp{constructor(e){this.auth=e,this.observer=null,this.addObserver=LC(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vn("not implemented")}_getIdTokenResponse(e){return Vn("not implemented")}_linkToIdToken(e,n){return Vn("not implemented")}_getReauthenticationResolver(e){return Vn("not implemented")}}async function A_(t,e){return Ss(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JM(t,e){return Du(t,"POST","/v1/accounts:signInWithPassword",ia(t,e))}async function ZM(t,e){return Ss(t,"POST","/v1/accounts:sendOobCode",ia(t,e))}async function eP(t,e){return ZM(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tP(t,e){return Du(t,"POST","/v1/accounts:signInWithEmailLink",ia(t,e))}async function nP(t,e){return Du(t,"POST","/v1/accounts:signInWithEmailLink",ia(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends wf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new No(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new No(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if((n==null?void 0:n.email)&&(n==null?void 0:n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return JM(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return tP(e,{email:this._email,oobCode:this._password});default:fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return A_(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return nP(e,{idToken:n,email:this._email,oobCode:this._password});default:fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(t,e){return Du(t,"POST","/v1/accounts:signInWithIdp",ia(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP="http://localhost";class vs extends wf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=ff(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new vs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Xs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xs(e,n)}buildRequest(){const e={requestUri:rP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iP(t){const e=Vi(qi(t)).link,n=e?Vi(qi(e)).deep_link_id:null,r=Vi(qi(t)).deep_link_id;return(r?Vi(qi(r)).link:null)||r||n||e||t}class bf{constructor(e){var n,r,s,i,o,a;const l=Vi(qi(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,h=sP((s=l.mode)!==null&&s!==void 0?s:null);de(u&&c&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=c,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=iP(e);try{return new bf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(){this.providerId=Ei.PROVIDER_ID}static credential(e,n){return No._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=bf.parseLink(n);return de(r,"argument-error"),No._fromEmailAndCode(e,r.code,r.tenantId)}}Ei.PROVIDER_ID="password";Ei.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ei.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa extends D_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends oa{constructor(){super("facebook.com")}static credential(e){return vs._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";ir.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends oa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return vs._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return or.credential(n,r)}catch{return null}}}or.GOOGLE_SIGN_IN_METHOD="google.com";or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends oa{constructor(){super("github.com")}static credential(e){return vs._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.GITHUB_SIGN_IN_METHOD="github.com";ar.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends oa{constructor(){super("twitter.com")}static credential(e,n){return vs._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return lr.credential(n,r)}catch{return null}}}lr.TWITTER_SIGN_IN_METHOD="twitter.com";lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Zr._fromIdTokenResponse(e,r,s),o=yp(r);return new hi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=yp(r);return new hi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function yp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl extends Mn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Rl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Rl(e,n,r,s)}}function R_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Rl._fromErrorAndOperation(t,i,e,r):i})}async function oP(t,e,n=!1){const r=await ps(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return hi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aP(t,e,n=!1){var r;const{auth:s}=t,i="reauthenticate";try{const o=await ps(t,R_(s,i,e,t),n);de(o.idToken,s,"internal-error");const a=pf(o.idToken);de(a,s,"internal-error");const{sub:l}=a;return de(t.uid===l,s,"user-mismatch"),hi._forOperation(t,i,o)}catch(o){throw((r=o)===null||r===void 0?void 0:r.code)==="auth/user-not-found"&&fn(s,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O_(t,e,n=!1){const r="signIn",s=await R_(t,r,e),i=await hi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function lP(t,e){return O_(yf(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(t,e,n){var r;de(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),de(typeof n.dynamicLinkDomain=="undefined"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(de(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(de(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(t,e,n){const r=He(t),s={requestType:"PASSWORD_RESET",email:e};n&&uP(r,s,n),await eP(r,s)}function hP(t,e,n){return lP(He(t),Ei.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dP(t,e){return Ss(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fP(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=He(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ps(r,dP(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function gP(t,e){return M_(He(t),e,null)}function mP(t,e){return M_(He(t),null,e)}async function M_(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(i.email=e),n&&(i.password=n);const o=await ps(t,A_(r,i));await t._updateTokensIfNecessary(o,!0)}function pP(t,e,n,r){return He(t).onAuthStateChanged(e,n,r)}function vP(t){return He(t).signOut()}const Ol="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ol,"1"),this.storage.removeItem(Ol),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(){const t=We();return vf(t)||Ru(t)}const wP=1e3,bP=10;class N_ extends P_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=yP()&&YM(),this.fallbackToPolling=C_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);WM()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,bP):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},wP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}N_.type="LOCAL";const _P=N_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_ extends P_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}L_.type="SESSION";const F_=L_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(t){return Promise.all(t.map(async e=>{try{const n=await e;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ou(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await EP(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ou.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=_f("",20);s.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const d=h;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(d.data.response);break;default:clearTimeout(c),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return window}function TP(t){Cn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(){return typeof Cn().WorkerGlobalScope!="undefined"&&typeof Cn().importScripts=="function"}async function SP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function CP(){return B_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="firebaseLocalStorageDb",xP=1,Ml="firebaseLocalStorage",V_="fbase_key";class aa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mu(t,e){return t.transaction([Ml],e?"readwrite":"readonly").objectStore(Ml)}function AP(){const t=indexedDB.deleteDatabase(U_);return new aa(t).toPromise()}function Th(){const t=indexedDB.open(U_,xP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ml,{keyPath:V_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ml)?e(r):(r.close(),await AP(),e(await Th()))})})}async function wp(t,e,n){const r=Mu(t,!0).put({[V_]:e,value:n});return new aa(r).toPromise()}async function DP(t,e){const n=Mu(t,!1).get(e),r=await new aa(n).toPromise();return r===void 0?null:r.value}function bp(t,e){const n=Mu(t,!0).delete(e);return new aa(n).toPromise()}const RP=800,OP=3;class q_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Th(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>OP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ou._getInstance(CP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await SP(),!this.activeServiceWorker)return;this.sender=new IP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((n=r[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Th();return await wp(e,Ol,"1"),await bp(e,Ol),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>wp(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>DP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>bp(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Mu(s,!1).getAll();return new aa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}q_.type="LOCAL";const MP=q_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function NP(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=kn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",PP().appendChild(r)})}function LP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}new sa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(t,e){return e?qn(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef extends wf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BP(t){return O_(t.auth,new Ef(t),t.bypassAuthState)}function UP(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),aP(n,new Ef(t),t.bypassAuthState)}async function VP(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),oP(n,new Ef(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BP;case"linkViaPopup":case"linkViaRedirect":return VP;case"reauthViaPopup":case"reauthViaRedirect":return UP;default:fn(this.auth,"internal-error")}}resolve(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP=new sa(2e3,1e4);class $s extends $_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,$s.currentPopupAction&&$s.currentPopupAction.cancel(),$s.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){Kn(this.filter.length===1,"Popup operations only handle one event");const e=_f();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$s.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kn(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,qP.get())};e()}}$s.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P="pendingRedirect",Ga=new Map;class jP extends $_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ga.get(this.auth._key());if(!e){try{const r=await zP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ga.set(this.auth._key(),e)}return this.bypassAuthState||Ga.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zP(t,e){const n=GP(e),r=KP(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function HP(t,e){Ga.set(t._key(),e)}function KP(t){return qn(t._redirectPersistence)}function GP(t){return Ka($P,t.config.apiKey,t.name)}async function WP(t,e,n=!1){const r=yf(t),s=FP(r,e),o=await new jP(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=10*60*1e3;class QP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!j_(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(kn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YP&&this.cachedEventUids.clear(),this.cachedEventUids.has(_p(e))}saveEventToCache(e){this.cachedEventUids.add(_p(e)),this.lastProcessedEventTime=Date.now()}}function _p(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function j_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return j_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JP(t,e={}){return Ss(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eN=/^https?/;async function tN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await JP(t);for(const n of e)try{if(nN(n))return}catch{}fn(t,"unauthorized-domain")}function nN(t){const e=Ih(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!eN.test(n))return!1;if(ZP.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=new sa(3e4,6e4);function Ep(){const t=Cn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function sN(t){return new Promise((e,n)=>{var r,s,i;function o(){Ep(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ep(),n(kn(t,"network-request-failed"))},timeout:rN.get()})}if(!((s=(r=Cn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Cn().gapi)===null||i===void 0)&&i.load)o();else{const a=LP("iframefcb");return Cn()[a]=()=>{gapi.load?o():n(kn(t,"network-request-failed"))},NP(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Wa=null,e})}let Wa=null;function iN(t){return Wa=Wa||sN(t),Wa}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=new sa(5e3,15e3),aN="__/auth/iframe",lN="emulator/auth/iframe",uN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hN(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?mf(e,lN):`https://${t.config.authDomain}/${aN}`,r={apiKey:e.apiKey,appName:t.name,v:mi},s=cN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${qo(r).slice(1)}`}async function dN(t){const e=await iN(t),n=Cn().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:hN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uN,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=kn(t,"network-request-failed"),a=Cn().setTimeout(()=>{i(o)},oN.get());function l(){Cn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gN=500,mN=600,pN="_blank",vN="http://localhost";class Ip{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yN(t,e,n,r=gN,s=mN){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},fN),{width:r.toString(),height:s.toString(),top:i,left:o}),u=We().toLowerCase();n&&(a=E_(u)?pN:n),__(u)&&(e=e||vN,l.scrollbars="yes");const c=Object.entries(l).reduce((d,[f,g])=>`${d}${f}=${g},`,"");if(GM(u)&&a!=="_self")return wN(e||"",a),new Ip(null);const h=window.open(e||"",a,c);de(h,t,"popup-blocked");try{h.focus()}catch{}return new Ip(h)}function wN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="__/auth/handler",_N="emulator/auth/handler";function Tp(t,e,n,r,s,i){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:mi,eventId:s};if(e instanceof D_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",NC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,u]of Object.entries(i||{}))o[l]=u}if(e instanceof oa){const l=e.getScopes().filter(u=>u!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const l of Object.keys(a))a[l]===void 0&&delete a[l];return`${EN(t)}?${qo(a).slice(1)}`}function EN({config:t}){return t.emulator?mf(t,_N):`https://${t.authDomain}/${bN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc="webStorageSupport";class IN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=F_,this._completeRedirectFn=WP,this._overrideRedirectResult=HP}async _openPopup(e,n,r,s){var i;Kn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=Tp(e,n,r,Ih(),s);return yN(e,o,_f())}async _openRedirect(e,n,r,s){return await this._originValidation(e),TP(Tp(e,n,r,Ih(),s)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Kn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await dN(e),r=new QP(e);return n.register("authEvent",s=>(de(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fc,{type:fc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[fc];o!==void 0&&n(!!o),fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=tN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return C_()||vf()||Ru()}}const TN=IN;var Sp="@firebase/auth",kp="0.20.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{var s;e(((s=r)===null||s===void 0?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function CN(t){rs(new yr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),{apiKey:i,authDomain:o}=r.options;return((a,l)=>{de(i&&!i.includes(":"),"invalid-api-key",{appName:a.name}),de(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const u={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:x_(t)},c=new XM(a,l,u);return DM(c,n),c})(r,s)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),rs(new yr("auth-internal",e=>{const n=yf(e.getProvider("auth").getImmediate());return(r=>new SN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Sn(Sp,kp,kN(t)),Sn(Sp,kp,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(t=ad()){const e=Zl(t,"auth");return e.isInitialized()?e.getImmediate():AM(t,{popupRedirectResolver:TN,persistence:[MP,_P,F_]})}CN("Browser");const AN={apiKey:"AIzaSyBer3u9UeKq6rr3ThZ-YA84JAyK0dWIXW8",authDomain:"webferrol-app.firebaseapp.com",projectId:"webferrol-app",storageBucket:"webferrol-app.appspot.com",messagingSenderId:"333482588665",appId:"1:333482588665:web:92ed7fba0d6376a9b1a528",measurementId:"G-0DVHLVC3CQ"},z_=Nx(AN),DN=XR(z_),H_=TM(z_);JR(DN).catch(t=>{t.code=="failed-precondition"||t.code=="unimplemented"});const pn=xN(),RN=async(t,e="proyectos/imagen.jpg")=>{const n=f_(H_,e);return await EM(n,t)},ON=async(t="profile/xurxo.jpg")=>{const e=f_(H_,t);return await IM(e)},Cp={"auth/too-many-requests":"Demasiados intentos vuelva a intentarlo m\xE1s tarde","auth/user-not-found":"Usuario NO registrado o contrase\xF1a no v\xE1lida","auth/invalid-password":"Usuario NO registrado o contrase\xF1a no v\xE1lida","auth/wrong-password":"Usuario NO registrado o contrase\xF1a no v\xE1lida","auth/missing-email":"La direcci\xF3n de correo electr\xF3nico no es v\xE1lida","auth/invalid-email":"La direcci\xF3n de correo electr\xF3nico no es v\xE1lida","permission-denied":"Permisos insuficientes o colecci\xF3n inexistente","auth/requires-recent-login":"Para actualizar el correo electr\xF3nico o contrase\xF1a debes loguearte de nuevo"},xp=US("users",{state:()=>({user:null,loading:[!1,!1],error:null,ok:null}),actions:{setUser(t){this.user=t},async signIn({email:t,password:e,accept:n}){this.loading[0]=!0;try{if(n!==!0)throw new Error("Debes marcar la casilla de verificaci\xF3n");const r=await hP(pn,t,e);this.setUser(r.user)}catch(r){this.error=Cp[r.code]||r.message}finally{this.loading[0]=!1}},async onAuthState(){if(this.user===null)return new Promise((t,e)=>{pP(pn,r=>{r?(this.setUser(r),t(r)):t(null)},r=>e(r))()})},async onSendPasswordResetEmail(t){try{this.loading[1]=!0,await cP(pn,t),this.ok=`Se ha enviado a su cuenta de correo ${t} las instrucciones para crear una nueva contrase\xF1a. Si no lo encuentra compruebe su bandeja de SPAN`}catch(e){this.error=Cp[e.code]||e.message}finally{this.loading[1]=!1}},async handleSignOut(){try{await vP(pn),this.user=null}catch(t){console.log(t)}},async onUpdatePassword(t){pn.currentUser!==null&&await mP(pn.currentUser,t)},async onUpdateEmail(t){pn.currentUser!==null&&await gP(pn.currentUser,t)},async onUpdateProfile(t){pn.currentUser!==null&&(await fP(pn.currentUser,t),this.user={...this.user,...t})},async onUploadProfile(t){if(this.user){await RN(t,`profiles/${this.user.uid}`);const n={photoURL:await ON(`profiles/${this.user.uid}`)};await this.onUpdateProfile(n),this.user={...this.user,...n}}}},getters:{getLastLoginAt:t=>{var e,n;if(((n=(e=t.user)==null?void 0:e.metadata)==null?void 0:n.lastLoginAt)!==void 0){const r=Number(t.user.metadata.lastLoginAt);return EC.formatDate(r,"DD-MM-YYYY HH:mm:ss")}return""},getLastSignInTime:t=>{var e,n;return((n=(e=t.user)==null?void 0:e.metadata)==null?void 0:n.lastSignInTime)!==void 0?t.user.metadata.lastSignInTime:""}}});var gc=async function(){const{onAuthState:t}=xp(),{user:e}=VS(xp());await t();const r=$k({scrollBehavior:()=>({left:0,top:0}),routes:Kk,history:sk("/")});return r.beforeEach((s,i,o)=>{var a,l;s.meta.protectedRoute===!0&&((a=e.value)==null?void 0:a.uid)===void 0?o("/sign-in"):s.meta.authRoute===!0&&((l=e.value)==null?void 0:l.uid)!==void 0?o("/"):o()}),r};async function MN(t,e){const n=t(OS);n.use(xS,e);const r=typeof $u=="function"?await $u({}):$u;n.use(r);const s=An(typeof gc=="function"?await gc({store:r}):gc);return r.use(({store:i})=>{i.router=s}),{app:n,store:r,router:s}}const PN=Object.prototype.toString,mc=Object.prototype.hasOwnProperty,K_={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(t=>{K_["[object "+t+"]"]=t.toLowerCase()});function Ya(t){return t===null?String(t):K_[PN.call(t)]||"object"}function Ap(t){if(!t||Ya(t)!=="object"||t.constructor&&!mc.call(t,"constructor")&&!mc.call(t.constructor.prototype,"isPrototypeOf"))return!1;let e;for(e in t);return e===void 0||mc.call(t,e)}function G_(){let t,e,n,r,s,i,o=arguments[0]||{},a=1,l=!1;const u=arguments.length;for(typeof o=="boolean"&&(l=o,o=arguments[1]||{},a=2),Object(o)!==o&&Ya(o)!=="function"&&(o={}),u===a&&(o=this,a--);a<u;a++)if((t=arguments[a])!==null)for(e in t)n=o[e],r=t[e],o!==r&&(l&&r&&(Ap(r)||(s=Ya(r)==="array"))?(s?(s=!1,i=n&&Ya(n)==="array"?n:[]):i=n&&Ap(n)?n:{},o[e]=G_(l,i,r)):r!==void 0&&(o[e]=r));return o}let Dp,Sh;const Rp=[];function NN(t){t.title&&(t.title=t.titleTemplate?t.titleTemplate(t.title):t.title,delete t.titleTemplate),[["meta","content"],["link","href"]].forEach(e=>{const n=t[e[0]],r=e[1];for(const s in n){const i=n[s];i.template&&(Object.keys(i).length===1?delete n[s]:(i[r]=i.template(i[r]||""),delete i.template))}})}function LN(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const n in t)if(t[n]!==e[n])return!0}function Op(t){return["class","style"].includes(t)===!1}function Mp(t){return["lang","dir"].includes(t)===!1}function FN(t,e){const n={},r={};return t===void 0?{add:e,remove:r}:(t.title!==e.title&&(n.title=e.title),["meta","link","script","htmlAttr","bodyAttr"].forEach(s=>{const i=t[s],o=e[s];if(r[s]=[],i==null){n[s]=o;return}n[s]={};for(const a in i)o.hasOwnProperty(a)===!1&&r[s].push(a);for(const a in o)i.hasOwnProperty(a)===!1?n[s][a]=o[a]:LN(i[a],o[a])===!0&&(r[s].push(a),n[s][a]=o[a])}),{add:n,remove:r})}function BN({add:t,remove:e}){t.title&&(document.title=t.title),Object.keys(e).length>0&&(["meta","link","script"].forEach(n=>{e[n].forEach(r=>{document.head.querySelector(`${n}[data-qmeta="${r}"]`).remove()})}),e.htmlAttr.filter(Mp).forEach(n=>{document.documentElement.removeAttribute(n)}),e.bodyAttr.filter(Op).forEach(n=>{document.body.removeAttribute(n)})),["meta","link","script"].forEach(n=>{const r=t[n];for(const s in r){const i=document.createElement(n);for(const o in r[s])o!=="innerHTML"&&i.setAttribute(o,r[s][o]);i.setAttribute("data-qmeta",s),n==="script"&&(i.innerHTML=r[s].innerHTML||""),document.head.appendChild(i)}}),Object.keys(t.htmlAttr).filter(Mp).forEach(n=>{document.documentElement.setAttribute(n,t.htmlAttr[n]||"")}),Object.keys(t.bodyAttr).filter(Op).forEach(n=>{document.body.setAttribute(n,t.bodyAttr[n]||"")})}function UN(){const t={title:"",titleTemplate:null,meta:{},link:{},script:{},htmlAttr:{},bodyAttr:{}};for(let e=0;e<Rp.length;e++){const{active:n,val:r}=Rp[e];n===!0&&G_(!0,t,r)}NN(t),BN(FN(Sh,t)),Sh=t}function mB(){clearTimeout(Dp),Dp=setTimeout(UN,50)}var VN={install(t){this.__installed!==!0&&zn.value===!0&&(Sh=window.__Q_META__,document.getElementById("qmeta-init").remove())}};const kh={xs:18,sm:24,md:32,lg:38,xl:46},Ii={size:String};function Ti(t,e=kh){return C(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}const ct=t=>An(Wh(t)),qN=t=>An(t);function ln(t,e){return t!==void 0&&t()||e}function pB(t,e){if(t!==void 0){const n=t();if(n!=null)return n.slice()}return e}function Gr(t,e){return t!==void 0?e.concat(t()):e}function W_(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}function vB(t,e,n,r,s,i){e.key=r+s;const o=S(t,e,n);return s===!0?Qv(o,i()):o}const Pp="0 0 24 24",Np=t=>t,pc=t=>`ionicons ${t}`,Y_={"mdi-":t=>`mdi ${t}`,"icon-":Np,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":pc,"ion-ios":pc,"ion-logo":pc,"iconfont ":Np,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`},Q_={o_:"-outlined",r_:"-round",s_:"-sharp"},X_={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},$N=new RegExp("^("+Object.keys(Y_).join("|")+")"),jN=new RegExp("^("+Object.keys(Q_).join("|")+")"),Lp=new RegExp("^("+Object.keys(X_).join("|")+")"),zN=/^[Mm]\s?[-+]?\.?\d/,HN=/^img:/,KN=/^svguse:/,GN=/^ion-/,WN=/^(fa-(solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /;var On=ct({name:"QIcon",props:{...Ii,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=Ke(),r=Ti(t),s=C(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),i=C(()=>{let o,a=t.name;if(a==="none"||!a)return{none:!0};if(n.iconMapFn!==null){const c=n.iconMapFn(a);if(c!==void 0)if(c.icon!==void 0){if(a=c.icon,a==="none"||!a)return{none:!0}}else return{cls:c.cls,content:c.content!==void 0?c.content:" "}}if(zN.test(a)===!0){const[c,h=Pp]=a.split("|");return{svg:!0,viewBox:h,nodes:c.split("&&").map(d=>{const[f,g,E]=d.split("@@");return S("path",{style:g,d:f,transform:E})})}}if(HN.test(a)===!0)return{img:!0,src:a.substring(4)};if(KN.test(a)===!0){const[c,h=Pp]=a.split("|");return{svguse:!0,src:c.substring(7),viewBox:h}}let l=" ";const u=a.match($N);if(u!==null)o=Y_[u[1]](a);else if(WN.test(a)===!0)o=a;else if(GN.test(a)===!0)o=`ionicons ion-${n.platform.is.ios===!0?"ios":"md"}${a.substring(3)}`;else if(Lp.test(a)===!0){o="notranslate material-symbols";const c=a.match(Lp);c!==null&&(a=a.substring(6),o+=X_[c[1]]),l=a}else{o="notranslate material-icons";const c=a.match(jN);c!==null&&(a=a.substring(2),o+=Q_[c[1]]),l=a}return{cls:o,content:l}});return()=>{const o={class:s.value,style:r.value,"aria-hidden":"true",role:"presentation"};return i.value.none===!0?S(t.tag,o,ln(e.default)):i.value.img===!0?S("span",o,Gr(e.default,[S("img",{src:i.value.src})])):i.value.svg===!0?S("span",o,Gr(e.default,[S("svg",{viewBox:i.value.viewBox||"0 0 24 24"},i.value.nodes)])):i.value.svguse===!0?S("span",o,Gr(e.default,[S("svg",{viewBox:i.value.viewBox},[S("use",{"xlink:href":i.value.src})])])):(i.value.cls!==void 0&&(o.class+=" "+i.value.cls),S(t.tag,o,Gr(e.default,[i.value.content])))}}}),YN=ct({name:"QAvatar",props:{...Ii,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const n=Ti(t),r=C(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),s=C(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const i=t.icon!==void 0?[S(On,{name:t.icon})]:void 0;return S("div",{class:r.value,style:n.value},[S("div",{class:"q-avatar__content row flex-center overflow-hidden",style:s.value},W_(e.default,i))])}}});const QN={size:{type:[Number,String],default:"1em"},color:String};function XN(t){return{cSize:C(()=>t.size in kh?`${kh[t.size]}px`:t.size),classes:C(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}var ys=ct({name:"QSpinner",props:{...QN,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:n}=XN(t);return()=>S("svg",{class:n.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[S("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function yB(t){if(t===window)return{top:0,left:0};const{top:e,left:n}=t.getBoundingClientRect();return{top:e,left:n}}function wB(t){return t===window?window.innerHeight:t.getBoundingClientRect().height}function Ch(t,e){const n=t.style;for(const r in e)n[r]=e[r]}function JN(t){if(t==null)return;if(typeof t=="string")try{return document.querySelector(t)||void 0}catch{return}const e=$e(t)===!0?t.value:t;if(e)return e.$el||e}function ZN(t,e){if(t==null||t.contains(e)===!0)return!0;for(let n=t.nextElementSibling;n!==null;n=n.nextElementSibling)if(n.contains(e))return!0;return!1}function eL(t,e=250){let n=!1,r;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},e),r=t.apply(this,arguments)),r}}function Fp(t,e,n,r){n.modifiers.stop===!0&&ti(t);const s=n.modifiers.color;let i=n.modifiers.center;i=i===!0||r===!0;const o=document.createElement("span"),a=document.createElement("span"),l=rS(t),{left:u,top:c,width:h,height:d}=e.getBoundingClientRect(),f=Math.sqrt(h*h+d*d),g=f/2,E=`${(h-f)/2}px`,v=i?E:`${l.left-u-g}px`,_=`${(d-f)/2}px`,p=i?_:`${l.top-c-g}px`;a.className="q-ripple__inner",Ch(a,{height:`${f}px`,width:`${f}px`,transform:`translate3d(${v},${p},0) scale3d(.2,.2,1)`,opacity:0}),o.className=`q-ripple${s?" text-"+s:""}`,o.setAttribute("dir","ltr"),o.appendChild(a),e.appendChild(o);const b=()=>{o.remove(),clearTimeout(D)};n.abort.push(b);let D=setTimeout(()=>{a.classList.add("q-ripple__inner--enter"),a.style.transform=`translate3d(${E},${_},0) scale3d(1,1,1)`,a.style.opacity=.2,D=setTimeout(()=>{a.classList.remove("q-ripple__inner--enter"),a.classList.add("q-ripple__inner--leave"),a.style.opacity=0,D=setTimeout(()=>{o.remove(),n.abort.splice(n.abort.indexOf(b),1)},275)},250)},50)}function Bp(t,{modifiers:e,value:n,arg:r}){const s=Object.assign({},t.cfg.ripple,e,n);t.modifiers={early:s.early===!0,stop:s.stop===!0,center:s.center===!0,color:s.color||r,keyCodes:[].concat(s.keyCodes||13)}}var tL=qN({name:"ripple",beforeMount(t,e){const n=e.instance.$.appContext.config.globalProperties.$q.config||{};if(n.ripple===!1)return;const r={cfg:n,enabled:e.value!==!1,modifiers:{},abort:[],start(s){r.enabled===!0&&s.qSkipRipple!==!0&&s.type===(r.modifiers.early===!0?"pointerdown":"click")&&Fp(s,t,r,s.qKeyEvent===!0)},keystart:eL(s=>{r.enabled===!0&&s.qSkipRipple!==!0&&vo(s,r.modifiers.keyCodes)===!0&&s.type===`key${r.modifiers.early===!0?"down":"up"}`&&Fp(s,t,r,!0)},300)};Bp(r,e),t.__qripple=r,iS(r,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const n=t.__qripple;n!==void 0&&(n.enabled=e.value!==!1,n.enabled===!0&&Object(e.value)===e.value&&Bp(n,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(n=>{n()}),oS(e,"main"),delete t._qripple)}});const J_={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},nL=Object.keys(J_),Z_={align:{type:String,validator:t=>nL.includes(t)}};function eE(t){return C(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${J_[e]}`})}function Qa(t){if(Object(t.$parent)===t.$parent)return t.$parent;for(t=t.$.parent;Object(t)===t;){if(Object(t.proxy)===t.proxy)return t.proxy;t=t.parent}}function tE(t){return t.appContext.config.globalProperties.$router!==void 0}function Up(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function Vp(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function rL(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(Array.isArray(s)===!1||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function qp(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function sL(t,e){return Array.isArray(t)===!0?qp(t,e):Array.isArray(e)===!0?qp(e,t):t===e}function iL(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(sL(t[n],e[n])===!1)return!1;return!0}const oL={to:[String,Object],replace:Boolean,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"},href:String,target:String,disable:Boolean};function aL(t){const e=Ke(),{props:n,proxy:r}=e,s=tE(e),i=C(()=>n.disable!==!0&&n.href!==void 0),o=C(()=>s===!0&&n.disable!==!0&&i.value!==!0&&n.to!==void 0&&n.to!==null&&n.to!==""),a=C(()=>{if(o.value===!0)try{return r.$router.resolve(n.to)}catch{}return null}),l=C(()=>a.value!==null),u=C(()=>i.value===!0||l.value===!0),c=C(()=>n.type==="a"||u.value===!0?"a":n.tag||t||"div"),h=C(()=>i.value===!0?{href:n.href,target:n.target}:l.value===!0?{href:a.value.href,target:n.target}:{}),d=C(()=>{if(l.value===!1)return null;const{matched:_}=a.value,{length:p}=_,b=_[p-1];if(b===void 0)return-1;const D=r.$route.matched;if(D.length===0)return-1;const N=D.findIndex(Vp.bind(null,b));if(N>-1)return N;const w=Up(_[p-2]);return p>1&&Up(b)===w&&D[D.length-1].path!==w?D.findIndex(Vp.bind(null,_[p-2])):N}),f=C(()=>l.value===!0&&d.value>-1&&rL(r.$route.params,a.value.params)),g=C(()=>f.value===!0&&d.value===r.$route.matched.length-1&&iL(r.$route.params,a.value.params)),E=C(()=>l.value===!0?g.value===!0?` ${n.exactActiveClass} ${n.activeClass}`:n.exact===!0?"":f.value===!0?` ${n.activeClass}`:"":"");function v(_){return n.disable===!0||_.metaKey||_.altKey||_.ctrlKey||_.shiftKey||_.__qNavigate!==!0&&_.defaultPrevented===!0||_.button!==void 0&&_.button!==0||n.target==="_blank"?!1:(ur(_),r.$router[n.replace===!0?"replace":"push"](n.to).catch(p=>p))}return{hasRouterLink:l,hasHrefLink:i,hasLink:u,linkTag:c,linkRoute:a,linkIsActive:f,linkIsExactActive:g,linkClass:E,linkProps:h,navigateToRouterLink:v}}const $p={none:0,xs:4,sm:8,md:16,lg:24,xl:32},lL={xs:8,sm:10,md:14,lg:20,xl:24},uL=["button","submit","reset"],cL=/[^\s]\/[^\s]/,hL={...Ii,...oL,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,round:Boolean,square:Boolean,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...Z_.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean};function dL(t){const e=Ti(t,lL),n=eE(t),{hasRouterLink:r,hasLink:s,linkTag:i,linkProps:o,navigateToRouterLink:a}=aL("button"),l=C(()=>{const v=t.fab===!1&&t.fabMini===!1?e.value:{};return t.padding!==void 0?Object.assign({},v,{padding:t.padding.split(/\s+/).map(_=>_ in $p?$p[_]+"px":_).join(" "),minWidth:"0",minHeight:"0"}):v}),u=C(()=>t.rounded===!0||t.fab===!0||t.fabMini===!0),c=C(()=>t.disable!==!0&&t.loading!==!0),h=C(()=>c.value===!0?t.tabindex||0:-1),d=C(()=>t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":"standard"),f=C(()=>{const v={tabindex:h.value};return s.value===!0?Object.assign(v,o.value):uL.includes(t.type)===!0&&(v.type=t.type),i.value==="a"?(t.disable===!0?v["aria-disabled"]="true":v.href===void 0&&(v.role="button"),r.value!==!0&&cL.test(t.type)===!0&&(v.type=t.type)):t.disable===!0&&(v.disabled="",v["aria-disabled"]="true"),t.loading===!0&&t.percentage!==void 0&&Object.assign(v,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t.percentage}),v}),g=C(()=>{let v;t.color!==void 0?t.flat===!0||t.outline===!0?v=`text-${t.textColor||t.color}`:v=`bg-${t.color} text-${t.textColor||"white"}`:t.textColor&&(v=`text-${t.textColor}`);const _=t.round===!0?"round":`rectangle${u.value===!0?" q-btn--rounded":t.square===!0?" q-btn--square":""}`;return`q-btn--${d.value} q-btn--${_}`+(v!==void 0?" "+v:"")+(c.value===!0?" q-btn--actionable q-focusable q-hoverable":t.disable===!0?" disabled":"")+(t.fab===!0?" q-btn--fab":t.fabMini===!0?" q-btn--fab-mini":"")+(t.noCaps===!0?" q-btn--no-uppercase":"")+(t.dense===!0?" q-btn--dense":"")+(t.stretch===!0?" no-border-radius self-stretch":"")+(t.glossy===!0?" glossy":"")+(t.square?" q-btn--square":"")}),E=C(()=>n.value+(t.stack===!0?" column":" row")+(t.noWrap===!0?" no-wrap text-no-wrap":"")+(t.loading===!0?" q-btn__content--hidden":""));return{classes:g,style:l,innerClasses:E,attributes:f,hasRouterLink:r,hasLink:s,linkTag:i,navigateToRouterLink:a,isActionable:c}}const{passiveCapture:Yt}=Lt;let Os=null,Ms=null,Ps=null;var Lo=ct({name:"QBtn",props:{...hL,percentage:Number,darkPercentage:Boolean},emits:["click","keydown","touchstart","mousedown","keyup"],setup(t,{slots:e,emit:n}){const{proxy:r}=Ke(),{classes:s,style:i,innerClasses:o,attributes:a,hasRouterLink:l,hasLink:u,linkTag:c,navigateToRouterLink:h,isActionable:d}=dL(t),f=ve(null),g=ve(null);let E=null,v,_;const p=C(()=>t.label!==void 0&&t.label!==null&&t.label!==""),b=C(()=>t.disable===!0||t.ripple===!1?!1:{keyCodes:u.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),D=C(()=>({center:t.round})),N=C(()=>{const q=Math.max(0,Math.min(100,t.percentage));return q>0?{transition:"transform 0.6s",transform:`translateX(${q-100}%)`}:{}}),w=C(()=>t.loading===!0?{onMousedown:Y,onTouchstartPassive:Y,onClick:Y,onKeydown:Y,onKeyup:Y}:d.value===!0?{onClick:T,onKeydown:P,onMousedown:F,onTouchstart:R}:{onClick:Ft}),I=C(()=>({ref:f,class:"q-btn q-btn-item non-selectable no-outline "+s.value,style:i.value,...a.value,...w.value}));function T(q){if(f.value!==null){if(q!==void 0){if(q.defaultPrevented===!0)return;const se=document.activeElement;if(t.type==="submit"&&se!==document.body&&f.value.contains(se)===!1&&se.contains(f.value)===!1){f.value.focus();const O=()=>{document.removeEventListener("keydown",Ft,!0),document.removeEventListener("keyup",O,Yt),f.value!==null&&f.value.removeEventListener("blur",O,Yt)};document.addEventListener("keydown",Ft,!0),document.addEventListener("keyup",O,Yt),f.value.addEventListener("blur",O,Yt)}}if(l.value===!0){const se=()=>{q.__qNavigate=!0,h(q)};n("click",q,se),q.defaultPrevented!==!0&&se()}else n("click",q)}}function P(q){f.value!==null&&(n("keydown",q),vo(q,[13,32])===!0&&Ms!==f.value&&(Ms!==null&&H(),q.defaultPrevented!==!0&&(f.value.focus(),Ms=f.value,f.value.classList.add("q-btn--active"),document.addEventListener("keyup",x,!0),f.value.addEventListener("blur",x,Yt)),Ft(q)))}function R(q){f.value!==null&&(n("touchstart",q),q.defaultPrevented!==!0&&(Os!==f.value&&(Os!==null&&H(),Os=f.value,E=q.target,E.addEventListener("touchcancel",x,Yt),E.addEventListener("touchend",x,Yt)),v=!0,clearTimeout(_),_=setTimeout(()=>{v=!1},200)))}function F(q){f.value!==null&&(q.qSkipRipple=v===!0,n("mousedown",q),q.defaultPrevented!==!0&&Ps!==f.value&&(Ps!==null&&H(),Ps=f.value,f.value.classList.add("q-btn--active"),document.addEventListener("mouseup",x,Yt)))}function x(q){if(f.value!==null&&!(q!==void 0&&q.type==="blur"&&document.activeElement===f.value)){if(q!==void 0&&q.type==="keyup"){if(Ms===f.value&&vo(q,[13,32])===!0){const se=new MouseEvent("click",q);se.qKeyEvent=!0,q.defaultPrevented===!0&&ur(se),q.cancelBubble===!0&&ti(se),f.value.dispatchEvent(se),Ft(q),q.qKeyEvent=!0}n("keyup",q)}H()}}function H(q){const se=g.value;q!==!0&&(Os===f.value||Ps===f.value)&&se!==null&&se!==document.activeElement&&(se.setAttribute("tabindex",-1),se.focus()),Os===f.value&&(E!==null&&(E.removeEventListener("touchcancel",x,Yt),E.removeEventListener("touchend",x,Yt)),Os=E=null),Ps===f.value&&(document.removeEventListener("mouseup",x,Yt),Ps=null),Ms===f.value&&(document.removeEventListener("keyup",x,!0),f.value!==null&&f.value.removeEventListener("blur",x,Yt),Ms=null),f.value!==null&&f.value.classList.remove("q-btn--active")}function Y(q){Ft(q),q.qSkipRipple=!0}return en(()=>{H(!0)}),Object.assign(r,{click:T}),()=>{let q=[];t.icon!==void 0&&q.push(S(On,{name:t.icon,left:t.stack===!1&&p.value===!0,role:"img","aria-hidden":"true"})),p.value===!0&&q.push(S("span",{class:"block"},[t.label])),q=Gr(e.default,q),t.iconRight!==void 0&&t.round===!1&&q.push(S(On,{name:t.iconRight,right:t.stack===!1&&p.value===!0,role:"img","aria-hidden":"true"}));const se=[S("span",{class:"q-focus-helper",ref:g})];return t.loading===!0&&t.percentage!==void 0&&se.push(S("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[S("span",{class:"q-btn__progress-indicator fit block",style:N.value})])),se.push(S("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+o.value},q)),t.loading!==null&&se.push(S(ei,{name:"q-transition--fade"},()=>t.loading===!0?[S("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[S(ys)])]:null)),Qv(S(c.value,I.value,se),[[tL,b.value,void 0,D.value]])}}});let fL=document.body;function If(t){const e=document.createElement("div");if(t!==void 0&&(e.id=t),ll.globalNodes!==void 0){const n=ll.globalNodes.class;n!==void 0&&(e.className=n)}return fL.appendChild(e),e}function nE(t){t.remove()}let gL=0;const Xa={},Ja={},rn={},rE={},mL=/^\s*$/,sE=[],Tf=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],pL=["top-left","top-right","bottom-left","bottom-right"],Us={positive:{icon:t=>t.iconSet.type.positive,color:"positive"},negative:{icon:t=>t.iconSet.type.negative,color:"negative"},warning:{icon:t=>t.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:t=>t.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function iE(t,e,n){if(!t)return Li("parameter required");let r;const s={textColor:"white"};if(t.ignoreDefaults!==!0&&Object.assign(s,Xa),on(t)===!1&&(s.type&&Object.assign(s,Us[s.type]),t={message:t}),Object.assign(s,Us[t.type||s.type],t),typeof s.icon=="function"&&(s.icon=s.icon(e)),s.spinner?(s.spinner===!0&&(s.spinner=ys),s.spinner=An(s.spinner)):s.spinner=!1,s.meta={hasMedia:Boolean(s.spinner!==!1||s.icon||s.avatar),hasText:jp(s.message)||jp(s.caption)},s.position){if(Tf.includes(s.position)===!1)return Li("wrong position",t)}else s.position="bottom";if(s.timeout===void 0)s.timeout=5e3;else{const l=parseInt(s.timeout,10);if(isNaN(l)||l<0)return Li("wrong timeout",t);s.timeout=l}s.timeout===0?s.progress=!1:s.progress===!0&&(s.meta.progressClass="q-notification__progress"+(s.progressClass?` ${s.progressClass}`:""),s.meta.progressStyle={animationDuration:`${s.timeout+1e3}ms`});const i=(Array.isArray(t.actions)===!0?t.actions:[]).concat(t.ignoreDefaults!==!0&&Array.isArray(Xa.actions)===!0?Xa.actions:[]).concat(Us[t.type]!==void 0&&Array.isArray(Us[t.type].actions)===!0?Us[t.type].actions:[]),{closeBtn:o}=s;if(o&&i.push({label:typeof o=="string"?o:e.lang.label.close}),s.actions=i.map(({handler:l,noDismiss:u,...c})=>({flat:!0,...c,onClick:typeof l=="function"?()=>{l(),u!==!0&&a()}:()=>{a()}})),s.multiLine===void 0&&(s.multiLine=s.actions.length>1),Object.assign(s.meta,{class:`q-notification row items-stretch q-notification--${s.multiLine===!0?"multi-line":"standard"}`+(s.color!==void 0?` bg-${s.color}`:"")+(s.textColor!==void 0?` text-${s.textColor}`:"")+(s.classes!==void 0?` ${s.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(s.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(s.multiLine===!0?"":" col"),leftClass:s.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...s.attrs}}),s.group===!1?(s.group=void 0,s.meta.group=void 0):((s.group===void 0||s.group===!0)&&(s.group=[s.message,s.caption,s.multiline].concat(s.actions.map(l=>`${l.label}*${l.icon}`)).join("|")),s.meta.group=s.group+"|"+s.position),s.actions.length===0?s.actions=void 0:s.meta.actionsClass="q-notification__actions row items-center "+(s.multiLine===!0?"justify-end":"col-auto")+(s.meta.hasMedia===!0?" q-notification__actions--with-media":""),n!==void 0){clearTimeout(n.notif.meta.timer),s.meta.uid=n.notif.meta.uid;const l=rn[s.position].value.indexOf(n.notif);rn[s.position].value[l]=s}else{const l=Ja[s.meta.group];if(l===void 0){if(s.meta.uid=gL++,s.meta.badge=1,["left","right","center"].indexOf(s.position)!==-1)rn[s.position].value.splice(Math.floor(rn[s.position].value.length/2),0,s);else{const u=s.position.indexOf("top")>-1?"unshift":"push";rn[s.position].value[u](s)}s.group!==void 0&&(Ja[s.meta.group]=s)}else{if(clearTimeout(l.meta.timer),s.badgePosition!==void 0){if(pL.includes(s.badgePosition)===!1)return Li("wrong badgePosition",t)}else s.badgePosition=`top-${s.position.indexOf("left")>-1?"right":"left"}`;s.meta.uid=l.meta.uid,s.meta.badge=l.meta.badge+1,s.meta.badgeClass=`q-notification__badge q-notification__badge--${s.badgePosition}`+(s.badgeColor!==void 0?` bg-${s.badgeColor}`:"")+(s.badgeTextColor!==void 0?` text-${s.badgeTextColor}`:"")+(s.badgeClass?` ${s.badgeClass}`:"");const u=rn[s.position].value.indexOf(l);rn[s.position].value[u]=Ja[s.meta.group]=s}}const a=()=>{vL(s),r=void 0};if(s.timeout>0&&(s.meta.timer=setTimeout(()=>{a()},s.timeout+1e3)),s.group!==void 0)return l=>{l!==void 0?Li("trying to update a grouped one which is forbidden",t):a()};if(r={dismiss:a,config:t,notif:s},n!==void 0){Object.assign(n,r);return}return l=>{if(r!==void 0)if(l===void 0)r.dismiss();else{const u=Object.assign({},r.config,l,{group:!1,position:s.position});iE(u,e,r)}}}function vL(t){clearTimeout(t.meta.timer);const e=rn[t.position].value.indexOf(t);if(e!==-1){t.group!==void 0&&delete Ja[t.meta.group];const n=sE[""+t.meta.uid];if(n){const{width:r,height:s}=getComputedStyle(n);n.style.left=`${n.offsetLeft}px`,n.style.width=r,n.style.height=s}rn[t.position].value.splice(e,1),typeof t.onDismiss=="function"&&t.onDismiss()}}function jp(t){return t!=null&&mL.test(t)!==!0}function Li(t,e){return console.error(`Notify: ${t}`,e),!1}function yL(){return ct({name:"QNotifications",devtools:{hide:!0},setup(){return()=>S("div",{class:"q-notifications"},Tf.map(t=>S(qT,{key:t,class:rE[t],tag:"div",name:`q-notification--${t}`},()=>rn[t].value.map(e=>{const n=e.meta,r=[];if(n.hasMedia===!0&&(e.spinner!==!1?r.push(S(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+n.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?r.push(S(On,{class:"q-notification__icon q-notification__icon--"+n.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&r.push(S(YN,{class:"q-notification__avatar q-notification__avatar--"+n.leftClass},()=>S("img",{src:e.avatar,"aria-hidden":"true"})))),n.hasText===!0){let i;const o={class:"q-notification__message col"};if(e.html===!0)o.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const a=[e.message];i=e.caption?[S("div",a),S("div",{class:"q-notification__caption"},[e.caption])]:a}r.push(S("div",o,i))}const s=[S("div",{class:n.contentClass},r)];return e.progress===!0&&s.push(S("div",{key:`${n.uid}|p|${n.badge}`,class:n.progressClass,style:n.progressStyle})),e.actions!==void 0&&s.push(S("div",{class:n.actionsClass},e.actions.map(i=>S(Lo,i)))),n.badge>1&&s.push(S("div",{key:`${n.uid}|${n.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[n.badge])),S("div",{ref:i=>{sE[""+n.uid]=i},key:n.uid,class:n.class,...n.attrs},[S("div",{class:n.wrapperClass},s)])}))))}})}var wL={setDefaults(t){on(t)===!0&&Object.assign(Xa,t)},registerType(t,e){on(e)===!0&&(Us[t]=e)},install({$q:t,parentApp:e}){if(t.notify=this.create=n=>iE(n,t),t.notify.setDefaults=this.setDefaults,t.notify.registerType=this.registerType,t.config.notify!==void 0&&this.setDefaults(t.config.notify),this.__installed!==!0){Tf.forEach(r=>{rn[r]=ve([]);const s=["left","center","right"].includes(r)===!0?"center":r.indexOf("top")>-1?"top":"bottom",i=r.indexOf("left")>-1?"start":r.indexOf("right")>-1?"end":"center",o=["left","right"].includes(r)?`items-${r==="left"?"start":"end"} justify-center`:r==="center"?"flex-center":`items-${i}`;rE[r]=`q-notifications__list q-notifications__list--${s} fixed column no-wrap ${o}`});const n=If("q-notify");Cy(yL(),e).mount(n)}}};function bL(t,e,n){let r;function s(){r!==void 0&&(Lc.remove(r),r=void 0)}return en(()=>{t.value===!0&&s()}),{removeFromHistory:s,addToHistory(){r={condition:()=>n.value===!0,handler:e},Lc.add(r)}}}function _L(){let t;return en(()=>{clearTimeout(t)}),{registerTimeout(e,n){clearTimeout(t),t=setTimeout(e,n)},removeTimeout(){clearTimeout(t)}}}function EL(){let t;return en(()=>{t=void 0}),{registerTick(e){t=e,wt(()=>{t===e&&(t(),t=void 0)})},removeTick(){t=void 0}}}const IL={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},TL=["before-show","show","before-hide","hide"];function SL({showing:t,canShow:e,hideOnRouteChange:n,handleShow:r,handleHide:s,processOnMount:i}){const o=Ke(),{props:a,emit:l,proxy:u}=o;let c;function h(p){t.value===!0?g(p):d(p)}function d(p){if(a.disable===!0||p!==void 0&&p.qAnchorHandled===!0||e!==void 0&&e(p)!==!0)return;const b=a["onUpdate:modelValue"]!==void 0;b===!0&&(l("update:modelValue",!0),c=p,wt(()=>{c===p&&(c=void 0)})),(a.modelValue===null||b===!1)&&f(p)}function f(p){t.value!==!0&&(t.value=!0,l("before-show",p),r!==void 0?r(p):l("show",p))}function g(p){if(a.disable===!0)return;const b=a["onUpdate:modelValue"]!==void 0;b===!0&&(l("update:modelValue",!1),c=p,wt(()=>{c===p&&(c=void 0)})),(a.modelValue===null||b===!1)&&E(p)}function E(p){t.value!==!1&&(t.value=!1,l("before-hide",p),s!==void 0?s(p):l("hide",p))}function v(p){a.disable===!0&&p===!0?a["onUpdate:modelValue"]!==void 0&&l("update:modelValue",!1):p===!0!==t.value&&(p===!0?f:E)(c)}Oe(()=>a.modelValue,v),n!==void 0&&tE(o)===!0&&Oe(()=>u.$route.fullPath,()=>{n.value===!0&&t.value===!0&&g()}),i===!0&&Bo(()=>{v(a.modelValue)});const _={show:d,hide:g,toggle:h};return Object.assign(u,_),_}const kL={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function bB(t,e){const n=ve(e.value);return Oe(e,r=>{wt(()=>{n.value=r})}),{transition:C(()=>"q-transition--"+(n.value===!0?t.transitionHide:t.transitionShow)),transitionStyle:C(()=>`--q-transition-duration: ${t.transitionDuration}ms`)}}let Wr=[],Fo=[];function oE(t){Fo=Fo.filter(e=>e!==t)}function CL(t){oE(t),Fo.push(t)}function zp(t){oE(t),Fo.length===0&&Wr.length>0&&(Wr[Wr.length-1](),Wr=[])}function Sf(t){Fo.length===0?t():Wr.push(t)}function xL(t){Wr=Wr.filter(e=>e!==t)}const Za=[];function _B(t){return Za.find(e=>e.__qPortalInnerRef.value!==null&&e.__qPortalInnerRef.value.contains(t))}function AL(t,e){do{if(t.$options.name==="QMenu"){if(t.hide(e),t.$props.separateClosePopup===!0)return Qa(t)}else if(t.__qPortalInnerRef!==void 0){const n=Qa(t);return n!==void 0&&n.$options.name==="QPopupProxy"?(t.hide(e),n):t}t=Qa(t)}while(t!=null)}function EB(t,e,n){for(;n!==0&&t!==void 0&&t!==null;){if(t.__qPortalInnerRef!==void 0){if(n--,t.$options.name==="QMenu"){t=AL(t,e);continue}t.hide(e)}t=Qa(t)}}function DL(t){for(t=t.parent;t!=null;){if(t.type.name==="QGlobalDialog")return!0;if(t.type.name==="QDialog"||t.type.name==="QMenu")return!1;t=t.parent}return!1}function RL(t,e,n,r){const s=ve(!1),i=ve(!1);let o=null;const a={},l=r===!0&&DL(t);function u(h){if(h===!0){zp(a),i.value=!0;return}i.value=!1,s.value===!1&&(l===!1&&o===null&&(o=If()),s.value=!0,Za.push(t.proxy),CL(a))}function c(h){if(i.value=!1,h!==!0)return;zp(a),s.value=!1;const d=Za.indexOf(t.proxy);d>-1&&Za.splice(d,1),o!==null&&(nE(o),o=null)}return Hl(()=>{c(!0)}),Object.assign(t.proxy,{__qPortalInnerRef:e}),{showPortal:u,hidePortal:c,portalIsActive:s,portalIsAccessible:i,renderPortal:()=>l===!0?n():s.value===!0?[S(nT,{to:o},n())]:void 0}}const OL=[null,document,document.body,document.scrollingElement,document.documentElement];function IB(t,e){let n=JN(e);if(n===void 0){if(t==null)return window;n=t.closest(".scroll,.scroll-y,.overflow-auto")}return OL.includes(n)?window:n}function ML(t){return t===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:t.scrollTop}function PL(t){return t===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:t.scrollLeft}let xa;function TB(){if(xa!==void 0)return xa;const t=document.createElement("p"),e=document.createElement("div");Ch(t,{width:"100%",height:"200px"}),Ch(e,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);const n=t.offsetWidth;e.style.overflow="scroll";let r=t.offsetWidth;return n===r&&(r=e.clientWidth),e.remove(),xa=n-r,xa}function NL(t,e=!0){return!t||t.nodeType!==Node.ELEMENT_NODE?!1:e?t.scrollHeight>t.clientHeight&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-y"])):t.scrollWidth>t.clientWidth&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-x"]))}let Fi=0,vc,yc,Ki,wc=!1,Hp,Kp,Ns;function LL(t){FL(t)&&Ft(t)}function FL(t){if(t.target===document.body||t.target.classList.contains("q-layout__backdrop"))return!0;const e=sS(t),n=t.shiftKey&&!t.deltaX,r=!n&&Math.abs(t.deltaX)<=Math.abs(t.deltaY),s=n||r?t.deltaY:t.deltaX;for(let i=0;i<e.length;i++){const o=e[i];if(NL(o,r))return r?s<0&&o.scrollTop===0?!0:s>0&&o.scrollTop+o.clientHeight===o.scrollHeight:s<0&&o.scrollLeft===0?!0:s>0&&o.scrollLeft+o.clientWidth===o.scrollWidth}return!0}function Gp(t){t.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function Aa(t){wc!==!0&&(wc=!0,requestAnimationFrame(()=>{wc=!1;const{height:e}=t.target,{clientHeight:n,scrollTop:r}=document.scrollingElement;(Ki===void 0||e!==window.innerHeight)&&(Ki=n-e,document.scrollingElement.scrollTop=r),r>Ki&&(document.scrollingElement.scrollTop-=Math.ceil((r-Ki)/8))}))}function Wp(t){const e=document.body,n=window.visualViewport!==void 0;if(t==="add"){const{overflowY:r,overflowX:s}=window.getComputedStyle(e);vc=PL(window),yc=ML(window),Hp=e.style.left,Kp=e.style.top,e.style.left=`-${vc}px`,e.style.top=`-${yc}px`,s!=="hidden"&&(s==="scroll"||e.scrollWidth>window.innerWidth)&&e.classList.add("q-body--force-scrollbar-x"),r!=="hidden"&&(r==="scroll"||e.scrollHeight>window.innerHeight)&&e.classList.add("q-body--force-scrollbar-y"),e.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,Ze.is.ios===!0&&(n===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",Aa,Lt.passiveCapture),window.visualViewport.addEventListener("scroll",Aa,Lt.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",Gp,Lt.passiveCapture))}Ze.is.desktop===!0&&Ze.is.mac===!0&&window[`${t}EventListener`]("wheel",LL,Lt.notPassive),t==="remove"&&(Ze.is.ios===!0&&(n===!0?(window.visualViewport.removeEventListener("resize",Aa,Lt.passiveCapture),window.visualViewport.removeEventListener("scroll",Aa,Lt.passiveCapture)):window.removeEventListener("scroll",Gp,Lt.passiveCapture)),e.classList.remove("q-body--prevent-scroll"),e.classList.remove("q-body--force-scrollbar-x"),e.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,e.style.left=Hp,e.style.top=Kp,window.scrollTo(vc,yc),Ki=void 0)}function BL(t){let e="add";if(t===!0){if(Fi++,Ns!==void 0){clearTimeout(Ns),Ns=void 0;return}if(Fi>1)return}else{if(Fi===0||(Fi--,Fi>0))return;if(e="remove",Ze.is.ios===!0&&Ze.is.nativeMobile===!0){clearTimeout(Ns),Ns=setTimeout(()=>{Wp(e),Ns=void 0},100);return}}Wp(e)}function UL(){let t;return{preventBodyScroll(e){e!==t&&(t!==void 0||e===!0)&&(t=e,BL(e))}}}const es=[];let di;function VL(t){di=t.keyCode===27}function qL(){di===!0&&(di=!1)}function $L(t){di===!0&&(di=!1,vo(t,27)===!0&&es[es.length-1](t))}function aE(t){window[t]("keydown",VL),window[t]("blur",qL),window[t]("keyup",$L),di=!1}function jL(t){Ze.is.desktop===!0&&(es.push(t),es.length===1&&aE("addEventListener"))}function Yp(t){const e=es.indexOf(t);e>-1&&(es.splice(e,1),es.length===0&&aE("removeEventListener"))}const ts=[];function lE(t){ts[ts.length-1](t)}function zL(t){Ze.is.desktop===!0&&(ts.push(t),ts.length===1&&document.body.addEventListener("focusin",lE))}function Qp(t){const e=ts.indexOf(t);e>-1&&(ts.splice(e,1),ts.length===0&&document.body.removeEventListener("focusin",lE))}let Da=0;const HL={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},Xp={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var KL=ct({name:"QDialog",inheritAttrs:!1,props:{...IL,...kL,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,position:{type:String,default:"standard",validator:t=>t==="standard"||["top","bottom","left","right"].includes(t)}},emits:[...TL,"shake","click","escape-key"],setup(t,{slots:e,emit:n,attrs:r}){const s=Ke(),i=ve(null),o=ve(!1),a=ve(!1),l=ve(!1);let u,c=null,h,d;const f=C(()=>t.persistent!==!0&&t.noRouteDismiss!==!0&&t.seamless!==!0),{preventBodyScroll:g}=UL(),{registerTimeout:E,removeTimeout:v}=_L(),{registerTick:_,removeTick:p}=EL(),{showPortal:b,hidePortal:D,portalIsAccessible:N,renderPortal:w}=RL(s,i,ie,!0),{hide:I}=SL({showing:o,hideOnRouteChange:f,handleShow:X,handleHide:j,processOnMount:!0}),{addToHistory:T,removeFromHistory:P}=bL(o,I,f),R=C(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${t.maximized===!0?"maximized":"minimized"} q-dialog__inner--${t.position} ${HL[t.position]}`+(l.value===!0?" q-dialog__inner--animating":"")+(t.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(t.fullHeight===!0?" q-dialog__inner--fullheight":"")+(t.square===!0?" q-dialog__inner--square":"")),F=C(()=>"q-transition--"+(t.transitionShow===void 0?Xp[t.position][0]:t.transitionShow)),x=C(()=>"q-transition--"+(t.transitionHide===void 0?Xp[t.position][1]:t.transitionHide)),H=C(()=>a.value===!0?x.value:F.value),Y=C(()=>`--q-transition-duration: ${t.transitionDuration}ms`),q=C(()=>o.value===!0&&t.seamless!==!0),se=C(()=>t.autoClose===!0?{onClick:L}:{}),O=C(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${q.value===!0?"modal":"seamless"}`,r.class]);Oe(o,M=>{wt(()=>{a.value=M})}),Oe(()=>t.maximized,M=>{o.value===!0&&pt(M)}),Oe(q,M=>{g(M),M===!0?(zL(K),jL(Be)):(Qp(K),Yp(Be))});function X(M){v(),p(),T(),c=t.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,pt(t.maximized),b(),l.value=!0,t.noFocus!==!0&&(document.activeElement!==null&&document.activeElement.blur(),_(_e)),E(()=>{if(s.proxy.$q.platform.is.ios===!0){if(t.seamless!==!0&&document.activeElement){const{top:ee,bottom:ae}=document.activeElement.getBoundingClientRect(),{innerHeight:ue}=window,m=window.visualViewport!==void 0?window.visualViewport.height:ue;ee>0&&ae>m/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-m,ae>=ue?1/0:Math.ceil(document.scrollingElement.scrollTop+ae-m/2))),document.activeElement.scrollIntoView()}d=!0,i.value.click(),d=!1}b(!0),l.value=!1,n("show",M)},t.transitionDuration)}function j(M){v(),p(),P(),Se(!0),l.value=!0,D(),c!==null&&(c.focus(),c=null),E(()=>{D(!0),l.value=!1,n("hide",M)},t.transitionDuration)}function _e(M){Sf(()=>{let ee=i.value;ee===null||ee.contains(document.activeElement)===!0||(ee=ee.querySelector(M||"[autofocus], [data-autofocus]")||ee,ee.focus({preventScroll:!0}))})}function Fe(){_e(),n("shake");const M=i.value;M!==null&&(M.classList.remove("q-animate--scale"),M.classList.add("q-animate--scale"),clearTimeout(u),u=setTimeout(()=>{i.value!==null&&(M.classList.remove("q-animate--scale"),_e())},170))}function Be(){t.seamless!==!0&&(t.persistent===!0||t.noEscDismiss===!0?t.maximized!==!0&&t.noShake!==!0&&Fe():(n("escape-key"),I()))}function Se(M){clearTimeout(u),(M===!0||o.value===!0)&&(pt(!1),t.seamless!==!0&&(g(!1),Qp(K),Yp(Be))),M!==!0&&(c=null)}function pt(M){M===!0?h!==!0&&(Da<1&&document.body.classList.add("q-body--dialog"),Da++,h=!0):h===!0&&(Da<2&&document.body.classList.remove("q-body--dialog"),Da--,h=!1)}function L(M){d!==!0&&(I(M),n("click",M))}function re(M){t.persistent!==!0&&t.noBackdropDismiss!==!0?I(M):t.noShake!==!0&&Fe()}function K(M){t.allowFocusOutside!==!0&&N.value===!0&&ZN(i.value,M.target)!==!0&&_e('[tabindex]:not([tabindex="-1"])')}Object.assign(s.proxy,{focus:_e,shake:Fe,__updateRefocusTarget(M){c=M||null}}),en(Se);function ie(){return S("div",{...r,class:O.value},[S(ei,{name:"q-transition--fade",appear:!0},()=>q.value===!0?S("div",{class:"q-dialog__backdrop fixed-full",style:Y.value,"aria-hidden":"true",onMousedown:re}):null),S(ei,{name:H.value,appear:!0},()=>o.value===!0?S("div",{ref:i,class:R.value,style:Y.value,tabindex:-1,...se.value},ln(e.default)):null)])}return w}});const Cr={dark:{type:Boolean,default:null}};function xr(t,e){return C(()=>t.dark===null?e.dark.isActive:t.dark)}var GL=ct({name:"QCard",props:{...Cr,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(t,{slots:e}){const n=Ke(),r=xr(t,n.proxy.$q),s=C(()=>"q-card"+(r.value===!0?" q-card--dark q-dark":"")+(t.bordered===!0?" q-card--bordered":"")+(t.square===!0?" q-card--square no-border-radius":"")+(t.flat===!0?" q-card--flat no-shadow":""));return()=>S(t.tag,{class:s.value},ln(e.default))}}),Bi=ct({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(t,{slots:e}){const n=C(()=>`q-card__section q-card__section--${t.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>S(t.tag,{class:n.value},ln(e.default))}}),WL=ct({name:"QCardActions",props:{...Z_,vertical:Boolean},setup(t,{slots:e}){const n=eE(t),r=C(()=>`q-card__actions ${n.value} q-card__actions--${t.vertical===!0?"vert column":"horiz row"}`);return()=>S("div",{class:r.value},ln(e.default))}});const YL={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},bc={xs:2,sm:4,md:8,lg:16,xl:24};var Jp=ct({name:"QSeparator",props:{...Cr,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(t){const e=Ke(),n=xr(t,e.proxy.$q),r=C(()=>t.vertical===!0?"vertical":"horizontal"),s=C(()=>` q-separator--${r.value}`),i=C(()=>t.inset!==!1?`${s.value}-${YL[t.inset]}`:""),o=C(()=>`q-separator${s.value}${i.value}`+(t.color!==void 0?` bg-${t.color}`:"")+(n.value===!0?" q-separator--dark":"")),a=C(()=>{const l={};if(t.size!==void 0&&(l[t.vertical===!0?"width":"height"]=t.size),t.spaced!==!1){const u=t.spaced===!0?`${bc.md}px`:t.spaced in bc?`${bc[t.spaced]}px`:t.spaced,c=t.vertical===!0?["Left","Right"]:["Top","Bottom"];l[`margin${c[0]}`]=l[`margin${c[1]}`]=u}return l});return()=>S("hr",{class:o.value,style:a.value,"aria-orientation":r.value})}});function QL({validate:t,resetValidation:e,requiresQForm:n}){const r=Jt(bS,!1);if(r!==!1){const{props:s,proxy:i}=Ke();Object.assign(i,{validate:t,resetValidation:e}),Oe(()=>s.disable,o=>{o===!0?(typeof e=="function"&&e(),r.unbindComponent(i)):r.bindComponent(i)}),s.disable!==!0&&r.bindComponent(i),en(()=>{s.disable!==!0&&r.unbindComponent(i)})}else n===!0&&console.error("Parent QForm not found on useFormChild()!")}const Zp=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,ev=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,tv=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,Ra=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,Oa=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,nv={date:t=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t),time:t=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(t),fulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(t),timeOrFulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(t),email:t=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t),hexColor:t=>Zp.test(t),hexaColor:t=>ev.test(t),hexOrHexaColor:t=>tv.test(t),rgbColor:t=>Ra.test(t),rgbaColor:t=>Oa.test(t),rgbOrRgbaColor:t=>Ra.test(t)||Oa.test(t),hexOrRgbColor:t=>Zp.test(t)||Ra.test(t),hexaOrRgbaColor:t=>ev.test(t)||Oa.test(t),anyColor:t=>tv.test(t)||Ra.test(t)||Oa.test(t)},XL={...Ii,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,thickness:{type:Number,default:.2,validator:t=>t>=0&&t<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},xh=50,uE=2*xh,cE=uE*Math.PI,JL=Math.round(cE*1e3)/1e3;var ZL=ct({name:"QCircularProgress",props:{...XL,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=Ke(),r=Ti(t),s=C(()=>{const d=(n.lang.rtl===!0?-1:1)*t.angle;return{transform:t.reverse!==(n.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-d}deg)`:`rotate3d(0, 0, 1, ${d-90}deg)`}}),i=C(()=>t.instantFeedback!==!0&&t.indeterminate!==!0?{transition:`stroke-dashoffset ${t.animationSpeed}ms ease 0s, stroke ${t.animationSpeed}ms ease`}:""),o=C(()=>uE/(1-t.thickness/2)),a=C(()=>`${o.value/2} ${o.value/2} ${o.value} ${o.value}`),l=C(()=>Wk(t.value,t.min,t.max)),u=C(()=>cE*(1-(l.value-t.min)/(t.max-t.min))),c=C(()=>t.thickness/2*o.value);function h({thickness:d,offset:f,color:g,cls:E}){return S("circle",{class:"q-circular-progress__"+E+(g!==void 0?` text-${g}`:""),style:i.value,fill:"transparent",stroke:"currentColor","stroke-width":d,"stroke-dasharray":JL,"stroke-dashoffset":f,cx:o.value,cy:o.value,r:xh})}return()=>{const d=[];t.centerColor!==void 0&&t.centerColor!=="transparent"&&d.push(S("circle",{class:`q-circular-progress__center text-${t.centerColor}`,fill:"currentColor",r:xh-c.value/2,cx:o.value,cy:o.value})),t.trackColor!==void 0&&t.trackColor!=="transparent"&&d.push(h({cls:"track",thickness:c.value,offset:0,color:t.trackColor})),d.push(h({cls:"circle",thickness:c.value,offset:u.value,color:t.color}));const f=[S("svg",{class:"q-circular-progress__svg",style:s.value,viewBox:a.value,"aria-hidden":"true"},d)];return t.showValue===!0&&f.push(S("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:t.fontSize}},e.default!==void 0?e.default():[S("div",l.value)])),S("div",{class:`q-circular-progress q-circular-progress--${t.indeterminate===!0?"in":""}determinate`,style:r.value,role:"progressbar","aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":t.indeterminate===!0?void 0:l.value},W_(e.internal,f))}}});function Ls(t,e,n,r){const s=[];return t.forEach(i=>{r(i)===!0?s.push(i):e.push({failedPropValidation:n,file:i})}),s}function Ma(t){t&&t.dataTransfer&&(t.dataTransfer.dropEffect="copy"),Ft(t)}const eF={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},tF=["rejected"];function nF({editable:t,dnd:e,getFileInput:n,addFilesToQueue:r}){const{props:s,emit:i,proxy:o}=Ke(),a=ve(null),l=C(()=>s.accept!==void 0?s.accept.split(",").map(p=>(p=p.trim(),p==="*"?"*/":(p.endsWith("/*")&&(p=p.slice(0,p.length-1)),p.toUpperCase()))):null),u=C(()=>parseInt(s.maxFiles,10)),c=C(()=>parseInt(s.maxTotalSize,10));function h(p){if(t.value)if(p!==Object(p)&&(p={target:null}),p.target!==null&&p.target.matches('input[type="file"]')===!0)p.clientX===0&&p.clientY===0&&ti(p);else{const b=n();b&&b!==p.target&&b.click(p)}}function d(p){t.value&&p&&r(null,p)}function f(p,b,D,N){let w=Array.from(b||p.target.files);const I=[],T=()=>{I.length>0&&i("rejected",I)};if(s.accept!==void 0&&l.value.indexOf("*/")===-1&&(w=Ls(w,I,"accept",R=>l.value.some(F=>R.type.toUpperCase().startsWith(F)||R.name.toUpperCase().endsWith(F))),w.length===0))return T();if(s.maxFileSize!==void 0){const R=parseInt(s.maxFileSize,10);if(w=Ls(w,I,"max-file-size",F=>F.size<=R),w.length===0)return T()}s.multiple!==!0&&w.length>0&&(w=[w[0]]),w.forEach(R=>{R.__key=R.webkitRelativePath+R.lastModified+R.name+R.size});const P=D.map(R=>R.__key);if(w=Ls(w,I,"duplicate",R=>P.includes(R.__key)===!1),w.length===0)return T();if(s.maxTotalSize!==void 0){let R=N===!0?D.reduce((F,x)=>F+x.size,0):0;if(w=Ls(w,I,"max-total-size",F=>(R+=F.size,R<=c.value)),w.length===0)return T()}if(typeof s.filter=="function"){const R=s.filter(w);w=Ls(w,I,"filter",F=>R.includes(F))}if(s.maxFiles!==void 0){let R=N===!0?D.length:0;if(w=Ls(w,I,"max-files",()=>(R++,R<=u.value)),w.length===0)return T()}if(T(),w.length>0)return w}function g(p){Ma(p),e.value!==!0&&(e.value=!0)}function E(p){Ft(p),p.relatedTarget!==a.value&&(e.value=!1)}function v(p){Ma(p);const b=p.dataTransfer.files;b.length>0&&r(null,b),e.value=!1}function _(p){if(e.value===!0)return S("div",{ref:a,class:`q-${p}__dnd absolute-full`,onDragenter:Ma,onDragover:Ma,onDragleave:E,onDrop:v})}return Object.assign(o,{pickFiles:h,addFiles:d}),{pickFiles:h,addFiles:d,onDragover:g,processFiles:f,getDndNode:_,maxFilesNumber:u,maxTotalSizeNumber:c}}function rv(t){return(t*100).toFixed(2)+"%"}const rF={...Cr,...eF,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},hE=[...tF,"start","finish","added","removed"];function sF(t){const e=Ke(),{props:n,slots:r,emit:s,proxy:i}=e,{$q:o}=i,a=xr(n,o);function l(M,ee,ae){if(M.__status=ee,ee==="idle"){M.__uploaded=0,M.__progress=0,M.__sizeLabel=Ng(M.size),M.__progressLabel="0.00%";return}if(ee==="failed"){i.$forceUpdate();return}M.__uploaded=ee==="uploaded"?M.size:ae,M.__progress=ee==="uploaded"?1:Math.min(.9999,M.__uploaded/M.size),M.__progressLabel=rv(M.__progress),i.$forceUpdate()}const u={files:ve([]),queuedFiles:ve([]),uploadedFiles:ve([]),uploadedSize:ve(0),updateFileStatus:l,isAlive(){return e.isDeactivated!==!0&&e.isUnmounted!==!0}};Object.assign(u,t({props:n,slots:r,emit:s,helpers:u}));const c=ve(0),h=C(()=>n.disable!==!0&&n.readonly!==!0);u.isBusy===void 0&&(u.isBusy=ve(!1));const d=ve(!1),f=ve(null),g=ve(null);Gi(_S,pt);const{pickFiles:E,addFiles:v,onDragover:_,onDragleave:p,processFiles:b,getDndNode:D,maxFilesNumber:N,maxTotalSizeNumber:w}=nF({editable:h,dnd:d,getFileInput:_e,addFilesToQueue:Fe}),I=C(()=>h.value===!0&&u.isUploading.value!==!0&&(n.multiple===!0||u.queuedFiles.value.length===0)&&(n.maxFiles===void 0||u.files.value.length<N.value)&&(n.maxTotalSize===void 0||c.value<w.value)),T=C(()=>h.value===!0&&u.isBusy.value!==!0&&u.isUploading.value!==!0&&u.queuedFiles.value.length>0),P=C(()=>c.value===0?0:u.uploadedSize.value/c.value),R=C(()=>rv(P.value)),F=C(()=>Ng(c.value)),x=C(()=>"q-uploader column no-wrap"+(a.value===!0?" q-uploader--dark q-dark":"")+(n.bordered===!0?" q-uploader--bordered":"")+(n.square===!0?" q-uploader--square no-border-radius":"")+(n.flat===!0?" q-uploader--flat no-shadow":"")+(n.disable===!0?" disabled q-uploader--disable":"")+(d.value===!0?" q-uploader--dnd":"")),H=C(()=>"q-uploader__header"+(n.color!==void 0?` bg-${n.color}`:"")+(n.textColor!==void 0?` text-${n.textColor}`:""));Oe(u.isUploading,(M,ee)=>{ee===!1&&M===!0?s("start"):ee===!0&&M===!1&&s("finish")});function Y(){n.disable===!1&&(u.abort(),u.uploadedSize.value=0,c.value=0,j(),u.files.value=[],u.queuedFiles.value=[],u.uploadedFiles.value=[])}function q(){n.disable===!1&&O(["uploaded"],()=>{u.uploadedFiles.value=[]})}function se(){O(["idle","failed"],({size:M})=>{c.value-=M,u.queuedFiles.value=[]})}function O(M,ee){if(n.disable===!0)return;const ae={files:[],size:0},ue=u.files.value.filter(m=>M.indexOf(m.__status)===-1?!0:(ae.size+=m.size,ae.files.push(m),m.__img!==void 0&&window.URL.revokeObjectURL(m.__img.src),!1));ae.files.length>0&&(u.files.value=ue,ee(ae),s("removed",ae.files))}function X(M){n.disable||(M.__status==="uploaded"?u.uploadedFiles.value=u.uploadedFiles.value.filter(ee=>ee.__key!==M.__key):M.__status==="uploading"?M.__abort():c.value-=M.size,u.files.value=u.files.value.filter(ee=>ee.__key!==M.__key?!0:(ee.__img!==void 0&&window.URL.revokeObjectURL(ee.__img.src),!1)),u.queuedFiles.value=u.queuedFiles.value.filter(ee=>ee.__key!==M.__key),s("removed",[M]))}function j(){u.files.value.forEach(M=>{M.__img!==void 0&&window.URL.revokeObjectURL(M.__img.src)})}function _e(){return g.value||f.value.getElementsByClassName("q-uploader__input")[0]}function Fe(M,ee){const ae=b(M,ee,u.files.value,!0),ue=_e();ue!=null&&(ue.value=""),ae!==void 0&&(ae.forEach(m=>{if(u.updateFileStatus(m,"idle"),c.value+=m.size,n.noThumbnails!==!0&&m.type.toUpperCase().startsWith("IMAGE")){const y=new Image;y.src=window.URL.createObjectURL(m),m.__img=y}}),u.files.value=u.files.value.concat(ae),u.queuedFiles.value=u.queuedFiles.value.concat(ae),s("added",ae),n.autoUpload===!0&&u.upload())}function Be(){T.value===!0&&u.upload()}function Se(M,ee,ae){if(M===!0){const ue={type:"a",key:ee,icon:o.iconSet.uploader[ee],flat:!0,dense:!0};let m;return ee==="add"?(ue.onClick=E,m=pt):ue.onClick=ae,S(Lo,ue,m)}}function pt(){return S("input",{ref:g,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:n.accept,multiple:n.multiple===!0?"multiple":void 0,capture:n.capture,onMousedown:ti,onClick:E,onChange:Fe})}function L(){return r.header!==void 0?r.header(ie.value):[S("div",{class:"q-uploader__header-content column"},[S("div",{class:"flex flex-center no-wrap q-gutter-xs"},[Se(u.queuedFiles.value.length>0,"removeQueue",se),Se(u.uploadedFiles.value.length>0,"removeUploaded",q),u.isUploading.value===!0?S(ys,{class:"q-uploader__spinner"}):null,S("div",{class:"col column justify-center"},[n.label!==void 0?S("div",{class:"q-uploader__title"},[n.label]):null,S("div",{class:"q-uploader__subtitle"},[F.value+" / "+R.value])]),Se(I.value,"add"),Se(n.hideUploadBtn===!1&&T.value===!0,"upload",u.upload),Se(u.isUploading.value,"clear",u.abort)])])]}function re(){return r.list!==void 0?r.list(ie.value):u.files.value.map(M=>S("div",{key:M.__key,class:"q-uploader__file relative-position"+(n.noThumbnails!==!0&&M.__img!==void 0?" q-uploader__file--img":"")+(M.__status==="failed"?" q-uploader__file--failed":M.__status==="uploaded"?" q-uploader__file--uploaded":""),style:n.noThumbnails!==!0&&M.__img!==void 0?{backgroundImage:'url("'+M.__img.src+'")'}:null},[S("div",{class:"q-uploader__file-header row flex-center no-wrap"},[M.__status==="failed"?S(On,{class:"q-uploader__file-status",name:o.iconSet.type.negative,color:"negative"}):null,S("div",{class:"q-uploader__file-header-content col"},[S("div",{class:"q-uploader__title"},[M.name]),S("div",{class:"q-uploader__subtitle row items-center no-wrap"},[M.__sizeLabel+" / "+M.__progressLabel])]),M.__status==="uploading"?S(ZL,{value:M.__progress,min:0,max:1,indeterminate:M.__progress===0}):S(Lo,{round:!0,dense:!0,flat:!0,icon:o.iconSet.uploader[M.__status==="uploaded"?"done":"clear"],onClick:()=>{X(M)}})])]))}en(()=>{u.isUploading.value===!0&&u.abort(),u.files.value.length>0&&j()});const K={pickFiles:E,addFiles:v,reset:Y,removeUploadedFiles:q,removeQueuedFiles:se,removeFile:X,upload:Be,abort:u.abort},ie=C(()=>{const M={canAddFiles:I.value,canUpload:T.value,uploadSizeLabel:F.value,uploadProgressLabel:R.value};for(const ee in u)M[ee]=$e(u[ee])===!0?u[ee].value:u[ee];return{...M,...K}});return Object.assign(i,K),()=>{const M=[S("div",{class:H.value},L()),S("div",{class:"q-uploader__list scroll"},re()),D("uploader")];u.isBusy.value===!0&&M.push(S("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[S(ys)]));const ee={ref:f,class:x.value};return I.value===!0&&Object.assign(ee,{onDragover:_,onDragleave:p}),S("div",ee,M)}}const iF=()=>!0;function oF(t){const e={};return t.forEach(n=>{e[n]=iF}),e}const aF=oF(hE);var SB=({name:t,props:e,emits:n,injectPlugin:r})=>ct({name:t,props:{...rF,...e},emits:on(n)===!0?{...aF,...n}:[...hE,...n],setup(){return sF(r)}});let _c,Pa=0;const ht=new Array(256);for(let t=0;t<256;t++)ht[t]=(t+256).toString(16).substring(1);const lF=(()=>{const t=typeof crypto!="undefined"?crypto:typeof window!="undefined"?window.crypto||window.msCrypto:void 0;if(t!==void 0){if(t.randomBytes!==void 0)return t.randomBytes;if(t.getRandomValues!==void 0)return e=>{const n=new Uint8Array(e);return t.getRandomValues(n),n}}return e=>{const n=[];for(let r=e;r>0;r--)n.push(Math.floor(Math.random()*256));return n}})(),sv=4096;function uF(){(_c===void 0||Pa+16>sv)&&(Pa=0,_c=lF(sv));const t=Array.prototype.slice.call(_c,Pa,Pa+=16);return t[6]=t[6]&15|64,t[8]=t[8]&63|128,ht[t[0]]+ht[t[1]]+ht[t[2]]+ht[t[3]]+"-"+ht[t[4]]+ht[t[5]]+"-"+ht[t[6]]+ht[t[7]]+"-"+ht[t[8]]+ht[t[9]]+"-"+ht[t[10]]+ht[t[11]]+ht[t[12]]+ht[t[13]]+ht[t[14]]+ht[t[15]]}const cF=[!0,!1,"ondemand"],hF={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],validator:t=>cF.includes(t)}};function dF(t,e){const{props:n,proxy:r}=Ke(),s=ve(!1),i=ve(null),o=ve(null);QL({validate:g,resetValidation:f});let a=0,l;const u=C(()=>n.rules!==void 0&&n.rules!==null&&n.rules.length>0),c=C(()=>n.disable!==!0&&u.value===!0),h=C(()=>n.error===!0||s.value===!0),d=C(()=>typeof n.errorMessage=="string"&&n.errorMessage.length>0?n.errorMessage:i.value);Oe(()=>n.modelValue,()=>{E()}),Oe(()=>n.reactiveRules,_=>{_===!0?l===void 0&&(l=Oe(()=>n.rules,()=>{E(!0)})):l!==void 0&&(l(),l=void 0)},{immediate:!0}),Oe(t,_=>{_===!0?o.value===null&&(o.value=!1):o.value===!1&&(o.value=!0,c.value===!0&&n.lazyRules!=="ondemand"&&e.value===!1&&v())});function f(){a++,e.value=!1,o.value=null,s.value=!1,i.value=null,v.cancel()}function g(_=n.modelValue){if(c.value!==!0)return!0;const p=++a;e.value!==!0&&n.lazyRules!==!0&&(o.value=!0);const b=(N,w)=>{s.value!==N&&(s.value=N);const I=w||void 0;i.value!==I&&(i.value=I),e.value=!1},D=[];for(let N=0;N<n.rules.length;N++){const w=n.rules[N];let I;if(typeof w=="function"?I=w(_):typeof w=="string"&&nv[w]!==void 0&&(I=nv[w](_)),I===!1||typeof I=="string")return b(!0,I),!1;I!==!0&&I!==void 0&&D.push(I)}return D.length===0?(b(!1),!0):(e.value=!0,Promise.all(D).then(N=>{if(N===void 0||Array.isArray(N)===!1||N.length===0)return p===a&&b(!1),!0;const w=N.find(I=>I===!1||typeof I=="string");return p===a&&b(w!==void 0,w),w===void 0},N=>(p===a&&(console.error(N),b(!0)),!1)))}function E(_){c.value===!0&&n.lazyRules!=="ondemand"&&(o.value===!0||n.lazyRules!==!0&&_!==!0)&&v()}const v=_y(g,0);return en(()=>{l!==void 0&&l(),v.cancel()}),Object.assign(r,{resetValidation:f,validate:g}),Uo(r,"hasError",()=>h.value),{isDirtyModel:o,hasRules:u,hasError:h,errorMessage:d,validate:g,resetValidation:f}}const iv=/^on[A-Z]/;function fF(t,e){const n={listeners:ve({}),attributes:ve({})};function r(){const s={},i={};for(const o in t)o!=="class"&&o!=="style"&&iv.test(o)===!1&&(s[o]=t[o]);for(const o in e.props)iv.test(o)===!0&&(i[o]=e.props[o]);n.attributes.value=s,n.listeners.value=i}return Wv(r),r(),n}function Ah(t){return t===void 0?`f_${uF()}`:t}function Dh(t){return t!=null&&(""+t).length>0}const gF={...Cr,...hF,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String,maxlength:[Number,String]},mF=["update:modelValue","clear","focus","blur","popup-show","popup-hide"];function pF(){const{props:t,attrs:e,proxy:n,vnode:r}=Ke();return{isDark:xr(t,n.$q),editable:C(()=>t.disable!==!0&&t.readonly!==!0),innerLoading:ve(!1),focused:ve(!1),hasPopupOpen:!1,splitAttrs:fF(e,r),targetUid:ve(Ah(t.for)),rootRef:ve(null),targetRef:ve(null),controlRef:ve(null)}}function vF(t){const{props:e,emit:n,slots:r,attrs:s,proxy:i}=Ke(),{$q:o}=i;let a;t.hasValue===void 0&&(t.hasValue=C(()=>Dh(e.modelValue))),t.emitValue===void 0&&(t.emitValue=O=>{n("update:modelValue",O)}),t.controlEvents===void 0&&(t.controlEvents={onFocusin:P,onFocusout:R}),Object.assign(t,{clearValue:F,onControlFocusin:P,onControlFocusout:R,focus:I}),t.computedCounter===void 0&&(t.computedCounter=C(()=>{if(e.counter!==!1){const O=typeof e.modelValue=="string"||typeof e.modelValue=="number"?(""+e.modelValue).length:Array.isArray(e.modelValue)===!0?e.modelValue.length:0,X=e.maxlength!==void 0?e.maxlength:e.maxValues;return O+(X!==void 0?" / "+X:"")}}));const{isDirtyModel:l,hasRules:u,hasError:c,errorMessage:h,resetValidation:d}=dF(t.focused,t.innerLoading),f=t.floatingLabel!==void 0?C(()=>e.stackLabel===!0||t.focused.value===!0||t.floatingLabel.value===!0):C(()=>e.stackLabel===!0||t.focused.value===!0||t.hasValue.value===!0),g=C(()=>e.bottomSlots===!0||e.hint!==void 0||u.value===!0||e.counter===!0||e.error!==null),E=C(()=>e.filled===!0?"filled":e.outlined===!0?"outlined":e.borderless===!0?"borderless":e.standout?"standout":"standard"),v=C(()=>`q-field row no-wrap items-start q-field--${E.value}`+(t.fieldClass!==void 0?` ${t.fieldClass.value}`:"")+(e.rounded===!0?" q-field--rounded":"")+(e.square===!0?" q-field--square":"")+(f.value===!0?" q-field--float":"")+(p.value===!0?" q-field--labeled":"")+(e.dense===!0?" q-field--dense":"")+(e.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(t.isDark.value===!0?" q-field--dark":"")+(t.getControl===void 0?" q-field--auto-height":"")+(t.focused.value===!0?" q-field--focused":"")+(c.value===!0?" q-field--error":"")+(c.value===!0||t.focused.value===!0?" q-field--highlighted":"")+(e.hideBottomSpace!==!0&&g.value===!0?" q-field--with-bottom":"")+(e.disable===!0?" q-field--disabled":e.readonly===!0?" q-field--readonly":"")),_=C(()=>"q-field__control relative-position row no-wrap"+(e.bgColor!==void 0?` bg-${e.bgColor}`:"")+(c.value===!0?" text-negative":typeof e.standout=="string"&&e.standout.length>0&&t.focused.value===!0?` ${e.standout}`:e.color!==void 0?` text-${e.color}`:"")),p=C(()=>e.labelSlot===!0||e.label!==void 0),b=C(()=>"q-field__label no-pointer-events absolute ellipsis"+(e.labelColor!==void 0&&c.value!==!0?` text-${e.labelColor}`:"")),D=C(()=>({id:t.targetUid.value,editable:t.editable.value,focused:t.focused.value,floatingLabel:f.value,modelValue:e.modelValue,emitValue:t.emitValue})),N=C(()=>{const O={for:t.targetUid.value};return e.disable===!0?O["aria-disabled"]="true":e.readonly===!0&&(O["aria-readonly"]="true"),O});Oe(()=>e.for,O=>{t.targetUid.value=Ah(O)});function w(){const O=document.activeElement;let X=t.targetRef!==void 0&&t.targetRef.value;X&&(O===null||O.id!==t.targetUid.value)&&(X.hasAttribute("tabindex")===!0||(X=X.querySelector("[tabindex]")),X&&X!==O&&X.focus({preventScroll:!0}))}function I(){Sf(w)}function T(){xL(w);const O=document.activeElement;O!==null&&t.rootRef.value.contains(O)&&O.blur()}function P(O){clearTimeout(a),t.editable.value===!0&&t.focused.value===!1&&(t.focused.value=!0,n("focus",O))}function R(O,X){clearTimeout(a),a=setTimeout(()=>{document.hasFocus()===!0&&(t.hasPopupOpen===!0||t.controlRef===void 0||t.controlRef.value===null||t.controlRef.value.contains(document.activeElement)!==!1)||(t.focused.value===!0&&(t.focused.value=!1,n("blur",O)),X!==void 0&&X())})}function F(O){Ft(O),o.platform.is.mobile!==!0?(t.targetRef!==void 0&&t.targetRef.value||t.rootRef.value).focus():t.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),e.type==="file"&&(t.inputRef.value.value=null),n("update:modelValue",null),n("clear",e.modelValue),wt(()=>{d(),o.platform.is.mobile!==!0&&(l.value=!1)})}function x(){const O=[];return r.prepend!==void 0&&O.push(S("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:ur},r.prepend())),O.push(S("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},H())),c.value===!0&&e.noErrorIcon===!1&&O.push(q("error",[S(On,{name:o.iconSet.field.error,color:"negative"})])),e.loading===!0||t.innerLoading.value===!0?O.push(q("inner-loading-append",r.loading!==void 0?r.loading():[S(ys,{color:e.color})])):e.clearable===!0&&t.hasValue.value===!0&&t.editable.value===!0&&O.push(q("inner-clearable-append",[S(On,{class:"q-field__focusable-action",tag:"button",name:e.clearIcon||o.iconSet.field.clear,tabindex:0,type:"button","aria-hidden":null,role:null,onClick:F})])),r.append!==void 0&&O.push(S("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:ur},r.append())),t.getInnerAppend!==void 0&&O.push(q("inner-append",t.getInnerAppend())),t.getControlChild!==void 0&&O.push(t.getControlChild()),O}function H(){const O=[];return e.prefix!==void 0&&e.prefix!==null&&O.push(S("div",{class:"q-field__prefix no-pointer-events row items-center"},e.prefix)),t.getShadowControl!==void 0&&t.hasShadow.value===!0&&O.push(t.getShadowControl()),t.getControl!==void 0?O.push(t.getControl()):r.rawControl!==void 0?O.push(r.rawControl()):r.control!==void 0&&O.push(S("div",{ref:t.targetRef,class:"q-field__native row",tabindex:-1,...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0},r.control(D.value))),p.value===!0&&O.push(S("div",{class:b.value},ln(r.label,e.label))),e.suffix!==void 0&&e.suffix!==null&&O.push(S("div",{class:"q-field__suffix no-pointer-events row items-center"},e.suffix)),O.concat(ln(r.default))}function Y(){let O,X;c.value===!0?h.value!==null?(O=[S("div",{role:"alert"},h.value)],X=`q--slot-error-${h.value}`):(O=ln(r.error),X="q--slot-error"):(e.hideHint!==!0||t.focused.value===!0)&&(e.hint!==void 0?(O=[S("div",e.hint)],X=`q--slot-hint-${e.hint}`):(O=ln(r.hint),X="q--slot-hint"));const j=e.counter===!0||r.counter!==void 0;if(e.hideBottomSpace===!0&&j===!1&&O===void 0)return;const _e=S("div",{key:X,class:"q-field__messages col"},O);return S("div",{class:"q-field__bottom row items-start q-field__bottom--"+(e.hideBottomSpace!==!0?"animated":"stale")},[e.hideBottomSpace===!0?_e:S(ei,{name:"q-transition--field-message"},()=>_e),j===!0?S("div",{class:"q-field__counter"},r.counter!==void 0?r.counter():t.computedCounter.value):null])}function q(O,X){return X===null?null:S("div",{key:O,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},X)}Object.assign(i,{focus:I,blur:T});let se=!1;return Kv(()=>{se=!0}),Hv(()=>{se===!0&&e.autofocus===!0&&i.focus()}),Bo(()=>{zn.value===!0&&e.for===void 0&&(t.targetUid.value=Ah()),e.autofocus===!0&&i.focus()}),en(()=>{clearTimeout(a)}),function(){const X=t.getControl===void 0&&r.control===void 0?{...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0,...N.value}:N.value;return S("label",{ref:t.rootRef,class:[v.value,s.class],style:s.style,...X},[r.before!==void 0?S("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:ur},r.before()):null,S("div",{class:"q-field__inner relative-position col self-stretch"},[S("div",{ref:t.controlRef,class:_.value,tabindex:-1,...t.controlEvents},x()),g.value===!0?Y():null]),r.after!==void 0?S("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:ur},r.after()):null])}}const ov={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},Pl={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleLowerCase()}},dE=Object.keys(Pl);dE.forEach(t=>{Pl[t].regex=new RegExp(Pl[t].pattern)});const yF=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+dE.join("")+"])|(.)","g"),av=/[.*+?^${}()|[\]\\]/g,nt=String.fromCharCode(1),wF={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function bF(t,e,n,r){let s,i,o,a;const l=ve(null),u=ve(h());function c(){return t.autogrow===!0||["textarea","text","search","url","tel","password"].includes(t.type)}Oe(()=>t.type+t.autogrow,f),Oe(()=>t.mask,w=>{if(w!==void 0)g(u.value,!0);else{const I=D(u.value);f(),t.modelValue!==I&&e("update:modelValue",I)}}),Oe(()=>t.fillMask+t.reverseFillMask,()=>{l.value===!0&&g(u.value,!0)}),Oe(()=>t.unmaskedValue,()=>{l.value===!0&&g(u.value)});function h(){if(f(),l.value===!0){const w=p(D(t.modelValue));return t.fillMask!==!1?N(w):w}return t.modelValue}function d(w){if(w<s.length)return s.slice(-w);let I="",T=s;const P=T.indexOf(nt);if(P>-1){for(let R=w-T.length;R>0;R--)I+=nt;T=T.slice(0,P)+I+T.slice(P)}return T}function f(){if(l.value=t.mask!==void 0&&t.mask.length>0&&c(),l.value===!1){a=void 0,s="",i="";return}const w=ov[t.mask]===void 0?t.mask:ov[t.mask],I=typeof t.fillMask=="string"&&t.fillMask.length>0?t.fillMask.slice(0,1):"_",T=I.replace(av,"\\$&"),P=[],R=[],F=[];let x=t.reverseFillMask===!0,H="",Y="";w.replace(yF,(X,j,_e,Fe,Be)=>{if(Fe!==void 0){const Se=Pl[Fe];F.push(Se),Y=Se.negate,x===!0&&(R.push("(?:"+Y+"+)?("+Se.pattern+"+)?(?:"+Y+"+)?("+Se.pattern+"+)?"),x=!1),R.push("(?:"+Y+"+)?("+Se.pattern+")?")}else if(_e!==void 0)H="\\"+(_e==="\\"?"":_e),F.push(_e),P.push("([^"+H+"]+)?"+H+"?");else{const Se=j!==void 0?j:Be;H=Se==="\\"?"\\\\\\\\":Se.replace(av,"\\\\$&"),F.push(Se),P.push("([^"+H+"]+)?"+H+"?")}});const q=new RegExp("^"+P.join("")+"("+(H===""?".":"[^"+H+"]")+"+)?$"),se=R.length-1,O=R.map((X,j)=>j===0&&t.reverseFillMask===!0?new RegExp("^"+T+"*"+X):j===se?new RegExp("^"+X+"("+(Y===""?".":Y)+"+)?"+(t.reverseFillMask===!0?"$":T+"*")):new RegExp("^"+X));o=F,a=X=>{const j=q.exec(X);j!==null&&(X=j.slice(1).join(""));const _e=[],Fe=O.length;for(let Be=0,Se=X;Be<Fe;Be++){const pt=O[Be].exec(Se);if(pt===null)break;Se=Se.slice(pt.shift().length),_e.push(...pt)}return _e.length>0?_e.join(""):X},s=F.map(X=>typeof X=="string"?X:nt).join(""),i=s.split(nt).join(I)}function g(w,I,T){const P=r.value,R=P.selectionEnd,F=P.value.length-R,x=D(w);I===!0&&f();const H=p(x),Y=t.fillMask!==!1?N(H):H,q=u.value!==Y;P.value!==Y&&(P.value=Y),q===!0&&(u.value=Y),document.activeElement===P&&wt(()=>{if(Y===i){const O=t.reverseFillMask===!0?i.length:0;P.setSelectionRange(O,O,"forward");return}if(T==="insertFromPaste"&&t.reverseFillMask!==!0){const O=R-1;v.right(P,O,O);return}if(["deleteContentBackward","deleteContentForward"].indexOf(T)>-1){const O=t.reverseFillMask===!0?R===0?Y.length>H.length?1:0:Math.max(0,Y.length-(Y===i?0:Math.min(H.length,F)+1))+1:R;P.setSelectionRange(O,O,"forward");return}if(t.reverseFillMask===!0)if(q===!0){const O=Math.max(0,Y.length-(Y===i?0:Math.min(H.length,F+1)));O===1&&R===1?P.setSelectionRange(O,O,"forward"):v.rightReverse(P,O,O)}else{const O=Y.length-F;P.setSelectionRange(O,O,"backward")}else if(q===!0){const O=Math.max(0,s.indexOf(nt),Math.min(H.length,R)-1);v.right(P,O,O)}else{const O=R-1;v.right(P,O,O)}});const se=t.unmaskedValue===!0?D(Y):Y;String(t.modelValue)!==se&&n(se,!0)}function E(w,I,T){const P=p(D(w.value));I=Math.max(0,s.indexOf(nt),Math.min(P.length,I)),w.setSelectionRange(I,T,"forward")}const v={left(w,I,T,P){const R=s.slice(I-1).indexOf(nt)===-1;let F=Math.max(0,I-1);for(;F>=0;F--)if(s[F]===nt){I=F,R===!0&&I++;break}if(F<0&&s[I]!==void 0&&s[I]!==nt)return v.right(w,0,0);I>=0&&w.setSelectionRange(I,P===!0?T:I,"backward")},right(w,I,T,P){const R=w.value.length;let F=Math.min(R,T+1);for(;F<=R;F++)if(s[F]===nt){T=F;break}else s[F-1]===nt&&(T=F);if(F>R&&s[T-1]!==void 0&&s[T-1]!==nt)return v.left(w,R,R);w.setSelectionRange(P?I:T,T,"forward")},leftReverse(w,I,T,P){const R=d(w.value.length);let F=Math.max(0,I-1);for(;F>=0;F--)if(R[F-1]===nt){I=F;break}else if(R[F]===nt&&(I=F,F===0))break;if(F<0&&R[I]!==void 0&&R[I]!==nt)return v.rightReverse(w,0,0);I>=0&&w.setSelectionRange(I,P===!0?T:I,"backward")},rightReverse(w,I,T,P){const R=w.value.length,F=d(R),x=F.slice(0,T+1).indexOf(nt)===-1;let H=Math.min(R,T+1);for(;H<=R;H++)if(F[H-1]===nt){T=H,T>0&&x===!0&&T--;break}if(H>R&&F[T-1]!==void 0&&F[T-1]!==nt)return v.leftReverse(w,R,R);w.setSelectionRange(P===!0?I:T,T,"forward")}};function _(w){if(Ty(w)===!0)return;const I=r.value,T=I.selectionStart,P=I.selectionEnd;if(w.keyCode===37||w.keyCode===39){const R=v[(w.keyCode===39?"right":"left")+(t.reverseFillMask===!0?"Reverse":"")];w.preventDefault(),R(I,T,P,w.shiftKey)}else w.keyCode===8&&t.reverseFillMask!==!0&&T===P?v.left(I,T,P,!0):w.keyCode===46&&t.reverseFillMask===!0&&T===P&&v.rightReverse(I,T,P,!0)}function p(w){if(w==null||w==="")return"";if(t.reverseFillMask===!0)return b(w);const I=o;let T=0,P="";for(let R=0;R<I.length;R++){const F=w[T],x=I[R];if(typeof x=="string")P+=x,F===x&&T++;else if(F!==void 0&&x.regex.test(F))P+=x.transform!==void 0?x.transform(F):F,T++;else return P}return P}function b(w){const I=o,T=s.indexOf(nt);let P=w.length-1,R="";for(let F=I.length-1;F>=0&&P>-1;F--){const x=I[F];let H=w[P];if(typeof x=="string")R=x+R,H===x&&P--;else if(H!==void 0&&x.regex.test(H))do R=(x.transform!==void 0?x.transform(H):H)+R,P--,H=w[P];while(T===F&&H!==void 0&&x.regex.test(H));else return R}return R}function D(w){return typeof w!="string"||a===void 0?typeof w=="number"?a(""+w):w:a(w)}function N(w){return i.length-w.length<=0?w:t.reverseFillMask===!0&&w.length>0?i.slice(0,-w.length)+w:w+i.slice(w.length)}return{innerValue:u,hasMask:l,moveCursorForPaste:E,updateMaskValue:g,onMaskedKeydown:_}}const kf={name:String};function fE(t={}){return(e,n,r)=>{e[n](S("input",{class:"hidden"+(r||""),...t.value}))}}function _F(t){return C(()=>t.name||t.for)}function EF(t,e){function n(){const r=t.modelValue;try{const s="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(r)===r&&("length"in r?Array.from(r):[r]).forEach(i=>{s.items.add(i)}),{files:s.files}}catch{return{files:void 0}}}return C(e===!0?()=>{if(t.type==="file")return n()}:n)}const IF=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,TF=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,SF=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,kF=/[a-z0-9_ -]$/i;function CF(t){return function(n){if(n.type==="compositionend"||n.type==="change"){if(n.target.qComposing!==!0)return;n.target.qComposing=!1,t(n)}else n.type==="compositionupdate"&&n.target.qComposing!==!0&&typeof n.data=="string"&&(Ze.is.firefox===!0?kF.test(n.data)===!1:IF.test(n.data)===!0||TF.test(n.data)===!0||SF.test(n.data)===!0)===!0&&(n.target.qComposing=!0)}}var xF=ct({name:"QInput",inheritAttrs:!1,props:{...gF,...wF,...kf,modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...mF,"paste","change"],setup(t,{emit:e,attrs:n}){const r={};let s=NaN,i,o,a,l;const u=ve(null),c=_F(t),{innerValue:h,hasMask:d,moveCursorForPaste:f,updateMaskValue:g,onMaskedKeydown:E}=bF(t,e,x,u),v=EF(t,!0),_=C(()=>Dh(h.value)),p=CF(F),b=pF(),D=C(()=>t.type==="textarea"||t.autogrow===!0),N=C(()=>D.value===!0||["text","search","url","tel","password"].includes(t.type)),w=C(()=>{const j={...b.splitAttrs.listeners.value,onInput:F,onPaste:R,onChange:Y,onBlur:q,onFocus:ti};return j.onCompositionstart=j.onCompositionupdate=j.onCompositionend=p,d.value===!0&&(j.onKeydown=E),t.autogrow===!0&&(j.onAnimationend=H),j}),I=C(()=>{const j={tabindex:0,"data-autofocus":t.autofocus===!0||void 0,rows:t.type==="textarea"?6:void 0,"aria-label":t.label,name:c.value,...b.splitAttrs.attributes.value,id:b.targetUid.value,maxlength:t.maxlength,disabled:t.disable===!0,readonly:t.readonly===!0};return D.value===!1&&(j.type=t.type),t.autogrow===!0&&(j.rows=1),j});Oe(()=>t.type,()=>{u.value&&(u.value.value=t.modelValue)}),Oe(()=>t.modelValue,j=>{if(d.value===!0){if(o===!0&&(o=!1,String(j)===s))return;g(j)}else h.value!==j&&(h.value=j,t.type==="number"&&r.hasOwnProperty("value")===!0&&(i===!0?i=!1:delete r.value));t.autogrow===!0&&wt(H)}),Oe(()=>t.autogrow,j=>{j===!0?wt(H):u.value!==null&&n.rows>0&&(u.value.style.height="auto")}),Oe(()=>t.dense,()=>{t.autogrow===!0&&wt(H)});function T(){Sf(()=>{const j=document.activeElement;u.value!==null&&u.value!==j&&(j===null||j.id!==b.targetUid.value)&&u.value.focus({preventScroll:!0})})}function P(){u.value!==null&&u.value.select()}function R(j){if(d.value===!0&&t.reverseFillMask!==!0){const _e=j.target;f(_e,_e.selectionStart,_e.selectionEnd)}e("paste",j)}function F(j){if(!j||!j.target)return;if(t.type==="file"){e("update:modelValue",j.target.files);return}const _e=j.target.value;if(j.target.qComposing===!0){r.value=_e;return}if(d.value===!0)g(_e,!1,j.inputType);else if(x(_e),N.value===!0&&j.target===document.activeElement){const{selectionStart:Fe,selectionEnd:Be}=j.target;Fe!==void 0&&Be!==void 0&&wt(()=>{j.target===document.activeElement&&_e.indexOf(j.target.value)===0&&j.target.setSelectionRange(Fe,Be)})}t.autogrow===!0&&H()}function x(j,_e){l=()=>{t.type!=="number"&&r.hasOwnProperty("value")===!0&&delete r.value,t.modelValue!==j&&s!==j&&(s=j,_e===!0&&(o=!0),e("update:modelValue",j),wt(()=>{s===j&&(s=NaN)})),l=void 0},t.type==="number"&&(i=!0,r.value=j),t.debounce!==void 0?(clearTimeout(a),r.value=j,a=setTimeout(l,t.debounce)):l()}function H(){const j=u.value;if(j!==null){const _e=j.parentNode.style,{overflow:Fe}=j.style;_e.marginBottom=j.scrollHeight-1+"px",j.style.height="1px",j.style.overflow="hidden",j.style.height=j.scrollHeight+"px",j.style.overflow=Fe,_e.marginBottom=""}}function Y(j){p(j),clearTimeout(a),l!==void 0&&l(),e("change",j.target.value)}function q(j){j!==void 0&&ti(j),clearTimeout(a),l!==void 0&&l(),i=!1,o=!1,delete r.value,t.type!=="file"&&setTimeout(()=>{u.value!==null&&(u.value.value=h.value!==void 0?h.value:"")})}function se(){return r.hasOwnProperty("value")===!0?r.value:h.value!==void 0?h.value:""}en(()=>{q()}),Bo(()=>{t.autogrow===!0&&H()}),Object.assign(b,{innerValue:h,fieldClass:C(()=>`q-${D.value===!0?"textarea":"input"}`+(t.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:C(()=>t.type!=="file"&&typeof t.shadowText=="string"&&t.shadowText.length>0),inputRef:u,emitValue:x,hasValue:_,floatingLabel:C(()=>_.value===!0||Dh(t.displayValue)),getControl:()=>S(D.value===!0?"textarea":"input",{ref:u,class:["q-field__native q-placeholder",t.inputClass],style:t.inputStyle,...I.value,...w.value,...t.type!=="file"?{value:se()}:v.value}),getShadowControl:()=>S("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(D.value===!0?"":" text-no-wrap")},[S("span",{class:"invisible"},se()),S("span",t.shadowText)])});const O=vF(b),X=Ke();return Object.assign(X.proxy,{focus:T,select:P,getNativeElement:()=>u.value}),O}});function gE(t,e){const n=ve(null),r=C(()=>t.disable===!0?null:S("span",{ref:n,class:"no-outline",tabindex:-1}));function s(i){const o=e.value;i!==void 0&&i.type.indexOf("key")===0?o!==null&&document.activeElement!==o&&o.contains(document.activeElement)===!0&&o.focus():n.value!==null&&(i===void 0||o!==null&&o.contains(i.target)===!0)&&n.value.focus()}return{refocusTargetEl:r,refocusTarget:s}}var mE={xs:30,sm:35,md:40,lg:50,xl:60};const AF=S("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24","aria-hidden":"true"},[S("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),S("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]);var DF=ct({name:"QRadio",props:{...Cr,...Ii,...kf,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(t,{slots:e,emit:n}){const{proxy:r}=Ke(),s=xr(t,r.$q),i=Ti(t,mE),o=ve(null),{refocusTargetEl:a,refocusTarget:l}=gE(t,o),u=C(()=>we(t.modelValue)===we(t.val)),c=C(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(t.disable===!0?" disabled":"")+(s.value===!0?" q-radio--dark":"")+(t.dense===!0?" q-radio--dense":"")+(t.leftLabel===!0?" reverse":"")),h=C(()=>{const b=t.color!==void 0&&(t.keepColor===!0||u.value===!0)?` text-${t.color}`:"";return`q-radio__inner relative-position q-radio__inner--${u.value===!0?"truthy":"falsy"}${b}`}),d=C(()=>(u.value===!0?t.checkedIcon:t.uncheckedIcon)||null),f=C(()=>t.disable===!0?-1:t.tabindex||0),g=C(()=>{const b={type:"radio"};return t.name!==void 0&&Object.assign(b,{"^checked":u.value===!0?"checked":void 0,name:t.name,value:t.val}),b}),E=fE(g);function v(b){b!==void 0&&(Ft(b),l(b)),t.disable!==!0&&u.value!==!0&&n("update:modelValue",t.val,b)}function _(b){(b.keyCode===13||b.keyCode===32)&&Ft(b)}function p(b){(b.keyCode===13||b.keyCode===32)&&v(b)}return Object.assign(r,{set:v}),()=>{const b=d.value!==null?[S("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[S(On,{class:"q-radio__icon",name:d.value})])]:[AF];t.disable!==!0&&E(b,"unshift"," q-radio__native q-ma-none q-pa-none");const D=[S("div",{class:h.value,style:i.value},b)];a.value!==null&&D.push(a.value);const N=t.label!==void 0?Gr(e.default,[t.label]):ln(e.default);return N!==void 0&&D.push(S("div",{class:"q-radio__label q-anchor--skip"},N)),S("div",{ref:o,class:c.value,tabindex:f.value,role:"radio","aria-label":t.label,"aria-checked":u.value===!0?"true":"false","aria-disabled":t.disable===!0?"true":void 0,onClick:v,onKeydown:_,onKeyup:p},D)}}});const pE={...Cr,...Ii,...kf,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:t=>t==="tf"||t==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},vE=["update:modelValue"];function yE(t,e){const{props:n,slots:r,emit:s,proxy:i}=Ke(),{$q:o}=i,a=xr(n,o),l=ve(null),{refocusTargetEl:u,refocusTarget:c}=gE(n,l),h=Ti(n,mE),d=C(()=>n.val!==void 0&&Array.isArray(n.modelValue)),f=C(()=>{const x=we(n.val);return d.value===!0?n.modelValue.findIndex(H=>we(H)===x):-1}),g=C(()=>d.value===!0?f.value>-1:we(n.modelValue)===we(n.trueValue)),E=C(()=>d.value===!0?f.value===-1:we(n.modelValue)===we(n.falseValue)),v=C(()=>g.value===!1&&E.value===!1),_=C(()=>n.disable===!0?-1:n.tabindex||0),p=C(()=>`q-${t} cursor-pointer no-outline row inline no-wrap items-center`+(n.disable===!0?" disabled":"")+(a.value===!0?` q-${t}--dark`:"")+(n.dense===!0?` q-${t}--dense`:"")+(n.leftLabel===!0?" reverse":"")),b=C(()=>{const x=g.value===!0?"truthy":E.value===!0?"falsy":"indet",H=n.color!==void 0&&(n.keepColor===!0||(t==="toggle"?g.value===!0:E.value!==!0))?` text-${n.color}`:"";return`q-${t}__inner relative-position non-selectable q-${t}__inner--${x}${H}`}),D=C(()=>{const x={type:"checkbox"};return n.name!==void 0&&Object.assign(x,{"^checked":g.value===!0?"checked":void 0,name:n.name,value:d.value===!0?n.val:n.trueValue}),x}),N=fE(D),w=C(()=>{const x={tabindex:_.value,role:"checkbox","aria-label":n.label,"aria-checked":v.value===!0?"mixed":g.value===!0?"true":"false"};return n.disable===!0&&(x["aria-disabled"]="true"),x});function I(x){x!==void 0&&(Ft(x),c(x)),n.disable!==!0&&s("update:modelValue",T(),x)}function T(){if(d.value===!0){if(g.value===!0){const x=n.modelValue.slice();return x.splice(f.value,1),x}return n.modelValue.concat([n.val])}if(g.value===!0){if(n.toggleOrder!=="ft"||n.toggleIndeterminate===!1)return n.falseValue}else if(E.value===!0){if(n.toggleOrder==="ft"||n.toggleIndeterminate===!1)return n.trueValue}else return n.toggleOrder!=="ft"?n.trueValue:n.falseValue;return n.indeterminateValue}function P(x){(x.keyCode===13||x.keyCode===32)&&Ft(x)}function R(x){(x.keyCode===13||x.keyCode===32)&&I(x)}const F=e(g,v);return Object.assign(i,{toggle:I}),()=>{const x=F();n.disable!==!0&&N(x,"unshift",` q-${t}__native absolute q-ma-none q-pa-none`);const H=[S("div",{class:b.value,style:h.value},x)];u.value!==null&&H.push(u.value);const Y=n.label!==void 0?Gr(r.default,[n.label]):ln(r.default);return Y!==void 0&&H.push(S("div",{class:`q-${t}__label q-anchor--skip`},Y)),S("div",{ref:l,class:p.value,...w.value,onClick:I,onKeydown:P,onKeyup:R},H)}}const RF=S("div",{key:"svg",class:"q-checkbox__bg absolute"},[S("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24","aria-hidden":"true"},[S("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),S("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var OF=ct({name:"QCheckbox",props:pE,emits:vE,setup(t){function e(n,r){const s=C(()=>(n.value===!0?t.checkedIcon:r.value===!0?t.indeterminateIcon:t.uncheckedIcon)||null);return()=>s.value!==null?[S("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[S(On,{class:"q-checkbox__icon",name:s.value})])]:[RF]}return yE("checkbox",e)}}),MF=ct({name:"QToggle",props:{...pE,icon:String,iconColor:String},emits:vE,setup(t){function e(n,r){const s=C(()=>(n.value===!0?t.checkedIcon:r.value===!0?t.indeterminateIcon:t.uncheckedIcon)||t.icon),i=C(()=>n.value===!0?t.iconColor:null);return()=>[S("div",{class:"q-toggle__track"}),S("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},s.value!==void 0?[S(On,{name:s.value,color:i.value})]:void 0)]}return yE("toggle",e)}});const wE={radio:DF,checkbox:OF,toggle:MF},PF=Object.keys(wE);var NF=ct({name:"QOptionGroup",props:{...Cr,modelValue:{required:!0},options:{type:Array,validator:t=>t.every(e=>"value"in e&&"label"in e)},name:String,type:{default:"radio",validator:t=>PF.includes(t)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(t,{emit:e,slots:n}){const{proxy:{$q:r}}=Ke(),s=Array.isArray(t.modelValue);t.type==="radio"?s===!0&&console.error("q-option-group: model should not be array"):s===!1&&console.error("q-option-group: model should be array in your case");const i=xr(t,r),o=C(()=>wE[t.type]),a=C(()=>"q-option-group q-gutter-x-sm"+(t.inline===!0?" q-option-group--inline":"")),l=C(()=>{const c={};return t.type==="radio"&&(c.role="radiogroup",t.disable===!0&&(c["aria-disabled"]="true")),c});function u(c){e("update:modelValue",c)}return()=>S("div",{class:a.value,...l.value},t.options.map((c,h)=>{const d=n["label-"+h]!==void 0?()=>n["label-"+h](c):n.label!==void 0?()=>n.label(c):void 0;return S("div",[S(o.value,{modelValue:t.modelValue,val:c.value,name:c.name===void 0?t.name:c.name,disable:t.disable||c.disable,label:d===void 0?c.label:null,leftLabel:c.leftLabel===void 0?t.leftLabel:c.leftLabel,color:c.color===void 0?t.color:c.color,checkedIcon:c.checkedIcon,uncheckedIcon:c.uncheckedIcon,dark:c.dark||i.value,size:c.size===void 0?t.size:c.size,dense:t.dense,keepColor:c.keepColor===void 0?t.keepColor:c.keepColor,"onUpdate:modelValue":u},d)])}))}}),LF=ct({name:"DialogPlugin",props:{...Cr,title:String,message:String,prompt:Object,options:Object,progress:[Boolean,Object],html:Boolean,ok:{type:[String,Object,Boolean],default:!0},cancel:[String,Object,Boolean],focus:{type:String,default:"ok",validator:t=>["ok","cancel","none"].includes(t)},stackButtons:Boolean,color:String,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},emits:["ok","hide"],setup(t,{emit:e}){const{proxy:n}=Ke(),{$q:r}=n,s=xr(t,r),i=ve(null),o=ve(t.prompt!==void 0?t.prompt.model:t.options!==void 0?t.options.model:void 0),a=C(()=>"q-dialog-plugin"+(s.value===!0?" q-dialog-plugin--dark q-dark":"")+(t.progress!==!1?" q-dialog-plugin--progress":"")),l=C(()=>t.color||(s.value===!0?"amber":"primary")),u=C(()=>t.progress===!1?null:on(t.progress)===!0?{component:t.progress.spinner||ys,props:{color:t.progress.color||l.value}}:{component:ys,props:{color:l.value}}),c=C(()=>t.prompt!==void 0||t.options!==void 0),h=C(()=>{if(c.value!==!0)return{};const{model:Y,isValid:q,items:se,...O}=t.prompt!==void 0?t.prompt:t.options;return O}),d=C(()=>on(t.ok)===!0||t.ok===!0?r.lang.label.ok:t.ok),f=C(()=>on(t.cancel)===!0||t.cancel===!0?r.lang.label.cancel:t.cancel),g=C(()=>t.prompt!==void 0?t.prompt.isValid!==void 0&&t.prompt.isValid(o.value)!==!0:t.options!==void 0?t.options.isValid!==void 0&&t.options.isValid(o.value)!==!0:!1),E=C(()=>({color:l.value,label:d.value,ripple:!1,disable:g.value,...on(t.ok)===!0?t.ok:{flat:!0},"data-autofocus":t.focus==="ok"&&c.value!==!0||void 0,onClick:b})),v=C(()=>({color:l.value,label:f.value,ripple:!1,...on(t.cancel)===!0?t.cancel:{flat:!0},"data-autofocus":t.focus==="cancel"&&c.value!==!0||void 0,onClick:D}));Oe(()=>t.prompt&&t.prompt.model,w),Oe(()=>t.options&&t.options.model,w);function _(){i.value.show()}function p(){i.value.hide()}function b(){e("ok",we(o.value)),p()}function D(){p()}function N(){e("hide")}function w(Y){o.value=Y}function I(Y){g.value!==!0&&t.prompt.type!=="textarea"&&vo(Y,13)===!0&&b()}function T(Y,q){return t.html===!0?S(Bi,{class:Y,innerHTML:q}):S(Bi,{class:Y},()=>q)}function P(){return[S(xF,{modelValue:o.value,...h.value,color:l.value,dense:!0,autofocus:!0,dark:s.value,"onUpdate:modelValue":w,onKeyup:I})]}function R(){return[S(NF,{modelValue:o.value,...h.value,color:l.value,options:t.options.items,dark:s.value,"onUpdate:modelValue":w})]}function F(){const Y=[];return t.cancel&&Y.push(S(Lo,v.value)),t.ok&&Y.push(S(Lo,E.value)),S(WL,{class:t.stackButtons===!0?"items-end":"",vertical:t.stackButtons,align:"right"},()=>Y)}function x(){const Y=[];return t.title&&Y.push(T("q-dialog__title",t.title)),t.progress!==!1&&Y.push(S(Bi,{class:"q-dialog__progress"},()=>S(u.value.component,u.value.props))),t.message&&Y.push(T("q-dialog__message",t.message)),t.prompt!==void 0?Y.push(S(Bi,{class:"scroll q-dialog-plugin__form"},P)):t.options!==void 0&&Y.push(S(Jp,{dark:s.value}),S(Bi,{class:"scroll q-dialog-plugin__form"},R),S(Jp,{dark:s.value})),(t.ok||t.cancel)&&Y.push(F()),Y}function H(){return[S(GL,{class:[a.value,t.cardClass],style:t.cardStyle,dark:s.value},x)]}return Object.assign(n,{show:_,hide:p}),()=>S(KL,{ref:i,onHide:N},H)}});function bE(t,e){for(const n in e)n!=="spinner"&&Object(e[n])===e[n]?(t[n]=Object(t[n])!==t[n]?{}:{...t[n]},bE(t[n],e[n])):t[n]=e[n]}function FF(t,e,n){return r=>{let s,i;const o=e===!0&&r.component!==void 0;if(o===!0){const{component:p,componentProps:b}=r;s=typeof p=="string"?n.component(p):p,i=b||{}}else{const{class:p,style:b,...D}=r;s=t,i=D,p!==void 0&&(D.cardClass=p),b!==void 0&&(D.cardStyle=b)}let a,l=!1;const u=ve(null),c=If(),h=p=>{if(u.value!==null&&u.value[p]!==void 0){u.value[p]();return}const b=a.$.subTree;if(b&&b.component){if(b.component.proxy&&b.component.proxy[p]){b.component.proxy[p]();return}if(b.component.subTree&&b.component.subTree.component&&b.component.subTree.component.proxy&&b.component.subTree.component.proxy[p]){b.component.subTree.component.proxy[p]();return}}console.error("[Quasar] Incorrectly defined Dialog component")},d=[],f=[],g={onOk(p){return d.push(p),g},onCancel(p){return f.push(p),g},onDismiss(p){return d.push(p),f.push(p),g},hide(){return h("hide"),g},update(p){if(a!==null){if(o===!0)Object.assign(i,p);else{const{class:b,style:D,...N}=p;b!==void 0&&(N.cardClass=b),D!==void 0&&(N.cardStyle=D),bE(i,N)}a.$forceUpdate()}return g}},E=p=>{l=!0,d.forEach(b=>{b(p)})},v=()=>{_.unmount(c),nE(c),_=null,a=null,l!==!0&&f.forEach(p=>{p()})};let _=Cy({name:"QGlobalDialog",setup:()=>()=>S(s,{...i,ref:u,onOk:E,onHide:v,onVnodeMounted(...p){typeof i.onVnodeMounted=="function"&&i.onVnodeMounted(...p),wt(()=>h("show"))}})},n);return a=_.mount(c),g}}var BF={install({$q:t,parentApp:e}){t.dialog=FF(LF,!0,e),this.__installed!==!0&&(this.create=t.dialog)}},UF={config:{},plugins:{Meta:VN,Notify:wL,Dialog:BF}};async function VF({app:t,router:e,store:n}){t.use(e),t.mount("#q-app")}MN(wy,UF).then(VF);export{qF as $,WL as A,KL as B,$F as C,jF as D,uy as E,Vt as F,PI as G,Jp as H,zF as I,aT as J,ln as K,Bo as L,wt as M,po as N,Lt as O,pB as P,YN as Q,Gi as R,tB as S,IB as T,ML as U,PL as V,TB as W,Er as X,Hl as Y,tL as Z,AS as _,C as a,Ii as a$,On as a0,Cr as a1,xr as a2,hL as a3,ti as a4,vo as a5,ur as a6,iS as a7,oS as a8,Za as a9,yB as aA,HF as aB,mB as aC,Hv as aD,Kv as aE,Rp as aF,rB as aG,xF as aH,MF as aI,bS as aJ,wS as aK,US as aL,hB as aM,lB as aN,oB as aO,DN as aP,uB as aQ,Cp as aR,gB as aS,aB as aT,cB as aU,ze as aV,dB as aW,fB as aX,tE as aY,AI as aZ,Lc as a_,Ze as aa,IL as ab,kL as ac,TL as ad,EL as ae,_L as af,bB as ag,SL as ah,RL as ai,zL as aj,rS as ak,Qp as al,Yp as am,AL as an,ei as ao,Sf as ap,jL as aq,ZN as ar,Ft as as,oL as at,aL as au,qN as av,_B as aw,EB as ax,Nc as ay,wB as az,S as b,Ti as b0,vB as b1,W_ as b2,_y as b3,gF as b4,mF as b5,vF as b6,pF as b7,kf as b8,_F as b9,Dh as ba,qu as bb,Wv as bc,Yv as bd,CF as be,iB as bf,Ty as bg,nB as bh,ky as bi,on as bj,XF as bk,OF as bl,Uo as bm,JF as bn,ZF as bo,bL as bp,Wk as bq,UL as br,EC as bs,QF as bt,YF as bu,fF as bv,G_ as bw,GF as bx,sB as by,SB as bz,ct as c,Jt as d,Wh as e,Jh as f,Ke as g,Gr as h,zn as i,KF as j,Et as k,eB as l,wI as m,Hs as n,en as o,Qv as p,Zh as q,ve as r,VS as s,oT as t,xp as u,WF as v,Oe as w,Lo as x,GL as y,Bi as z};
